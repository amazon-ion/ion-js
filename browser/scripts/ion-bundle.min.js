!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ion=e()}(function(){return function r(i,a,s){function o(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return o(i[t][1][e]||e)},n,n.exports,r,i,a,s)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)o(s[e]);return o}({1:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractWriter=void 0,e("./IonTypes"));n.AbstractWriter=function(){function e(){(0,i.default)(this,e),this._annotations=[]}return(0,a.default)(e,[{key:"addAnnotation",value:function(e){if(!this._isString(e))throw new Error("Annotation must be of type string.");this._annotations.push(e)}},{key:"setAnnotations",value:function(e){if(null==e)throw new Error("Annotations were undefined or null.");if(!this._validateAnnotations(e))throw new Error("Annotations must be of type string[].");this._annotations=e}},{key:"writeValues",value:function(e){this._writeValues(e)}},{key:"writeValue",value:function(e){this._writeValue(e)}},{key:"_clearAnnotations",value:function(){this._annotations=[]}},{key:"_writeValues",value:function(e){var t=e.type();for(null===t&&(t=e.next());null!==t;)this._writeValue(e),t=e.next()}},{key:"_writeValue",value:function(e){var t=e.type();if(null!==t){if(this._isInStruct()){var n=e.fieldName();if(null===n)throw new Error("Cannot call writeValue() when the Writer is in a Struct but the Reader is not.");this.writeFieldName(n)}if(this.setAnnotations(e.annotations()),e.isNull())this.writeNull(t);else{switch(t){case s.IonTypes.BOOL:this.writeBoolean(e.booleanValue());break;case s.IonTypes.INT:this.writeInt(e.bigIntValue());break;case s.IonTypes.FLOAT:this.writeFloat64(e.numberValue());break;case s.IonTypes.DECIMAL:this.writeDecimal(e.decimalValue());break;case s.IonTypes.TIMESTAMP:this.writeTimestamp(e.timestampValue());break;case s.IonTypes.SYMBOL:this.writeSymbol(e.stringValue());break;case s.IonTypes.STRING:this.writeString(e.stringValue());break;case s.IonTypes.CLOB:this.writeClob(e.uInt8ArrayValue());break;case s.IonTypes.BLOB:this.writeBlob(e.uInt8ArrayValue());break;case s.IonTypes.LIST:this.stepIn(s.IonTypes.LIST);break;case s.IonTypes.SEXP:this.stepIn(s.IonTypes.SEXP);break;case s.IonTypes.STRUCT:this.stepIn(s.IonTypes.STRUCT);break;default:throw new Error("Unrecognized type "+(null!==t?t.name:t))}t.isContainer&&(e.stepIn(),this._writeValues(e),this.stepOut(),e.stepOut())}}}},{key:"_validateAnnotations",value:function(e){if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++)if(!this._isString(e[t]))return!1;return!0}},{key:"_isString",value:function(e){return"string"==typeof e}}]),e}()},{"./IonTypes":29,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],2:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),r=(Object.defineProperty(n,"__esModule",{value:!0}),n.BigIntSerde=void 0,function(){function e(){(0,i.default)(this,e)}return(0,a.default)(e,null,[{key:"toSignedIntBytes",value:function(e,t){var n,e=this.toUnsignedIntBytes(e);return 128<=e[0]&&((n=new Uint8Array(e.length+1)).set(e,1),e=n),t&&(e[0]+=128),e}},{key:"fromUnsignedBytes",value:function(e){for(var t=0n,n=0;n<e.length;n++)var r=BigInt(e[n]),t=t<<this.BITS_PER_BYTE|r;return t}},{key:"toUnsignedIntBytes",value:function(e){for(var t=this.getUnsignedIntSizeInBytes(e=e<0n?-e:e),n=new Uint8Array(t),r=t-1;0<=r;r--){var i=Number(e&this.BYTE_MAX_VALUE);e>>=this.BITS_PER_BYTE,n[r]=i}return n}},{key:"getUnsignedIntSizeInBytes",value:function(e){for(var t=0;t<this.SIZE_THRESHOLDS.length;t++)if(e<=this.SIZE_THRESHOLDS[t])return t+1;for(var n=this.SIZE_THRESHOLDS.length,r=this.calculateSizeThreshold(n);r<e;)r=this.calculateSizeThreshold(++n);return n}},{key:"calculateSizeThresholds",value:function(){for(var e=[],t=1;t<=this.SERIALIZED_BIGINT_SIZES_TO_PRECOMPUTE;t++)e.push(this.calculateSizeThreshold(t));return e}},{key:"calculateSizeThreshold",value:function(e){e=BigInt(e)*this.BITS_PER_BYTE;return Math.pow(2n,e)-1n}}]),e}());(n.BigIntSerde=r).SERIALIZED_BIGINT_SIZES_TO_PRECOMPUTE=64,r.BITS_PER_BYTE=8n,r.BYTE_MAX_VALUE=BigInt(255),r.SIZE_THRESHOLDS=r.calculateSizeThresholds()},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],3:[function(e,t,n){"use strict";var a,r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/classCallCheck")),e=(Object.defineProperty(n,"__esModule",{value:!0}),n.ComparisonResult=n.ComparisonResultType=void 0,(r=a=n.ComparisonResultType||(n.ComparisonResultType={})).EQUAL="EQUAL",r.NOT_EQUAL="NOT_EQUAL",r.ERROR="ERROR",(0,i.default)(function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.EQUAL,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(0,s.default)(this,e),this.result=t,this.message=n,this.actualIndex=r,this.expectedIndex=i}));n.ComparisonResult=e},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],4:[function(e,t,n){"use strict";var r,i;Object.defineProperty(n,"__esModule",{value:!0}),n.IntSize=void 0,(i=r=n.IntSize||(n.IntSize={}))[i.Number=0]="Number",i[i.BigInt=1]="BigInt",n.default=r},{}],5:[function(e,x,t){"use strict";function a(e,t){var n,r,i,a,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return r=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==s.return||s.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.dom=t.IntSize=t.dumpPrettyText=t.dumpText=t.dumpBinary=t.makeBinaryWriter=t.makePrettyWriter=t.makeTextWriter=t.makeReader=void 0,s(e("./IntSize"))),l=(t.IntSize=s.default,e("./IonBinaryReader")),u=e("./IonBinaryWriter"),c=e("./IonConstants"),h=e("./IonLocalSymbolTable"),f=e("./IonPrettyTextWriter"),p=e("./IonSpan"),_=e("./IonTextReader"),d=e("./IonTextWriter"),y=e("./IonUnicode"),b=e("./IonWriteable");function m(){return new d.TextWriter(new b.Writeable)}function v(e){return new f.PrettyTextWriter(new b.Writeable,e)}function T(){var e=h.defaultLocalSymbolTable();return new u.BinaryWriter(e,new b.Writeable)}function g(e,t){var n,r=a(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;R.Value.from(i).writeTo(e)}}catch(e){r.e(e)}finally{r.f()}return e.close(),e.getBytes()}t.makeReader=function(e,t){return"string"==typeof e?new _.TextReader(new p.StringSpan(e),t):function(e){if(!(e.length<4)){for(var t=0;t<4;t++)if(e[t]!==c.IVM.binary[t])return;return 1}}(e=new Uint8Array(e))?new l.BinaryReader(new p.BinarySpan(e),t):new _.TextReader(new p.StringSpan(y.decodeUtf8(e)),t)},t.makeTextWriter=m,t.makePrettyWriter=v,t.makeBinaryWriter=T,t.dumpBinary=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g(T(),t)},t.dumpText=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.decodeUtf8(g(m(),t))},t.dumpPrettyText=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.decodeUtf8(g(v(),t))};var w=e("./IonCatalog"),I=(Object.defineProperty(t,"Catalog",{enumerable:!0,get:function(){return w.Catalog}}),e("./IonDecimal")),C=(Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return I.Decimal}}),e("./IonLocalSymbolTable")),S=(Object.defineProperty(t,"defaultLocalSymbolTable",{enumerable:!0,get:function(){return C.defaultLocalSymbolTable}}),e("./IonType")),E=(Object.defineProperty(t,"IonType",{enumerable:!0,get:function(){return S.IonType}}),e("./IonTypes")),k=(Object.defineProperty(t,"IonTypes",{enumerable:!0,get:function(){return E.IonTypes}}),e("./IonSharedSymbolTable")),O=(Object.defineProperty(t,"SharedSymbolTable",{enumerable:!0,get:function(){return k.SharedSymbolTable}}),e("./IonTimestamp")),A=(Object.defineProperty(t,"TimestampPrecision",{enumerable:!0,get:function(){return O.TimestampPrecision}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return O.Timestamp}}),e("./IonText")),N=(Object.defineProperty(t,"toBase64",{enumerable:!0,get:function(){return A.toBase64}}),e("./IonUnicode")),R=(Object.defineProperty(t,"decodeUtf8",{enumerable:!0,get:function(){return N.decodeUtf8}}),n(e("./dom"))),L=(t.dom=R,e("./dom")),B=(Object.defineProperty(t,"load",{enumerable:!0,get:function(){return L.load}}),Object.defineProperty(t,"loadAll",{enumerable:!0,get:function(){return L.loadAll}}),e("./events/IonEvent")),V=(Object.defineProperty(t,"IonEventType",{enumerable:!0,get:function(){return B.IonEventType}}),Object.defineProperty(t,"IonEventFactory",{enumerable:!0,get:function(){return B.IonEventFactory}}),e("./events/IonEventStream")),M=(Object.defineProperty(t,"IonEventStream",{enumerable:!0,get:function(){return V.IonEventStream}}),e("./events/EventStreamError")),U=(Object.defineProperty(t,"EventStreamError",{enumerable:!0,get:function(){return M.EventStreamError}}),e("./ComparisonResult"));Object.defineProperty(t,"ComparisonResult",{enumerable:!0,get:function(){return U.ComparisonResult}}),Object.defineProperty(t,"ComparisonResultType",{enumerable:!0,get:function(){return U.ComparisonResultType}})},{"./ComparisonResult":3,"./IntSize":4,"./IonBinaryReader":7,"./IonBinaryWriter":8,"./IonCatalog":9,"./IonConstants":10,"./IonDecimal":11,"./IonLocalSymbolTable":13,"./IonPrettyTextWriter":17,"./IonSharedSymbolTable":18,"./IonSpan":19,"./IonText":24,"./IonTextReader":25,"./IonTextWriter":26,"./IonTimestamp":27,"./IonType":28,"./IonTypes":29,"./IonUnicode":30,"./IonWriteable":31,"./dom":51,"./events/EventStreamError":52,"./events/IonEvent":53,"./events/IonEventStream":54}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TB_ANNOTATION=n.TB_STRUCT=n.TB_SEXP=n.TB_LIST=n.TB_BLOB=n.TB_CLOB=n.TB_STRING=n.TB_SYMBOL=n.TB_TIMESTAMP=n.TB_DECIMAL=n.TB_FLOAT=n.TB_NEG_INT=n.TB_INT=n.TB_BOOL=n.TB_NULL=n.LEN_NULL=n.LEN_VAR=n.LEN_MASK=n.BYTE_SHIFT=n.TYPE_SHIFT=n.BYTE_MASK=n.NIBBLE_MASK=void 0,n.NIBBLE_MASK=15,n.BYTE_MASK=255,n.TYPE_SHIFT=4,n.BYTE_SHIFT=8,n.LEN_MASK=15,n.LEN_VAR=14,n.LEN_NULL=15,n.TB_NULL=0,n.TB_BOOL=1,n.TB_INT=2,n.TB_NEG_INT=3,n.TB_FLOAT=4,n.TB_DECIMAL=5,n.TB_TIMESTAMP=6,n.TB_SYMBOL=7,n.TB_STRING=8,n.TB_CLOB=9,n.TB_BLOB=10,n.TB_LIST=11,n.TB_SEXP=12,n.TB_STRUCT=13,n.TB_ANNOTATION=14},{}],7:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),r=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(n,"__esModule",{value:!0}),n.BinaryReader=void 0,r(e("./IntSize"))),o=e("./IonCatalog"),l=e("./IonConstants"),u=e("./IonLocalSymbolTable"),c=e("./IonParserBinaryRaw"),h=e("./IonSymbols"),f=e("./IonTypes"),p=e("./util");function _(e){switch(e){case 0:return f.IonTypes.NULL;case 1:return f.IonTypes.BOOL;case 2:case 3:return f.IonTypes.INT;case 4:return f.IonTypes.FLOAT;case 5:return f.IonTypes.DECIMAL;case 6:return f.IonTypes.TIMESTAMP;case 7:return f.IonTypes.SYMBOL;case 8:return f.IonTypes.STRING;case 9:return f.IonTypes.CLOB;case 10:return f.IonTypes.BLOB;case 11:return f.IonTypes.LIST;case 12:return f.IonTypes.SEXP;case 13:return f.IonTypes.STRUCT;default:return null}}r=function(){function n(e,t){(0,i.default)(this,n),this._annotations=null,this._parser=new c.ParserBinaryRaw(e),this._cat=t||new o.Catalog,this._symtab=u.defaultLocalSymbolTable(),this._raw_type=-2}return(0,a.default)(n,[{key:"position",value:function(){return this._parser.source().position()}},{key:"next",value:function(){if(this._annotations=null,-1===this._raw_type)return null;for(this._raw_type=this._parser.next();0===this.depth();this._raw_type=this._parser.next())if(7===this._raw_type){if(this._parser._getSid()!==l.IVM.sid)break;this._symtab=u.defaultLocalSymbolTable()}else{if(13!==this._raw_type)break;if(!this._parser.hasAnnotations())break;if(this._parser.getAnnotation(0)!==h.ion_symbol_table_sid)break;this._symtab=h.makeSymbolTable(this._cat,this,this._symtab)}return _(this._raw_type)}},{key:"stepIn",value:function(){if(!_(this._raw_type).isContainer)throw new Error("Can't step in to a scalar value");this._parser.stepIn(),this._raw_type=-2}},{key:"stepOut",value:function(){this._parser.stepOut(),this._raw_type=-2}},{key:"type",value:function(){return _(this._raw_type)}},{key:"depth",value:function(){return this._parser.depth()}},{key:"fieldName",value:function(){return this.getSymbolString(this._parser.getFieldId())}},{key:"hasAnnotations",value:function(){return this._parser.hasAnnotations()}},{key:"annotations",value:function(){return this._loadAnnotations(),null!==this._annotations?this._annotations:[]}},{key:"getAnnotation",value:function(e){return this._loadAnnotations(),this._annotations[e]}},{key:"isNull",value:function(){return 0===this._raw_type||this._parser.isNull()}},{key:"uInt8ArrayValue",value:function(){return this._parser.uInt8ArrayValue()}},{key:"booleanValue",value:function(){return this._parser.booleanValue()}},{key:"decimalValue",value:function(){return this._parser.decimalValue()}},{key:"bigIntValue",value:function(){return this._parser.bigIntValue()}},{key:"intSize",value:function(){return p.isSafeInteger(this.bigIntValue())?s.default.Number:s.default.BigInt}},{key:"numberValue",value:function(){return this._parser.numberValue()}},{key:"stringValue",value:function(){var e=this._parser;switch(_(this._raw_type)){case f.IonTypes.NULL:return null;case f.IonTypes.STRING:return this.isNull()?null:e.stringValue();case f.IonTypes.SYMBOL:if(this.isNull())return null;var t=e._getSid();if(null!==t)return this.getSymbolString(t)}throw new Error("Current value is not a string or symbol.")}},{key:"timestampValue",value:function(){return this._parser.timestampValue()}},{key:"value",value:function(){var e=this.type();if(e&&e.isContainer){if(this.isNull())return null;throw new Error("Unable to provide a value for "+e.name+" containers.")}switch(e){case f.IonTypes.NULL:return null;case f.IonTypes.BLOB:case f.IonTypes.CLOB:return this.uInt8ArrayValue();case f.IonTypes.BOOL:return this.booleanValue();case f.IonTypes.DECIMAL:return this.decimalValue();case f.IonTypes.INT:return this.bigIntValue();case f.IonTypes.FLOAT:return this.numberValue();case f.IonTypes.STRING:case f.IonTypes.SYMBOL:return this.stringValue();case f.IonTypes.TIMESTAMP:return this.timestampValue();default:throw new Error("There is no current value.")}}},{key:"_loadAnnotations",value:function(){var t=this;null===this._annotations&&(this._annotations=[],this._parser.getAnnotations().forEach(function(e){t._annotations.push(t.getSymbolString(e))}))}},{key:"getSymbolString",value:function(e){var t=null;if(null===e)return null;if(0<e){if(void 0===(t=this._symtab.getSymbolText(e)))throw new Error("symbol is unresolvable")}else{if(0===e)throw new Error("Symbol ID zero is unsupported");if(e<0)throw new Error("Negative symbol ID: "+e+" is illegal.")}return t}}]),n}();n.BinaryReader=r},{"./IntSize":4,"./IonCatalog":9,"./IonConstants":10,"./IonLocalSymbolTable":13,"./IonParserBinaryRaw":15,"./IonSymbols":22,"./IonTypes":29,"./util":55,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],8:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=r(e("@babel/runtime/helpers/get")),o=r(e("@babel/runtime/helpers/classCallCheck")),l=r(e("@babel/runtime/helpers/createClass")),u=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(e,t){var n,r,i,a,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return r=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==s.return||s.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?f(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.NullNode=n.LeafNode=n.AbstractNode=n.BinaryWriter=void 0;var a,_,r=e("./AbstractWriter"),d=e("./BigIntSerde"),y=e("./IonLowLevelBinaryWriter"),b=e("./IonTimestamp"),m=e("./IonTypes"),v=e("./IonUnicode"),T=e("./IonWriteable"),g=e("./util"),w=new Uint8Array,e=((e=a=a||{})[e.VALUE=0]="VALUE",e[e.STRUCT_FIELD=1]="STRUCT_FIELD",e[e.STRUCT_VALUE=2]="STRUCT_VALUE",e[e.CLOSED=3]="CLOSED",(e=_=_||{})[e.NULL=0]="NULL",e[e.BOOL=1]="BOOL",e[e.POSITIVE_INT=2]="POSITIVE_INT",e[e.NEGATIVE_INT=3]="NEGATIVE_INT",e[e.FLOAT=4]="FLOAT",e[e.DECIMAL=5]="DECIMAL",e[e.TIMESTAMP=6]="TIMESTAMP",e[e.SYMBOL=7]="SYMBOL",e[e.STRING=8]="STRING",e[e.CLOB=9]="CLOB",e[e.BLOB=10]="BLOB",e[e.LIST=11]="LIST",e[e.SEXP=12]="SEXP",e[e.STRUCT=13]="STRUCT",e[e.ANNOTATION=14]="ANNOTATION",function(e){(0,u.default)(i,e);var r=p(i);function i(e,t){var n;return(0,o.default)(this,i),(n=r.call(this)).datagram=[],n.containers=[],n.state=a.VALUE,n.symbolTable=e,n.writer=new y.LowLevelBinaryWriter(t),n}return(0,l.default)(i,[{key:"getBytes",value:function(){return this.writer.getBytes()}},{key:"writeBlob",value:function(e){g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.BLOB):this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.BLOB,this.encodeAnnotations(this._annotations),e))}},{key:"writeBoolean",value:function(e){g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.BOOL):this.addNode(new O(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations),e))}},{key:"writeClob",value:function(e){g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.CLOB):this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.CLOB,this.encodeAnnotations(this._annotations),e))}},{key:"writeDecimal",value:function(e){var t,n,r;g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.DECIMAL):(t=e.getExponent(),0n===(r=e.getCoefficient())&&!e.isNegative()&&0===t&&1===g._sign(t)?this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.DECIMAL,this.encodeAnnotations(this._annotations),new Uint8Array(0))):(r=(n=(e=e.isNegative())||0n!==r)?d.BigIntSerde.toSignedIntBytes(r,e):w,e=y.LowLevelBinaryWriter.getVariableLengthSignedIntSize(t)+(n?r.length:0),(e=new y.LowLevelBinaryWriter(new T.Writeable(e))).writeVariableLengthSignedInt(t),n&&e.writeBytes(r),this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.DECIMAL,this.encodeAnnotations(this._annotations),e.getBytes()))))}},{key:"writeFloat32",value:function(e){var t;g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.FLOAT):(e=Object.is(e,0)?new Uint8Array(0):(t=new ArrayBuffer(4),new DataView(t).setFloat32(0,e,!1),new Uint8Array(t)),this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.FLOAT,this.encodeAnnotations(this._annotations),e)))}},{key:"writeFloat64",value:function(e){var t;g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.FLOAT):(e=Object.is(e,0)?new Uint8Array(0):(t=new ArrayBuffer(8),new DataView(t).setFloat64(0,e,!1),new Uint8Array(t)),this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.FLOAT,this.encodeAnnotations(this._annotations),e)))}},{key:"writeInt",value:function(e){g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.INT):this.addNode(new A(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations),e))}},{key:"writeNull",value:function(e){null==e&&(e=m.IonTypes.NULL),this.checkWriteValue(),this.addNode(new R(this.writer,this.getCurrentContainer(),e,this.encodeAnnotations(this._annotations)))}},{key:"writeString",value:function(e){g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.STRING):this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.STRING,this.encodeAnnotations(this._annotations),v.encodeUtf8(e)))}},{key:"writeSymbol",value:function(e){var t;g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.SYMBOL):(e=this.symbolTable.addSymbol(e),(t=new y.LowLevelBinaryWriter(new T.Writeable(y.LowLevelBinaryWriter.getUnsignedIntSize(e)))).writeUnsignedInt(e),this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.SYMBOL,this.encodeAnnotations(this._annotations),t.getBytes())))}},{key:"writeTimestamp",value:function(e){var t,n;g._assertDefined(e),this.checkWriteValue(),null===e?this.writeNull(m.IonTypes.TIMESTAMP):((t=new y.LowLevelBinaryWriter(new T.Writeable(12))).writeVariableLengthSignedInt(e.getLocalOffset()),n=e.getDate(),t.writeVariableLengthUnsignedInt(n.getUTCFullYear()),e.getPrecision()>=b.TimestampPrecision.MONTH&&t.writeVariableLengthUnsignedInt(n.getUTCMonth()+1),e.getPrecision()>=b.TimestampPrecision.DAY&&t.writeVariableLengthUnsignedInt(n.getUTCDate()),e.getPrecision()>=b.TimestampPrecision.HOUR_AND_MINUTE&&(t.writeVariableLengthUnsignedInt(n.getUTCHours()),t.writeVariableLengthUnsignedInt(n.getUTCMinutes())),e.getPrecision()>=b.TimestampPrecision.SECONDS&&(t.writeVariableLengthUnsignedInt(e.getSecondsInt()),0!==(n=e._getFractionalSeconds()).getExponent())&&(t.writeVariableLengthSignedInt(n.getExponent()),0n!==n.getCoefficient())&&t.writeBytes(d.BigIntSerde.toSignedIntBytes(n.getCoefficient(),n.isNegative())),this.addNode(new N(this.writer,this.getCurrentContainer(),m.IonTypes.TIMESTAMP,this.encodeAnnotations(this._annotations),t.getBytes())))}},{key:"stepIn",value:function(e){switch(this.checkWriteValue(),e){case m.IonTypes.LIST:case m.IonTypes.SEXP:this.addNode(new S(this.writer,this.getCurrentContainer(),e,this.encodeAnnotations(this._annotations)));break;case m.IonTypes.STRUCT:this.addNode(new E(this.writer,this.getCurrentContainer(),this.encodeAnnotations(this._annotations))),this.state=a.STRUCT_FIELD;break;default:throw new Error("Unrecognized container type")}}},{key:"stepOut",value:function(){if(0===this.depth())throw new Error("Not currently in a container");if(this.state===a.STRUCT_VALUE)throw new Error("Cannot exit a struct with a partially written field");this.containers.pop(),0<this.depth()?this.state=this.getCurrentContainer()instanceof E?a.STRUCT_FIELD:a.VALUE:this.state=a.VALUE}},{key:"_isInStruct",value:function(){return this.getCurrentContainer()instanceof E}},{key:"writeFieldName",value:function(e){if(g._assertDefined(e),this.state!==a.STRUCT_FIELD)throw new Error("Cannot write a field name outside of a struct");this.fieldName=this.encodeAnnotations([e]),this.state=a.STRUCT_VALUE}},{key:"depth",value:function(){return this.containers.length}},{key:"close",value:function(){if(this.checkClosed(),0<this.depth())throw new Error("Writer has one or more open containers; call stepOut() for each container prior to close()");this.writeIvm();var e,t=this.datagram,n=(this.datagram=[],this.writeSymbolTable(),h(t));try{for(n.s();!(e=n.n()).done;)e.value.write()}catch(e){n.e(e)}finally{n.f()}this.state=a.CLOSED}},{key:"writeIvm",value:function(){this.writer.writeByte(224),this.writer.writeByte(1),this.writer.writeByte(0),this.writer.writeByte(234)}},{key:"encodeAnnotations",value:function(e){if(0===e.length)return new Uint8Array(0);var t,n=new T.Writeable,r=new y.LowLevelBinaryWriter(n),i=h(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=this.symbolTable.addSymbol(a);r.writeVariableLengthUnsignedInt(s)}}catch(e){i.e(e)}finally{i.f()}return this._clearAnnotations(),n.getBytes()}},{key:"getCurrentContainer",value:function(){return this.containers[this.containers.length-1]}},{key:"addNode",value:function(e){0===this.depth()?this.datagram.push(e):this.state===a.STRUCT_VALUE?(this.getCurrentContainer().addChild(e,this.fieldName),this.state=a.STRUCT_FIELD):this.getCurrentContainer().addChild(e),e.isContainer()&&(this.containers.push(e),this.state=a.VALUE)}},{key:"checkWriteValue",value:function(){if(this.checkClosed(),this.state===a.STRUCT_FIELD)throw new Error("Expected a struct field name instead of a value, call writeFieldName(string) with the desired name before calling stepIn(IonType) or writeIonType()")}},{key:"checkClosed",value:function(){if(this.state===a.CLOSED)throw new Error("Writer is closed, no further operations are available")}},{key:"writeSymbolTable",value:function(){var e="$ion"!=this.symbolTable.import.symbolTable.name,t=0<this.symbolTable.symbols.length;if(e||t){if(this.setAnnotations(["$ion_symbol_table"]),this.stepIn(m.IonTypes.STRUCT),e&&(this.writeFieldName("imports"),this.stepIn(m.IonTypes.LIST),this.writeImport(this.symbolTable.import),this.stepOut()),t){this.writeFieldName("symbols"),this.stepIn(m.IonTypes.LIST);var n,r=h(this.symbolTable.symbols);try{for(r.s();!(n=r.n()).done;){var i=n.value;void 0!==i&&this.writeString(i)}}catch(e){r.e(e)}finally{r.f()}this.stepOut()}this.stepOut(),this.datagram[0].write()}}},{key:"writeImport",value:function(e){e&&(this.writeImport(e.parent),this.stepIn(m.IonTypes.STRUCT),this.writeFieldName("name"),this.writeString(e.symbolTable.name),this.writeFieldName("version"),this.writeInt(e.symbolTable.version),this.writeFieldName("max_id"),this.writeInt(e.length),this.stepOut())}}]),i}(r.AbstractWriter)),I=(n.BinaryWriter=e,function(){function i(e,t,n,r){(0,o.default)(this,i),this._writer=e,this.parent=t,this._type=n,this.annotations=r}return(0,l.default)(i,[{key:"typeCode",get:function(){return this._type.binaryTypeId}},{key:"writer",get:function(){return this._writer}},{key:"writeTypeDescriptorAndLength",value:function(e,t,n){e<<=4;t?this.writer.writeByte(e|=15):n<14?this.writer.writeByte(e|=n):(this.writer.writeByte(e|=14),this.writer.writeVariableLengthUnsignedInt(n))}},{key:"getContainedValueLength",value:function(){var e=this.getValueLength();return 1+i.getLengthLength(e)+e}},{key:"getAnnotatedContainerLength",value:function(){var e=this.annotations.length;return e+y.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e)+this.getContainedValueLength()}},{key:"getAnnotationsLength",value:function(){var e,t,n;return this.hasAnnotations()?(e=this.annotations.length,t=y.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e),n=this.getContainedValueLength(),1+i.getLengthLength(n+e+t)+t+e):0}},{key:"getLength",value:function(){return this.getAnnotationsLength()+this.getContainedValueLength()}},{key:"writeAnnotations",value:function(){var e;this.hasAnnotations()&&(e=this.getAnnotatedContainerLength(),this.writeTypeDescriptorAndLength(_.ANNOTATION,!1,e),this.writer.writeVariableLengthUnsignedInt(this.annotations.length),this.writer.writeBytes(new Uint8Array(this.annotations)))}},{key:"hasAnnotations",value:function(){return 0<this.annotations.length}}],[{key:"getLengthLength",value:function(e){return e<14?0:y.LowLevelBinaryWriter.getVariableLengthUnsignedIntSize(e)}}]),i}()),C=(n.AbstractNode=I,function(){(0,u.default)(a,I);var i=p(a);function a(e,t,n,r){return(0,o.default)(this,a),i.call(this,e,t,n,r)}return(0,l.default)(a,[{key:"isContainer",value:function(){return!0}}]),a}()),S=function(){(0,u.default)(a,C);var i=p(a);function a(e,t,n,r){return(0,o.default)(this,a),(e=i.call(this,e,t,n,r)).children=[],e}return(0,l.default)(a,[{key:"addChild",value:function(e,t){this.children.push(e)}},{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.getValueLength());var e,t=h(this.children);try{for(t.s();!(e=t.n()).done;)e.value.write()}catch(e){t.e(e)}finally{t.f()}}},{key:"getValueLength",value:function(){var e,t=0,n=h(this.children);try{for(n.s();!(e=n.n()).done;)t+=e.value.getLength()}catch(e){n.e(e)}finally{n.f()}return t}},{key:"getLength",value:function(){return void 0===this.length&&(this.length=(0,s.default)((0,c.default)(a.prototype),"getLength",this).call(this)),this.length}}]),a}(),E=function(){(0,u.default)(i,C);var r=p(i);function i(e,t,n){return(0,o.default)(this,i),(e=r.call(this,e,t,m.IonTypes.STRUCT,n)).fields=[],e}return(0,l.default)(i,[{key:"addChild",value:function(e,t){if(null==t)throw new Error("Cannot add a value to a struct without a field name");this.fields.push({name:t,value:e})}},{key:"getValueLength",value:function(){var e,t=0,n=h(this.fields);try{for(n.s();!(e=n.n()).done;)var r=e.value,t=(t+=r.name.length)+r.value.getLength()}catch(e){n.e(e)}finally{n.f()}return t}},{key:"getLength",value:function(){return void 0===this.length&&(this.length=(0,s.default)((0,c.default)(i.prototype),"getLength",this).call(this)),this.length}},{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.getValueLength());var e,t=h(this.fields);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.writer.writeBytes(new Uint8Array(n.name)),n.value.write()}}catch(e){t.e(e)}finally{t.f()}}}]),i}(),k=function(){(0,u.default)(t,I);var e=p(t);function t(){return(0,o.default)(this,t),e.apply(this,arguments)}return(0,l.default)(t,[{key:"addChild",value:function(e,t){throw new Error("Cannot add a child to a leaf node")}},{key:"isContainer",value:function(){return!1}}]),t}(),O=(n.LeafNode=k,function(){(0,u.default)(a,k);var i=p(a);function a(e,t,n,r){return(0,o.default)(this,a),(e=i.call(this,e,t,m.IonTypes.BOOL,n)).value=r,e}return(0,l.default)(a,[{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.value?1:0)}},{key:"getValueLength",value:function(){return 0}}]),a}()),A=function(){(0,u.default)(a,k);var i=p(a);function a(e,t,n,r){if((0,o.default)(this,a),(e=i.call(this,e,t,m.IonTypes.INT,n)).value=r,"number"!=typeof e.value&&"bigint"!=typeof e.value)throw new Error("Expected "+e.value+" to be a number or bigint");return 0n<e.value?(e.intTypeCode=_.POSITIVE_INT,(t=new y.LowLevelBinaryWriter(new T.Writeable(y.LowLevelBinaryWriter.getUnsignedIntSize(e.value)))).writeUnsignedInt(e.value),e.bytes=t.getBytes()):e.value<0n?(e.intTypeCode=_.NEGATIVE_INT,n="bigint"==typeof r?r<0n?-r:r:Math.abs(r),(t=new y.LowLevelBinaryWriter(new T.Writeable(y.LowLevelBinaryWriter.getUnsignedIntSize(n)))).writeUnsignedInt(n),e.bytes=t.getBytes()):(e.intTypeCode=_.POSITIVE_INT,e.bytes=new Uint8Array(0)),e}return(0,l.default)(a,[{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.intTypeCode,!1,this.bytes.length),this.writer.writeBytes(this.bytes)}},{key:"getValueLength",value:function(){return this.bytes.length}}]),a}(),N=function(){(0,u.default)(s,k);var a=p(s);function s(e,t,n,r,i){return(0,o.default)(this,s),(e=a.call(this,e,t,n,r)).value=i,e}return(0,l.default)(s,[{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!1,this.value.length),this.writer.writeBytes(this.value)}},{key:"getValueLength",value:function(){return this.value.length}}]),s}(),R=function(){(0,u.default)(a,k);var i=p(a);function a(e,t,n,r){return(0,o.default)(this,a),i.call(this,e,t,n,r)}return(0,l.default)(a,[{key:"write",value:function(){this.writeAnnotations(),this.writeTypeDescriptorAndLength(this.typeCode,!0,0)}},{key:"getValueLength",value:function(){return 0}}]),a}();n.NullNode=R},{"./AbstractWriter":1,"./BigIntSerde":2,"./IonLowLevelBinaryWriter":14,"./IonTimestamp":27,"./IonTypes":29,"./IonUnicode":30,"./IonWriteable":31,"./util":55,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/get":65,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],9:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.Catalog=void 0,e("./IonSystemSymbolTable"));n.Catalog=function(){function e(){(0,i.default)(this,e),this.symbolTables={},this.add(s.getSystemSymbolTable())}return(0,a.default)(e,[{key:"add",value:function(e){if(void 0===e.name||null===e.name)throw new Error("SymbolTable name must be defined.");void 0===this.symbolTables[e.name]&&(this.symbolTables[e.name]=[]),this.symbolTables[e.name][e.version]=e}},{key:"getVersion",value:function(e,t){e=this.symbolTables[e];return e&&(e[t]||e[e.length])||null}},{key:"getTable",value:function(e){e=this.symbolTables[e];return void 0===e?null:e[e.length-1]}}]),e}()},{"./IonSystemSymbolTable":23,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IVM=n.EOF=void 0,n.EOF=-1,n.IVM={text:"$ion_1_0",binary:new Uint8Array([224,1,0,234]),sid:2}},{}],11:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/slicedToArray")),i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),l=(Object.defineProperty(n,"__esModule",{value:!0}),n.Decimal=void 0,e("./util")),r=function(){function a(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if((0,i.default)(this,a),"string"==typeof e)return a.parse(e);if(!l._hasValue(t))throw new Error("Decimal's constructor was called with a numeric coefficient but no exponent.");if("number"==typeof e)return a._fromNumberCoefficient(e,t);if("bigint"==typeof e)return l._hasValue(n)?n!=e<0n&&(e*=-1n):n=e<0n,a._fromBigIntCoefficient(n,e,t);throw new Error("Unsupported parameter set (".concat(e,", ").concat(t,", ").concat(n," passed to Decimal constructor."))}return(0,s.default)(a,[{key:"isNegative",value:function(){return this._isNegative}},{key:"numberValue",value:function(){return this._isNegativeZero()?-0:Number(this._coefficient)*Math.pow(10,this._exponent)}},{key:"intValue",value:function(){return Math.trunc(this.numberValue())}},{key:"toString",value:function(){var e=this._coefficient.toString(),t=(e="-"===e[0]?e.substring(1,e.length):e).length,n=this._exponent+(t-1),r="";return this._exponent<=0&&-6<=n?0===this._exponent?r+=e:e.length<=-this._exponent?r+=(e="0".repeat(-this._exponent-e.length+1)+e).substring(0,1)+"."+e.substring(1):r+=e.substring(0,t+this._exponent)+"."+e.substring(t+this._exponent):(r+=e[0],1<e.length&&(r+="."+e.substring(1)),r+="E"+(0<n?"+":"")+n),(this.isNegative()?"-":"")+r}},{key:"toJSON",value:function(){return this.numberValue()}},{key:"getCoefficient",value:function(){return this._coefficient}},{key:"getExponent",value:function(){return this._exponent}},{key:"equals",value:function(e){return this.getExponent()===e.getExponent()&&l._sign(this.getExponent())===l._sign(e.getExponent())&&this.isNegative()===e.isNegative()&&this.getCoefficient()===e.getCoefficient()}},{key:"compareTo",value:function(e){if(0n===this._coefficient&&0n===e._coefficient)return 0;var t=this.isNegative();if(t!==e.isNegative())return t?-1:1;var n=this._compareToParams(),n=(0,o.default)(n,3),r=n[0],i=n[1],n=n[2],e=e._compareToParams(),e=(0,o.default)(e,3),a=e[0],s=e[1],e=e[2];if(e<n)return t?-1:1;if(n<e)return t?1:-1;r.length<a.length?r+="0".repeat(s-i):r.length>a.length&&(a+="0".repeat(i-s));n=BigInt(r),e=BigInt(a);return e<n?t?-1:1:n<e?t?1:-1:0}},{key:"_initialize",value:function(e,t,n){this._isNegative=e,this._coefficient=t,Object.is(-0,n)&&(n=0),this._exponent=n}},{key:"_isNegativeZero",value:function(){return this.isNegative()&&0n==this._coefficient}},{key:"_compareToParams",value:function(){var e=this.isNegative()?this._coefficient.toString().substring(1):this._coefficient.toString(),t=e.length,n=t+this._exponent;return n<=0&&--n,[e,t,n=0n===this._coefficient?-1/0:n]}}],[{key:"_fromNumberCoefficient",value:function(e,t){var n;if(Number.isInteger(e))return n=e<0||Object.is(e,-0),this._fromBigIntCoefficient(n,BigInt(e),t);throw new Error("The provided coefficient was not an integer. ("+e+")")}},{key:"_fromBigIntCoefficient",value:function(e,t,n){var r=Object.create(this.prototype);return r._initialize(e,t,n),r}},{key:"parse",value:function(e){var t,n,r,i=0;return"null"===e||"null.decimal"===e?null:(n=e.match("[d|D]"),t=e.length,null!=n&&(i=Number(e.substring(n.index+1,e.length)),t=n.index),n=(r=e.match("\\."))?(i-=n?n.index-1-r.index:e.length-1-r.index,e.substring(0,r.index)+e.substring(r.index+1,t)):e.substring(0,t),e=(r=BigInt(n))<0n||n.startsWith("-0"),a._fromBigIntCoefficient(e,r,i))}}]),a}();(n.Decimal=r).ZERO=new r(0,0),r.ONE=new r(1,0)},{"./util":55,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/slicedToArray":77}],12:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),r=(Object.defineProperty(n,"__esModule",{value:!0}),n.Import=void 0,function(){function r(e,t,n){(0,i.default)(this,r),this._parent=e,this._symbolTable=t,this._offset=this.parent?this.parent.offset+this.parent.length:1,this._length=n||this.symbolTable.numberOfSymbols}return(0,a.default)(r,[{key:"parent",get:function(){return this._parent}},{key:"offset",get:function(){return this._offset}},{key:"length",get:function(){return this._length}},{key:"symbolTable",get:function(){return this._symbolTable}},{key:"getSymbolText",value:function(e){if(void 0===this.parent)throw new Error("Illegal parent state.");if(null!==this.parent){var t=this.parent.getSymbolText(e);if(t)return t}t=e-this.offset;if(0<=t&&t<this.length)return this.symbolTable.getSymbolText(t)}},{key:"getSymbolId",value:function(e){var t;return null!==this.parent&&(t=this.parent.getSymbolId(e))?t:null!=(t=this.symbolTable.getSymbolId(e))&&t<this.length?t+this.offset:void 0}}]),r}());n.Import=r},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],13:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass"));function o(e,t){var n,r,i,a,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return r=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==s.return||s.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?l(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.defaultLocalSymbolTable=n.LocalSymbolTable=void 0;var u=e("./IonSystemSymbolTable"),a=function(){function a(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=((0,s.default)(this,a),this.index=Object.create(null),this._symbols=[],this._import=null===e?u.getSystemSymbolTableImport():e,this.offset=this._import.offset+this._import.length,o(n));try{for(r.s();!(t=r.n()).done;){var i=t.value;this.assignSymbolId(i)}}catch(e){r.e(e)}finally{r.f()}}return(0,i.default)(a,[{key:"symbols",get:function(){return this._symbols}},{key:"maxId",get:function(){return this.offset+this._symbols.length-1}},{key:"import",get:function(){return this._import}},{key:"getSymbolId",value:function(e){return this._import.getSymbolId(e)||this.index[e]}},{key:"addSymbol",value:function(e){if(null!==e){var t=this.getSymbolId(e);if(void 0!==t)return t}t=this.offset+this.symbols.length;return this.symbols.push(e),null!==e&&(this.index[e]=t),t}},{key:"assignSymbolId",value:function(e){var t=this.offset+this.symbols.length;return this.symbols.push(e),null!==e&&void 0===this.getSymbolId(e)&&(this.index[e]=t),t}},{key:"getSymbolText",value:function(e){if(e>this.maxId)throw new Error("Symbol $"+e.toString()+" greater than maxID.");var t=this.import.getSymbolText(e);return void 0!==t?t:(t=e-this.offset,this.symbols[t])}},{key:"numberOfSymbols",value:function(){return this._symbols.length}}]),a}();n.LocalSymbolTable=a,n.defaultLocalSymbolTable=function(){return new a(u.getSystemSymbolTableImport())}},{"./IonSystemSymbolTable":23,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],14:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.LowLevelBinaryWriter=void 0,e("./BigIntSerde")),r=function(){function a(e){(0,i.default)(this,a),this.writeable=e}return(0,s.default)(a,[{key:"writeSignedInt",value:function(e){for(var t=a.getSignedIntSize(e),n=Math.abs(e),r=new Uint8Array(t),i=r.length;128<=n;)r[--i]=255&n,n>>>=8;r[--i]=255&n,1/e<0&&(r[0]|=128),this.writeable.writeBytes(r)}},{key:"writeUnsignedInt",value:function(e){if("bigint"==typeof e)t=o.BigIntSerde.toUnsignedIntBytes(e),this.writeable.writeBytes(t);else{for(var t=a.getUnsignedIntSize(e),n=new Uint8Array(t),r=e,i=n.length;0<r;)n[--i]=r%256,r=Math.trunc(r/256);this.writeable.writeBytes(n)}}},{key:"writeVariableLengthSignedInt",value:function(e){for(var t=new Uint8Array(a.getVariableLengthSignedIntSize(e)),n=Math.abs(e),r=t.length-1;64<=n;)t[r--]=127&n,n>>>=7;t[r]=n,1/e<0&&(t[r]|=64),t[t.length-1]|=128,this.writeable.writeBytes(t)}},{key:"writeVariableLengthUnsignedInt",value:function(e){var t=new Uint8Array(a.getVariableLengthUnsignedIntSize(e)),n=e,r=t.length;for(t[--r]=127&n|128,n>>>=7;0<n;)t[--r]=127&n,n>>>=7;this.writeable.writeBytes(t)}},{key:"writeByte",value:function(e){this.writeable.writeByte(e)}},{key:"writeBytes",value:function(e){this.writeable.writeBytes(e)}},{key:"getBytes",value:function(){return this.writeable.getBytes()}}],[{key:"getSignedIntSize",value:function(e){return 0===e?1:(e=Math.abs(e),e=Math.ceil(Math.log2(e+1)),Math.ceil((e+1)/8))}},{key:"getUnsignedIntSize",value:function(e){return"bigint"==typeof e?o.BigIntSerde.getUnsignedIntSizeInBytes(e):0===e?1:(e=Math.floor(Math.log2(e))+1,Math.ceil(e/8))}},{key:"getVariableLengthSignedIntSize",value:function(e){var t,e=Math.abs(e);return 0===e?1:(e=Math.floor(Math.log2(e))+1,t=Math.floor(e/7),Math.ceil((e+t+1+1)/8))}},{key:"getVariableLengthUnsignedIntSize",value:function(e){var t;return 0===e?1:(e=Math.floor(Math.log2(e))+1,t=Math.ceil(e/7),Math.ceil((e+t)/8))}}]),a}();n.LowLevelBinaryWriter=r},{"./BigIntSerde":2,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],15:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),_=r(e("@babel/runtime/helpers/slicedToArray")),i=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/classCallCheck")),s=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},o=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&s(t,e,n);return o(t,e),t},l=function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(n,"__esModule",{value:!0}),n.ParserBinaryRaw=void 0,e("./BigIntSerde")),c=r(e("./IonBinary")),r=e("./IonConstants"),d=e("./IonDecimal"),y=e("./IonTimestamp"),h=e("./IonTypes"),f=e("./IonUnicode"),b=l(e("./SignAndMagnitudeInt"));function m(e){return e>>c.TYPE_SHIFT&c.NIBBLE_MASK}var v=[],T=r.IVM.sid,g=(r.IVM.binary[0],r.IVM.binary[1]),w=r.IVM.binary[2],I=r.IVM.binary[3],C=(0,i.default)(function e(t,n){(0,a.default)(this,e),this.type=t,this.length=n}),l=function(){function p(e){(0,a.default)(this,p),this._raw_type=-1,this._len=-1,this._curr=void 0,this._null=!1,this._fid=null,this._as=-1,this._ae=-1,this._a=[],this._ts=[new C(20,0)],this._in_struct=!1,this._in=e}return(0,i.default)(p,[{key:"source",value:function(){return this._in}},{key:"next",value:function(){return void 0===this._curr&&0<this._len&&this._in.skip(this._len),this.clear_value(),this._in_struct&&(this._fid=this.readVarUnsignedInt()),this.load_next()}},{key:"stepIn",value:function(){var e,t=this;switch(t._raw_type){case c.TB_STRUCT:case c.TB_LIST:case c.TB_SEXP:break;default:throw new Error("you can only 'stepIn' to a container")}e=t._in.getRemaining()-t._len,e=new C(t._raw_type,e),t._ts.push(e),t._in_struct=t._raw_type===c.TB_STRUCT,t._in.setRemaining(t._len),t.clear_value()}},{key:"stepOut",value:function(){var e,t,n=this;if(n._ts.length<2)throw new Error("Cannot stepOut any further, already at top level");e=n._ts.pop().length,t=n._ts[n._ts.length-1].type,n._in_struct=t===c.TB_STRUCT,n.clear_value(),t=n._in.getRemaining(),n._in.skip(t),n._in.setRemaining(e)}},{key:"isNull",value:function(){return this._null}},{key:"depth",value:function(){return this._ts.length-1}},{key:"getFieldId",value:function(){return this._fid}},{key:"hasAnnotations",value:function(){return 0<=this._as}},{key:"getAnnotations",value:function(){return void 0!==this._a&&0!==this._a.length||this.load_annotation_values(),this._a}},{key:"getAnnotation",value:function(e){return void 0!==this._a&&0!==this._a.length||this.load_annotation_values(),this._a[e]}},{key:"ionType",value:function(){var e=this._raw_type;switch(e){case c.TB_NULL:return h.IonTypes.NULL;case c.TB_BOOL:return h.IonTypes.BOOL;case c.TB_INT:case c.TB_NEG_INT:return h.IonTypes.INT;case c.TB_FLOAT:return h.IonTypes.FLOAT;case c.TB_DECIMAL:return h.IonTypes.DECIMAL;case c.TB_TIMESTAMP:return h.IonTypes.TIMESTAMP;case c.TB_SYMBOL:return h.IonTypes.SYMBOL;case c.TB_STRING:return h.IonTypes.STRING;case c.TB_CLOB:return h.IonTypes.CLOB;case c.TB_BLOB:return h.IonTypes.BLOB;case c.TB_SEXP:return h.IonTypes.SEXP;case c.TB_LIST:return h.IonTypes.LIST;case c.TB_STRUCT:return h.IonTypes.STRUCT;default:throw new Error("Unrecognized type code "+e)}}},{key:"_getSid",value:function(){return this.load_value(),this._raw_type!=c.TB_SYMBOL||void 0===this._curr||null===this._curr?null:this._curr}},{key:"byteValue",value:function(){return this.uInt8ArrayValue()}},{key:"uInt8ArrayValue",value:function(){switch(this._raw_type){case c.TB_NULL:return null;case c.TB_CLOB:case c.TB_BLOB:return this.isNull()?null:(this.load_value(),this._curr);default:throw new Error("Current value is not a blob or clob.")}}},{key:"booleanValue",value:function(){switch(this._raw_type){case c.TB_NULL:return null;case c.TB_BOOL:return this.isNull()?null:this._curr}throw new Error("Current value is not a Boolean.")}},{key:"decimalValue",value:function(){switch(this._raw_type){case c.TB_NULL:return null;case c.TB_DECIMAL:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a decimal.")}},{key:"bigIntValue",value:function(){switch(this._raw_type){case c.TB_NULL:return null;case c.TB_INT:case c.TB_NEG_INT:var e;return this.isNull()?null:(this.load_value(),"bigint"!=typeof this._curr?(e=this._curr,BigInt(e)):this._curr);default:throw new Error("bigIntValue() was called when the current value was not an int.")}}},{key:"numberValue",value:function(){switch(this._raw_type){case c.TB_NULL:return null;case c.TB_INT:case c.TB_NEG_INT:var e;return this.isNull()?null:(this.load_value(),"bigint"==typeof this._curr?(e=this._curr,Number(e)):this._curr);case c.TB_FLOAT:return this.isNull()?null:(this.load_value(),this._curr);default:throw new Error("Current value is not a float or int.")}}},{key:"stringValue",value:function(){switch(this._raw_type){case c.TB_NULL:return null;case c.TB_STRING:case c.TB_SYMBOL:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a string or symbol.")}},{key:"timestampValue",value:function(){switch(this._raw_type){case c.TB_NULL:return null;case c.TB_TIMESTAMP:return this.isNull()?null:(this.load_value(),this._curr)}throw new Error("Current value is not a timestamp.")}},{key:"read_binary_float",value:function(){return p._readFloatFrom(this._in,this._len)}},{key:"readVarUnsignedInt",value:function(){return p._readVarUnsignedIntFrom(this._in)}},{key:"readVarSignedInt",value:function(){return p._readVarSignedIntFrom(this._in)}},{key:"readUnsignedIntAsBigInt",value:function(){return p._readUnsignedIntAsBigIntFrom(this._in,this._len)}},{key:"readUnsignedIntAsNumber",value:function(){return p._readUnsignedIntAsNumberFrom(this._in,this._len)}},{key:"read_decimal_value",value:function(){return p.readDecimalValueFrom(this._in,this._len)}},{key:"read_timestamp_value",value:function(){if(!(0<this._len))return null;var e,t,n,r=null,i=null,a=null,s=null,o=null,l=d.Decimal.ZERO,u=y.TimestampPrecision.YEAR,c=this._in.position()+this._len,h=this.readVarSignedInt();if(!(this._in.position()<c))throw new Error("Timestamps must include a year.");if(e=this.readVarUnsignedInt(),this._in.position()<c&&(r=this.readVarUnsignedInt(),u=y.TimestampPrecision.MONTH),this._in.position()<c&&(i=this.readVarUnsignedInt(),u=y.TimestampPrecision.DAY),this._in.position()<c){if(a=this.readVarUnsignedInt(),this._in.position()>=c)throw new Error("Timestamps with an hour must include a minute.");s=this.readVarUnsignedInt(),u=y.TimestampPrecision.HOUR_AND_MINUTE}this._in.position()<c&&(o=this.readVarUnsignedInt(),u=y.TimestampPrecision.SECONDS),this._in.position()<c&&(n=this.readVarSignedInt(),t=0n,f=!1,this._in.position()<c&&(f=(c=p._readSignedIntFrom(this._in,c-this._in.position()))._isNegative,t=c._magnitude),c=d.Decimal._fromBigIntCoefficient(f,t,n),f=y.Timestamp._splitSecondsDecimal(c),(t=(0,_.default)(f,2))[0],n=t[1],l=d.Decimal.parse(o+"."+n));var c=Date.UTC(e,r?r-1:0,i||1,a||0,s||0,o||0,0),c=y.Timestamp._adjustMsSinceEpochIfNeeded(e,c),f=new Date(c);return y.Timestamp._valueOf(f,h,l,u)}},{key:"read_string_value",value:function(){return f.decodeUtf8(this._in.chunk(this._len))}},{key:"clear_value",value:function(){this._raw_type=-1,this._curr=void 0,this._a=v,this._as=-1,this._null=!1,this._fid=null,this._len=-1}},{key:"load_length",value:function(e){var t=this;switch(t._len=e&c.NIBBLE_MASK,t._len){case 1:m(e)===c.TB_STRUCT&&(t._len=this.readVarUnsignedInt()),t._null=!1;break;case c.LEN_VAR:t._null=!1,t._len=this.readVarUnsignedInt();break;case c.LEN_NULL:t._null=!0,t._len=0;break;default:t._null=!1}}},{key:"load_next",value:function(){var e,t,n=this;if(n._as=-1,!n._in.is_empty()){switch(e=m(t=n._in.next()),n.load_length(t),e=e===c.TB_ANNOTATION?n._len<1&&0===n.depth()?n.load_ivm():n.load_annotations():e){case c.TB_NULL:n._null=!0;break;case c.TB_BOOL:0!==n._len&&1!==n._len||(n._curr=1===n._len,n._len=0)}return n._raw_type=e}n.clear_value()}},{key:"load_annotations",value:function(){var e,t=this,t=t._len<1&&0===t.depth()?t.load_ivm():(e=this.readVarUnsignedInt(),t._as=t._in.position(),t._in.skip(e),t._ae=t._in.position(),e=t._in.next(),t.load_length(e),m(e));return t}},{key:"load_ivm",value:function(){var e=this._in;if(e.next()!==g)throw new Error("invalid binary Ion at "+e.position());if(e.next()!==w)throw new Error("invalid binary Ion at "+e.position());if(e.next()!==I)throw new Error("invalid binary Ion at "+e.position());return this._curr=T,this._len=0,c.TB_SYMBOL}},{key:"load_annotation_values",value:function(){var e,t,n,r,i;if(!((n=this._as)<0)){for(i=[],r=this._ae,e=0;n<r;)if(t=this._in.valueAt(n),n++,e=e<<7|127&t,0!=(128&t)){if(0===e)throw new Error("Symbol ID zero is unsupported.");i.push(e),e=0}this._a=i}}},{key:"_readIntegerMagnitude",value:function(){return 0===this._len?0n:this._len<6?this.readUnsignedIntAsNumber():this.readUnsignedIntAsBigInt()}},{key:"load_value",value:function(){if(null==this._curr&&!this.isNull())switch(this._raw_type){case c.TB_BOOL:break;case c.TB_INT:this._curr=this._readIntegerMagnitude();break;case c.TB_NEG_INT:var e=this._readIntegerMagnitude();this._curr=-e;break;case c.TB_FLOAT:this._curr=this.read_binary_float();break;case c.TB_DECIMAL:0===this._len?this._curr=d.Decimal.ZERO:this._curr=this.read_decimal_value();break;case c.TB_TIMESTAMP:this._curr=this.read_timestamp_value();break;case c.TB_SYMBOL:this._curr=this.readUnsignedIntAsNumber();break;case c.TB_STRING:this._curr=this.read_string_value();break;case c.TB_CLOB:case c.TB_BLOB:this.isNull()||(this._curr=this._in.chunk(this._len));break;default:throw new Error("Unexpected type: "+this._raw_type)}}}],[{key:"_readFloatFrom",value:function(e,t){switch(t){case 0:return 0;case 4:return new DataView(e.chunk(4).buffer).getFloat32(0,!1);case 8:return new DataView(e.chunk(8).buffer).getFloat64(0,!1);case 15:return null;default:throw new Error("Illegal float length: "+t)}}},{key:"_readVarUnsignedIntFrom",value:function(e){for(var t,n=0,r=0;r=r<<7|127&(t=e.next()),n+=7,!(128&t););if(31<n)throw new Error("VarUInt values larger than 31 bits must be read using SignAndMagnitudeInt.");return r}},{key:"_readVarSignedIntFrom",value:function(e){for(var t,n=e.next(),r=64&n,i=128&n,a=(n&=63,6);!i;)i=128&(t=e.next()),n=n<<7|(t&=127),a+=7;if(32<a)throw new Error("VarInt values larger than 32 bits must be read using SignAndMagnitudeInt");return r?-n:n}},{key:"_readSignedIntFrom",value:function(e,t){var n;return 0==t?new b.default(0n):(t=128==(128&(e=e.view(t))[0]),(n=Array.prototype.slice.call(e))[0]=127&e[0],e=u.BigIntSerde.fromUnsignedBytes(n),new b.default(e,t))}},{key:"_readUnsignedIntAsBigIntFrom",value:function(e,t){return u.BigIntSerde.fromUnsignedBytes(Array.prototype.slice.call(e.view(t)))}},{key:"_readUnsignedIntAsNumberFrom",value:function(e,t){var n=0,r=0,i=e.getRemaining();if(t<1)return 0;if(6<t)throw new Error("Attempted to read a ".concat(t,"-byte unsigned integer,")+" which is too large for a to be stored in a number without losing precision.");if(i<t)throw new Error("Attempted to read a ".concat(t,"-byte unsigned integer,")+" but only ".concat(i," bytes were available."));for(;r<t;)r++,t<4?n<<=8:n*=256,n+=e.next();return n}},{key:"readDecimalValueFrom",value:function(e,t){var n=e.position(),r=p._readVarSignedIntFrom(e),n=e.position()-n,e=p._readSignedIntFrom(e,t-n),t=e.isNegative,n=t?-e.magnitude:e.magnitude;return d.Decimal._fromBigIntCoefficient(t,n,r)}}]),p}();n.ParserBinaryRaw=l},{"./BigIntSerde":2,"./IonBinary":6,"./IonConstants":10,"./IonDecimal":11,"./IonTimestamp":27,"./IonTypes":29,"./IonUnicode":30,"./SignAndMagnitudeInt":32,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/slicedToArray":77}],16:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.ParserTextRaw=n.get_ion_type=void 0,e("./IonText")),s=e("./IonSymbolToken"),l=e("./IonTypes"),u=13,c=10,h="/".charCodeAt(0),f='"'.charCodeAt(0),p="{".charCodeAt(0),_=f,d=[105,110,102];function y(e,t){return e==u||e==c?t:!(!o.is_whitespace(e)&&e<32)}n.get_ion_type=function(e){switch(e){case-1:case-2:return null;case 1:return l.IonTypes.NULL;case 2:return l.IonTypes.BOOL;case 3:case 4:return l.IonTypes.INT;case 5:case 6:return l.IonTypes.FLOAT;case 7:return l.IonTypes.DECIMAL;case 8:return l.IonTypes.TIMESTAMP;case 9:case 10:case 11:return l.IonTypes.SYMBOL;case 12:case 13:return l.IonTypes.STRING;case 14:case 15:return l.IonTypes.CLOB;case 16:return l.IonTypes.BLOB;case 17:return l.IonTypes.SEXP;case 18:return l.IonTypes.LIST;case 19:return l.IonTypes.STRUCT;default:throw new Error("Unknown type: "+String(e)+".")}};r=function(){function n(e){(0,a.default)(this,n),this._value_null=!1,this._curr_null=!1,this._read_value_helper_minus=function(e,t,n){var r,i=this._peek();105==i?(i=this._peek("inf"),o.isNumericTerminator(i)?r=this._read_minus_inf:t&&(r=this._read_operator_symbol)):o.is_digit(i)?r=this._read_number:t&&(r=this._read_operator_symbol),null!=r?(this._ops.unshift(r),this._unread(e)):this._error("operator symbols are not valid outside of sexps")},this._read_string_helper=function(e,t){var n;for(this._start=this._in.position();;)if(92==(n=this._read()))this._read_string_escape_sequence();else{if(n==e)break;if(!y(n,t))throw new Error("invalid character "+n+" in string")}},this._in=e,this._ops=[this._read_datagram_values],this._value_type=-2,this._value=[],this._start=-1,this._end=-1,this._esc_len=-1,this._curr=-1,this._ann=[],this._msg="",this._fieldname=null,this._fieldnameType=null;function t(e,t){for(var n,r=e.length;0<r;)n=e.charCodeAt(--r),i[n]=t}var i={40:this._read_value_helper_paren,91:this._read_value_helper_square,123:this._read_value_helper_curly,43:this._read_value_helper_plus,45:this._read_value_helper_minus,39:this._read_value_helper_single,34:this._read_value_helper_double};t("0123456789",this._read_value_helper_digit),t("_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this._read_value_helper_letter),t("!#%&*+-./;<=>?@^`|~",this._read_value_helper_operator),i[43]=this._read_value_helper_plus,i[45]=this._read_value_helper_minus,this._read_value_helper_helpers=i}return(0,i.default)(n,[{key:"fieldName",value:function(){return this._fieldname}},{key:"fieldNameType",value:function(){return this._fieldnameType}},{key:"source",value:function(){return this._in}},{key:"annotations",value:function(){return this._ann}},{key:"clearFieldName",value:function(){this._fieldname=null,this._fieldnameType=null}},{key:"isNull",value:function(){return this._curr_null}},{key:"bigIntValue",value:function(){if(this.isNull())return null;var e=this.get_value_as_string(this._curr).toLowerCase();switch(this._curr){case 3:case 4:return e.startsWith("-")?-BigInt(e.slice(1)):BigInt(e);default:throw new Error("intValue() was called when the current value was not an integer.")}}},{key:"numberValue",value:function(){if(this.isNull())return null;var e=this.get_value_as_string(this._curr);switch(this._curr){case 3:case 4:return Number(BigInt(e));case 5:return Number(e);case 6:if("+inf"==e)return Number.POSITIVE_INFINITY;if("-inf"==e)return Number.NEGATIVE_INFINITY;if("nan"==e)return Number.NaN;default:throw new Error("can't convert to number")}}},{key:"booleanValue",value:function(){if(this.isNull())return null;var e=this.get_value_as_string(2);if("true"===e)return!0;if("false"===e)return!1;throw new Error("Unrecognized Boolean value '"+e+"'")}},{key:"get_value_as_string",value:function(e){var t,n="";switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:for(t=this._start;t<this._end;t++)n+=String.fromCharCode(this._in.valueAt(t));break;case 16:for(t=this._start;t<this._end;t++)r=this._in.valueAt(t),o.is_base64_char(r)&&(n+=String.fromCharCode(r));break;case 11:case 12:case 13:for(t=this._start;t<this._end;t++){var r,i=!1;if(92==(r=this._in.valueAt(t))&&(r=this._read_escape_sequence(t,this._end),t+=this._esc_len,i=!0),this.isHighSurrogate(r)){t++;var a=this._in.valueAt(t);if(92==a&&(a=this._read_escape_sequence(t,this._end),t+=this._esc_len),!this.isLowSurrogate(a))throw new Error("expected a low surrogate, but found: "+r);var s=r;n+=String.fromCodePoint(65536+((1023&s)<<10)+(1023&a))}else{if(this.isLowSurrogate(r))throw new Error("unexpected low surrogate: "+r);13===e&&39===r&&!i&&this.verifyTriple(t)?t=this._skip_triple_quote_gap(t,this._end,!0):0<=r&&(i?n+=String.fromCodePoint(r):(13===e&&13===r&&10===this._in.valueAt(t+1)&&(r=10,t++),n+=String.fromCharCode(r)))}}break;default:throw new Error("can't get this value as a string")}return n}},{key:"get_value_as_uint8array",value:function(e){var t=[];switch(e){case 14:for(var n=this._start;n<this._end;n++){var r=this._in.valueAt(n);if(92===r)t.push(this.readClobEscapes(n,this._end)),n+=this._esc_len;else{if(!(r<128))throw new Error("Non-Ascii values illegal within clob.");t.push(r)}}break;case 15:for(var i=this._start;i<this._end;i++){var a=this._in.valueAt(i);if(92===a){var s=this.readClobEscapes(i,this._end);0<=s&&t.push(s),i+=this._esc_len}else if(39===a)this.verifyTriple(i)?i=this._skip_triple_quote_gap(i,this._end,!1):t.push(a);else{if(!(a<128))throw new Error("Non-Ascii values illegal within clob.");t.push(a)}}break;default:throw new Error("can't get this value as a Uint8Array")}return Uint8Array.from(t)}},{key:"next",value:function(){var e;if(this.clearFieldName(),this._ann=[],-2===this._value_type&&this._run(),this._curr=this._value_pop(),-2!==this._curr)return e=this._curr,this._curr_null=this._value_null,this._value_null=!1,e;this._value.push(-2)}},{key:"_read_datagram_values",value:function(){-1==this._peek()?this._value_push(-1):(this._ops.unshift(this._read_datagram_values),this._ops.unshift(this._read_value))}},{key:"_read_sexp_values",value:function(){var e=this._read_after_whitespace(!0);if(41==e)this._value_push(-1);else{if(-1===e)throw new Error("Expected closing ).");this._unread(e),this._ops.unshift(this._read_sexp_values),this._ops.unshift(this._read_sexp_value)}}},{key:"_read_list_values",value:function(){var e=this._read_after_whitespace(!0);93==e?this._value_push(-1):(this._unread(e),this._ops.unshift(this._read_list_comma),this._ops.unshift(this._read_value))}},{key:"_read_struct_values",value:function(){var e=this._done_with_error,t=this._read_after_whitespace(!0);switch(t){case 39:e=this._read_string1,-2!=this._peek("''")&&(e=this._read_string3);break;case f:e=this._read_string2;break;case 125:return void this._value_push(-1);default:o.is_letter(t)&&(e=this._read_symbol)}e===this._done_with_error?this._error("expected field name (or close struct '}') not found"):(e.call(this),this._load_field_name(),58!=this._read_after_whitespace(!0)?this._error("expected ':'"):(this._ops.unshift(this._read_struct_comma),this._ops.unshift(this._read_value)))}},{key:"_read_list_comma",value:function(){var e=this._read_after_whitespace(!0);44==e?93==(e=this._read_after_whitespace(!0))?this._value_push(-1):(this._unread(e),this._ops.unshift(this._read_list_comma),this._ops.unshift(this._read_value)):93==e?this._value_push(-1):this._error("expected ',' or ']'")}},{key:"_read_struct_comma",value:function(){var e=this._read_after_whitespace(!0);44==e?125==(e=this._read_after_whitespace(!0))?this._value_push(-1):(this._unread(e),this._ops.unshift(this._read_struct_values)):125==e?this._value_push(-1):this._error("expected ',' or '}'")}},{key:"_load_field_name",value:function(){this._fieldnameType=this._value_pop();var e=this.get_value_as_string(this._fieldnameType);switch(this._fieldnameType){case 9:if(o.is_keyword(e))throw new Error("can't use '"+e+"' as a fieldname without quotes");case 11:case 12:case 13:this._fieldname=e;break;default:throw new Error("invalid fieldname"+e)}}},{key:"_read_value",value:function(){this._read_value_helper(!1,this._read_value)}},{key:"_read_sexp_value",value:function(){this._read_value_helper(!0,this._read_sexp_value)}},{key:"_read_value_helper",value:function(e,t){var n,r=this._read_after_whitespace(!0);-1==r?this._read_value_helper_EOF(r,e,t):null!=(n=this._read_value_helper_helpers[r])?n.call(this,r,e,t):this._error("unexpected character '"+o.asAscii(r)+"'")}},{key:"_read_value_helper_EOF",value:function(e,t,n){this._ops.unshift(this._done)}},{key:"_read_value_helper_paren",value:function(e,t,n){this._value_push(17),this._ops.unshift(this._read_sexp_values)}},{key:"_read_value_helper_square",value:function(e,t,n){this._value_push(18),this._ops.unshift(this._read_list_values)}},{key:"_read_value_helper_curly",value:function(e,t,n){var r,i=this._read();i==p?39==(r=this._read_after_whitespace(!1))?this._ops.unshift(this._read_clob_string3):r==f?this._ops.unshift(this._read_clob_string2):(this._unread(r),this._ops.unshift(this._read_blob)):(this._unread(i),this._value_push(19),this._ops.unshift(this._read_struct_values))}},{key:"_read_value_helper_plus",value:function(e,t,n){var r=this._peek("inf");this._unread(e),o.isNumericTerminator(r)?this._ops.unshift(this._read_plus_inf):t?this._ops.unshift(this._read_operator_symbol):this._error("unexpected '+'")}},{key:"_read_value_helper_digit",value:function(e,t,n){var r=this._peek_4_digits(e);this._unread(e),84==r||45==r?this._ops.unshift(this._readTimestamp):this._ops.unshift(this._read_number)}},{key:"_read_value_helper_single",value:function(e,t,n){var r;-2!=this._peek("''")?(r=this._read_string3).call(this):((r=this._read_string1).call(this),this._test_string_as_annotation(r)&&this._ops.unshift(n))}},{key:"_read_value_helper_double",value:function(e,t,n){this._ops.unshift(this._read_string2)}},{key:"_read_value_helper_letter",value:function(e,t,n){this._read_symbol();var r=this._value_pop();if(9!=r)throw new Error("Expecting symbol here.");r=this.get_value_as_string(r);if(o.is_keyword(r)){var i=function(e){if("null"===e)return 1;if("true"===e)return 2;if("false"===e)return 2;if("nan"===e)return 6;if("+inf"===e)return 6;if("-inf"===e)return 6;throw new Error("Unknown keyword: "+e+".")}(r);if(1===i){if(this._value_null=!0,46===this._peek()){this._read();var a=this._read();if(!0!==o.is_letter(a))throw new Error("Expected type name after 'null.'");if(this._read_symbol(),9!==this._value_pop())throw new Error("Expected type name after 'null.'");i=function(e){if("null"===e)return 1;if("bool"===e)return 2;if("int"===e)return 3;if("float"===e)return 5;if("decimal"===e)return 7;if("timestamp"===e)return 8;if("symbol"===e)return 9;if("string"===e)return 12;if("clob"===e)return 14;if("blob"===e)return 16;if("sexp"===e)return 17;if("list"===e)return 18;if("struct"===e)return 19;throw new Error("Unknown type: "+e+".")}(r=this.get_value_as_string(9))}this._start=-1,this._end=-1}this._value_push(i)}else{a=this._read_after_whitespace(!0);if(58==a&&58==this._peek()){this._read();i=this._parseSymbolId(r);if(0===i)throw new Error("Symbol ID zero is not supported.");isNaN(i)?this._ann.push(new s.SymbolToken(r)):this._ann.push(new s.SymbolToken(null,i)),this._ops.unshift(n)}else this._unread(a),this._value_push(9)}}},{key:"_read_value_helper_operator",value:function(e,t,n){t?(this._unread(e),this._ops.unshift(this._read_operator_symbol)):this._error("unexpected operator character")}},{key:"_done",value:function(){this._value_push(-1)}},{key:"_done_with_error",value:function(){throw this._value_push(-2),new Error(this._error_msg)}},{key:"_read_number",value:function(){var e,t;if(this._start=this._in.position(),48==(e=45==(e=this._read())?this._read():e)){if(120==(e=this._peek())||88==e)return void this._read_hex_int();o.is_digit(e)&&this._error("leading zeros are not allowed"),e=48}t=3,46==(e=this._read_required_digits(e))&&(t=7,e=this._read_optional_digits(this._read())),o.isNumericTerminator(e)||(100==e||68==e?(t=7,e=this._read_exponent()):101!=e&&69!=e&&102!=e&&70!=e||(t=5,e=this._read_exponent())),o.isNumericTerminator(e)?(this._unread(e),this._end=this._in.position(),this._value_push(t)):this._error("invalid character after number")}},{key:"_read_hex_int",value:function(){var e=this._read();120!=e&&88!=e||(e=this._read(),e=this._read_required_hex_digits(e)),o.isNumericTerminator(e)?(this._unread(e),this._end=this._in.position(),this._value_push(4)):this._error("invalid character after number")}},{key:"_read_exponent",value:function(){var e=this._read();return 45!=e&&43!=e||(e=this._read()),e=this._read_required_digits(e)}},{key:"_read_plus_inf",value:function(){this._start=this._in.position(),43==this._read()?this._read_inf_helper():this._error("expected +inf")}},{key:"_read_minus_inf",value:function(){this._start=this._in.position(),45==this._read()?this._read_inf_helper():this._error("expected -inf")}},{key:"_read_inf_helper",value:function(){for(var e=0;e<3;e++)if(this._read()!=d[e])return void this._error("expected 'inf'");o.isNumericTerminator(this._peek())?(this._end=this._in.position(),this._value_push(6)):this._error("invalid numeric terminator after 'inf'")}},{key:"_readTimestamp",value:function(){this._start=this._in.position();var e=this._readPastNDigits(4);if(84!==e){if(45!==e)throw new Error("Timestamp year must be followed by '-' or 'T'.");if(84!==(e=this._readPastNDigits(2))){if(45!==e)throw new Error("Timestamp month must be followed by '-' or 'T'.");if(e=this._readPastNDigits(2),o.isNumericTerminator(e))this._unread(e);else{if(84!==e)throw new Error("Timestamp day must be followed by a numeric stop character .");var t=this._in.peek();if(!o.isNumericTerminator(t)){if(!o.is_digit(t))throw new Error("Timestamp DATE must be followed by numeric terminator or additional TIME digits.");if(58!==(e=this._readPastNDigits(2)))throw new Error("Timestamp time(hr:min) requires format of 00:00");if(58===(e=this._readPastNDigits(2))&&46===(e=this._readPastNDigits(2))){if(!o.is_digit(this._read()))throw new Error("W3C timestamp spec requires atleast one digit after decimal point.");for(;o.is_digit(e=this._read()););}if(90===e){if(o.isNumericTerminator(this._peek()))return this._end=this._in.position(),void this._value_push(8);throw new Error("Illegal terminator after Zulu offset.")}if(43!==e&&45!==e)throw new Error("Timestamps require an offset.");if(58!==(e=this._readPastNDigits(2)))throw new Error("Timestamp offset(hr:min) requires format of +/-00:00.");if(this._readNDigits(2),e=this._peek(),!o.isNumericTerminator(e))throw new Error("Improperly formatted timestamp.")}}}}this._end=this._in.position(),this._value_push(8)}},{key:"_read_symbol",value:function(){var e;for(this._start=this._in.position()-1;e=this._read(),o.is_letter_or_digit(e););this._unread(e),this._end=this._in.position(),this._value_push(9)}},{key:"_read_operator_symbol",value:function(){var e;for(this._start=this._in.position();e=this._read(),o.is_operator_char(e););this._end=this._in.position()-1,this._unread(e),this._value_push(10)}},{key:"_read_string1",value:function(){this._read_string_helper(39,!1),this._end=this._in.position()-1,this._value_push(11)}},{key:"_read_string2",value:function(){this._read_string_helper(f,!1),this._end=this._in.position()-1,this._value_push(12)}},{key:"_read_string3",value:function(e){var t;for(void 0===e&&(e=!0),this._unread(this._peek("")),this._start=this._in.position()+3;-2!==this._peek("'''");this._in.unread(this._read_after_whitespace(e))){for(var n=0;n<3;n++)this._read();for(;-2===this._peek("'''");){if(92==(t=this._read())&&this._read_string_escape_sequence(),-1===t)throw new Error("Closing triple quotes not found.");if(!y(t,!0))throw new Error("invalid character "+t+" in string")}this._end=this._in.position();for(var r=0;r<3;r++)this._read()}this._value_push(13)}},{key:"verifyTriple",value:function(e){return 39===this._in.valueAt(e)&&39===this._in.valueAt(e+1)&&39===this._in.valueAt(e+2)}},{key:"_read_string_escape_sequence",value:function(){var e=this._read();switch(e){case 48:case 97:case 98:case 116:case 110:case 102:case 114:case 118:case _:case 39:case 63:case 92:case 47:case 10:break;case 13:10!=(e=this._read())&&this._unread(e);break;case 120:e=this._read_N_hexdigits(2),this._unread(e);break;case 117:e=this._read_N_hexdigits(4),this._unread(e);break;case 85:e=this._read_N_hexdigits(8),this._unread(e);break;default:this._error("unexpected character: "+e+" after escape slash")}}},{key:"_test_string_as_annotation",value:function(e){var t,n,r=this._value_pop();return 11!=r&&13!=r&&this._error("expecting quoted symbol here"),t=this.get_value_as_string(r),58==(n=this._read_after_whitespace(!0))&&58==this._peek()?(this._read(),this._ann.push(new s.SymbolToken(t)),!0):(this._unread(n),this._value_push(r),!1)}},{key:"_read_clob_string2",value:function(){this._read_string2(),12!=this._value_pop()&&this._error("string expected"),this._value_push(14),this._ops.unshift(this._read_close_double_brace)}},{key:"_read_clob_string3",value:function(){this._read_string3(!1),13!=this._value_pop()&&this._error("string expected"),this._value_push(15),this._ops.unshift(this._read_close_double_brace)}},{key:"_read_blob",value:function(){var e,t,n,r=0,i=0;for(this._start=this._in.position();;)if(e=this._read(),o.is_base64_char(e))r++,this._end=this._in.position();else if(!o.is_whitespace(e))break;for(;61==e;)i++,e=this._read_after_whitespace(!1);if(125!=e||125!=this._read())throw new Error("Invalid blob");if(t=r,2<(n=i)||0!=(t+n&3))throw new Error("Invalid base64 value");this._value_push(16)}},{key:"_read_close_double_brace",value:function(){125==this._read_after_whitespace(!1)&&125==this._read()||this._error("expected '}}'")}},{key:"isHighSurrogate",value:function(e){return 55296<=e&&e<=56319}},{key:"isLowSurrogate",value:function(e){return 56320<=e&&e<=57343}},{key:"indexWhiteSpace",value:function(e,t){var n=this._in.valueAt(e);if(t){for(;o.is_whitespace(n)||n===h;n=this._in.valueAt(e++))if(n===h)switch(n=this._in.valueAt(e++)){case h:e=this.indexToNewLine(e);break;case 42:e=this.indexToCloseComment(e);break;default:e--}}else for(;o.is_whitespace(n);n=this._in.valueAt(e++));return e}},{key:"indexToNewLine",value:function(e){for(var t=this._in.valueAt(e);-1!==t&&t!==c;){if(t===u&&this._in.valueAt(e+1)!==c)return e;t=this._in.valueAt(e++)}return e}},{key:"indexToCloseComment",value:function(e){for(;42!==this._in.valueAt(e)&&this._in.valueAt(e+1)!==h;)e++;return e}},{key:"_skip_triple_quote_gap",value:function(e,t,n){return(e=this.indexWhiteSpace(e+3,n))+2<=t&&this.verifyTriple(e)?e+4:e+1}},{key:"readClobEscapes",value:function(e,t){var n;if(t<=e+1)throw new Error("invalid escape sequence");switch(n=this._in.valueAt(e+1),this._esc_len=1,n){case 48:return 0;case 97:return 7;case 98:return 8;case 116:return 9;case 110:return 10;case 102:return 12;case 114:return 13;case 118:return 11;case _:return 34;case 39:return 39;case 63:return 63;case 92:return 92;case 47:return 47;case 10:return-1;case 13:return e+2<t&&this._in.valueAt(e+2)==c&&(this._esc_len=2),o.ESCAPED_NEWLINE;case 120:if(t<=e+3)throw new Error("invalid escape sequence");n=this._get_N_hexdigits(e+2,e+4),this._esc_len=3;break;default:throw new Error("Invalid escape: /"+n)}return n}},{key:"_read_escape_sequence",value:function(e,t){var n;if(t<=e+1)throw new Error("Invalid escape sequence.");switch(n=this._in.valueAt(e+1),this._esc_len=1,n){case 48:return 0;case 97:return 7;case 98:return 8;case 116:return 9;case 110:return 10;case 102:return 12;case 114:return 13;case 118:return 11;case _:return 34;case 39:return 39;case 63:return 63;case 92:return 92;case 47:return 47;case 10:return-1;case 13:return e+2<t&&this._in.valueAt(e+2)==c&&(this._esc_len=2),o.ESCAPED_NEWLINE;case 120:if(t<=e+3)throw new Error("invalid escape sequence");n=this._get_N_hexdigits(e+2,e+4),this._esc_len=3;break;case 117:if(t<=e+5)throw new Error("invalid escape sequence");n=this._get_N_hexdigits(e+2,e+6),this._esc_len=5;break;case 85:if(t<=e+9)throw new Error("invalid escape sequence");n=this._get_N_hexdigits(e+2,e+10),this._esc_len=9;break;default:throw new Error("unexpected character after escape slash")}return n}},{key:"_get_N_hexdigits",value:function(e,t){for(var n=0;e<t;)n=16*n+function(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 98:return 11;case 99:return 12;case 100:return 13;case 101:return 14;case 102:return 15;case 65:return 10;case 66:return 11;case 67:return 12;case 68:return 13;case 69:return 14;case 70:return 15}throw new Error("Unexpected bad hex digit in checked data.")}(this._in.valueAt(e)),e++;return n}},{key:"_value_push",value:function(e){-2!==this._value_type&&this._error("unexpected double push of value type!"),this._value_type=e}},{key:"_value_pop",value:function(){var e=this._value_type;return this._value_type=-2,e}},{key:"_run",value:function(){for(;0<this._ops.length&&-2===this._value_type;)this._ops.shift().call(this)}},{key:"_read",value:function(){return this._in.next()}},{key:"_read_skipping_comments",value:function(){var e=this._read();return e=e==h?(e=this._read())==h?(this._read_to_newline(),o.WHITESPACE_COMMENT1):42==e?(this._read_to_close_comment(),o.WHITESPACE_COMMENT2):(this._unread(e),h):e}},{key:"_read_to_newline",value:function(){for(var e;-1!=(e=this._read())&&e!=c;)if(e==u){(e=this._read())!=c&&this._unread(e);break}}},{key:"_read_to_close_comment",value:function(){for(var e;-1!=(e=this._read())&&(42!=e||this._read()!=h););}},{key:"_unread",value:function(e){this._in.unread(e)}},{key:"_read_after_whitespace",value:function(e){var t;if(e)for(t=this._read_skipping_comments();o.is_whitespace(t);)t=this._read_skipping_comments();else for(t=this._read();o.is_whitespace(t);)t=this._read();return t}},{key:"_peek",value:function(e){var t,n=0;if(void 0===e||e.length<1)return this._in.valueAt(this._in.position());for(;n<e.length&&(t=this._read())==e.charCodeAt(n);)n++;for(t=n===e.length?this._peek():(this._unread(t),-2);0<n;)this._unread(e.charCodeAt(--n));return t}},{key:"_peek_4_digits",value:function(e){var t,n,r=!0,i=[];if(!o.is_digit(e))return-2;for(t=0;t<3;t++)if(n=this._read(),i.push(n),!o.is_digit(n)){r=!1;break}for(n=r&&3==t?this._peek():-2;0<i.length;)this._unread(i.pop());return n}},{key:"_read_required_digits",value:function(e){if(!o.is_digit(e))return-2;for(;e=this._read(),o.is_digit(e););return e}},{key:"_read_optional_digits",value:function(e){for(;o.is_digit(e);)e=this._read();return e}},{key:"_readNDigits",value:function(e){var t;if(e<=0)throw new Error("Cannot read a lack of or negative number of digits.");for(;e--;)if(!o.is_digit(t=this._read()))throw new Error("Expected digit, got: "+String.fromCharCode(t));return t}},{key:"_readPastNDigits",value:function(e){return this._readNDigits(e),this._read()}},{key:"_read_required_hex_digits",value:function(e){if(!o.is_hex_digit(e))return-2;for(;e=this._read(),o.is_hex_digit(e););return e}},{key:"_read_N_hexdigits",value:function(e){for(var t,n=0;n<e;){if(t=this._read(),!o.is_hex_digit(t))return this._error(e+" digits required "+n+" found"),-2;n++}return t}},{key:"_parseSymbolId",value:function(e){if("$"!==e[0])return NaN;for(var t=1;t<e.length;t++)if(e[t]<"0"||"9"<e[t])return NaN;return parseInt(e.substr(1,e.length))}},{key:"_error",value:function(e){this._ops.unshift(this._done_with_error),this._error_msg=e}}]),n}();n.ParserTextRaw=r},{"./IonSymbolToken":21,"./IonText":24,"./IonTypes":29,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],17:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.PrettyTextWriter=void 0;var c=e("./IonText"),h=e("./IonTextWriter"),f=e("./IonTypes"),r=function(e){(0,s.default)(r,e);var n=u(r);function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return(0,i.default)(this,r),(e=n.call(this,e)).indentSize=t,e.indentCount=0,e}return(0,a.default)(r,[{key:"writeFieldName",value:function(e){if(this.currentContainer.containerType!==f.IonTypes.STRUCT)throw new Error("Cannot write field name outside of a struct");if(this.currentContainer.state!==h.State.STRUCT_FIELD)throw new Error("Expecting a struct value");this.currentContainer.clean||(this.writeable.writeByte(c.CharCodes.COMMA),this.writePrettyNewLine(0)),this.writePrettyIndent(0),this.writeSymbolToken(e),this.writeable.writeByte(c.CharCodes.COLON),this.writeable.writeByte(c.CharCodes.SPACE),this.currentContainer.state=h.State.VALUE}},{key:"writeNull",value:function(e){null==e&&(e=f.IonTypes.NULL),this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),this._writeNull(e),this.currentContainer.containerType===f.IonTypes.STRUCT&&(this.currentContainer.state=h.State.STRUCT_FIELD)}},{key:"stepOut",value:function(){var e=this.containerContext.pop();if(!e||!e.containerType)throw new Error("Can't step out when not in a container");if(e.containerType===f.IonTypes.STRUCT&&e.state===h.State.VALUE)throw new Error("Expecting a struct value");switch(e.clean||this.writePrettyNewLine(0),this.writePrettyIndent(-1),e.containerType){case f.IonTypes.LIST:this.writeable.writeByte(c.CharCodes.RIGHT_BRACKET);break;case f.IonTypes.SEXP:this.writeable.writeByte(c.CharCodes.RIGHT_PARENTHESIS);break;case f.IonTypes.STRUCT:this.writeable.writeByte(c.CharCodes.RIGHT_BRACE);break;default:throw new Error("Unexpected container type")}}},{key:"_serializeValue",value:function(e,t,n){if(this.currentContainer.state===h.State.STRUCT_FIELD)throw new Error("Expecting a struct field");null===t?this.writeNull(e):(this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),n(t),this.currentContainer.containerType===f.IonTypes.STRUCT&&(this.currentContainer.state=h.State.STRUCT_FIELD))}},{key:"writeContainer",value:function(e,t){this.currentContainer.containerType===f.IonTypes.STRUCT&&this.currentContainer.state===h.State.VALUE&&(this.currentContainer.state=h.State.STRUCT_FIELD),this.handleSeparator(),this.writePrettyValue(),this.writeAnnotations(),this.writeable.writeByte(t),this.writePrettyNewLine(1),this._stepIn(e)}},{key:"handleSeparator",value:function(){if(0===this.depth())this.currentContainer.clean?this.currentContainer.clean=!1:this.writeable.writeByte(c.CharCodes.LINE_FEED);else if(this.currentContainer.clean)this.currentContainer.clean=!1;else switch(this.currentContainer.containerType){case f.IonTypes.LIST:this.writeable.writeByte(c.CharCodes.COMMA),this.writePrettyNewLine(0);break;case f.IonTypes.SEXP:this.writeable.writeByte(c.CharCodes.SPACE),this.writePrettyNewLine(0)}}},{key:"writePrettyValue",value:function(){0<this.depth()&&this.currentContainer.containerType&&this.currentContainer.containerType!==f.IonTypes.STRUCT&&this.writePrettyIndent(0)}},{key:"writePrettyNewLine",value:function(e){this.indentCount=this.indentCount+e,this.indentSize&&0<this.indentSize&&this.writeable.writeByte(c.CharCodes.LINE_FEED)}},{key:"writePrettyIndent",value:function(e){if(this.indentCount=this.indentCount+e,this.indentSize&&0<this.indentSize)for(var t=0;t<this.indentCount*this.indentSize;t++)this.writeable.writeByte(c.CharCodes.SPACE)}}]),r}(h.TextWriter);n.PrettyTextWriter=r},{"./IonText":24,"./IonTextWriter":26,"./IonTypes":29,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],18:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),r=(Object.defineProperty(n,"__esModule",{value:!0}),n.SharedSymbolTable=void 0,function(){function i(e,t,n){(0,a.default)(this,i),this._name=e,this._version=t,this._symbols=n,this._idsByText=new Map,this._numberOfSymbols=this._symbols.length;for(var r=n.length-1;0<=r;r--)this._idsByText.set(n[r],r)}return(0,s.default)(i,[{key:"numberOfSymbols",get:function(){return this._numberOfSymbols}},{key:"name",get:function(){return this._name}},{key:"version",get:function(){return this._version}},{key:"getSymbolText",value:function(e){if(e<0)throw new Error("Index ".concat(e," is out of bounds for the SharedSymbolTable name=").concat(this.name,", version=").concat(this.version));if(!(e>=this.numberOfSymbols))return this._symbols[e]}},{key:"getSymbolId",value:function(e){return this._idsByText.get(e)}}]),i}());n.SharedSymbolTable=r},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],19:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/inherits")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf")),o=r(e("@babel/runtime/helpers/classCallCheck")),l=r(e("@babel/runtime/helpers/createClass"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,s.default)(n);return e=r?(e=(0,s.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.BinarySpan=n.StringSpan=n.Span=void 0;var c=e("./IonConstants"),h=function(){function t(e){(0,o.default)(this,t),this._type=e}return(0,l.default)(t,[{key:"write",value:function(e){throw new Error("not implemented")}}],[{key:"error",value:function(){throw new Error("span error")}}]),t}(),r=(n.Span=h,function(){(0,i.default)(r,h);var n=u(r);function r(e){var t;return(0,o.default)(this,r),(t=n.call(this,0))._line=1,t._src=e,t._limit=e.length,t._start=0,t._pos=0,t._line_start=0,t._old_line_start=0,t}return(0,l.default)(r,[{key:"viewSource",value:function(){return this._src}},{key:"position",value:function(){return this._pos-this._start}},{key:"getRemaining",value:function(){return this._limit-this._pos}},{key:"setRemaining",value:function(e){this._limit=e+this._pos}},{key:"is_empty",value:function(){return this._pos>=this._limit}},{key:"next",value:function(){var e;if(this.is_empty()){if(1073741824<this._pos)throw new Error("span position is out of bounds");return this._pos++,c.EOF}return 13===(e=this._src.charCodeAt(this._pos))?10!=this.peek()&&this._inc_line():10==e&&this._inc_line(),this._pos++,e}},{key:"_inc_line",value:function(){this._old_line_start=this._line_start,this._line++,this._line_start=this._pos}},{key:"unread",value:function(e){this._pos<=this._start&&h.error(),this._pos--,e<0?1!=this.is_empty()&&h.error():(this._pos==this._line_start&&(this._line_start=this._old_line_start,this._line--),e!=this.peek()&&h.error())}},{key:"peek",value:function(){return this.valueAt(this._pos)}},{key:"skip",value:function(e){this._pos+=e,this._pos>this._limit&&(this._pos=this._limit)}},{key:"valueAt",value:function(e){return e<this._start||e>=this._limit?c.EOF:this._src.charCodeAt(e)}},{key:"chunk",value:function(e){var t=this._src.substr(this._pos,e);return this._pos+=e,t}},{key:"getCodePoint",value:function(e){return this._src.codePointAt(e)}},{key:"line_number",value:function(){return this._line}},{key:"offset",value:function(){return this._pos-this._line_start}},{key:"clone",value:function(e){return new r(this._src.substr(this._pos))}}]),r}()),e=(n.StringSpan=r,function(){(0,i.default)(r,h);var n=u(r);function r(e){var t;return(0,o.default)(this,r),(t=n.call(this,1))._src=e,t._limit=e.length,t._start=0,t._pos=0,t}return(0,l.default)(r,[{key:"position",value:function(){return this._pos-this._start}},{key:"getRemaining",value:function(){return this._limit-this._pos}},{key:"setRemaining",value:function(e){this._limit=e+this._pos}},{key:"is_empty",value:function(){return this._pos>=this._limit}},{key:"next",value:function(){return this.is_empty()?c.EOF:this._src[this._pos++]}},{key:"view",value:function(e){if(this._pos+e>this._limit)throw new Error("Unable to read "+e+" bytes (position: "+this.position()+", limit: "+this._limit+")");return this._src.subarray(this._pos,this._pos+=e)}},{key:"chunk",value:function(e){return new Uint8Array(this.view(e))}},{key:"unread",value:function(e){this._pos<=this._start&&h.error(),this._pos--,e==c.EOF&&0==this.is_empty()&&h.error(),e!=this.peek()&&h.error()}},{key:"peek",value:function(){return this.is_empty()?c.EOF:this._src[this._pos]}},{key:"skip",value:function(e){if(this._pos+=e,this._pos>this._limit)throw new Error("Skipped over end of source.")}},{key:"valueAt",value:function(e){return e<this._start||e>=this._limit?c.EOF:this._src[e]}},{key:"clone",value:function(e,t){return new r(this._src.subarray(this._pos))}}]),r}());n.BinarySpan=e},{"./IonConstants":10,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],20:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.SubstituteSymbolTable=void 0;r=function(e){(0,s.default)(r,e);var n=u(r);function r(e){var t;if((0,i.default)(this,r),e<0)throw new Error("Cannot instantiate a SubstituteSymbolTable with a negative length. ("+e+")");return(t=n.call(this,"_substitute",-1,[]))._numberOfSymbols=e,t}return(0,a.default)(r,[{key:"getSymbolText",value:function(e){if(e<0)throw new Error("Index ".concat(e," is out of bounds for the SharedSymbolTable name=").concat(this.name,", version=").concat(this.version))}},{key:"getSymbolId",value:function(e){}}]),r}(e("./IonSharedSymbolTable").SharedSymbolTable);n.SubstituteSymbolTable=r},{"./IonSharedSymbolTable":18,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],21:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),r=(Object.defineProperty(n,"__esModule",{value:!0}),n.SymbolToken=void 0,function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n._UNKNOWN_SYMBOL_ID;(0,i.default)(this,n),this.text=e,this.sid=t}return(0,a.default)(n,[{key:"getText",value:function(){return this.text}},{key:"getSid",value:function(){return this.sid}}]),n}());(n.SymbolToken=r)._UNKNOWN_SYMBOL_ID=-1},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],22:[function(e,t,c){"use strict";var h=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/toConsumableArray")),f=(Object.defineProperty(c,"__esModule",{value:!0}),c.makeSymbolTable=c.ion_symbol_table_sid=c.ion_symbol_table=void 0,e("./IonImport")),p=e("./IonLocalSymbolTable"),_=e("./IonSubstituteSymbolTable"),d=e("./IonSystemSymbolTable"),y=e("./Ion");c.ion_symbol_table="$ion_symbol_table",c.ion_symbol_table_sid=3;function b(e){var t=[];for(e.stepIn();e.next();)t.push(e.stringValue());return e.stepOut(),t}c.makeSymbolTable=function(e,t,n){var r=null,i=[],a=!1,s=!1,o=!1;for(t.stepIn();t.next();)switch(t.fieldName()){case"imports":if(s)throw new Error("Multiple import fields found.");var l=t.type();if(l===y.IonTypes.SYMBOL&&t.stringValue()===c.ion_symbol_table){var r=n.import,u=i;(i=n.symbols).push.apply(i,(0,h.default)(u)),o=!0}else{if(l!==y.IonTypes.LIST)throw new Error("Expected import field name to be a list or symbol found ".concat(l));r=function(e,t){var n=d.getSystemSymbolTableImport();for(e.stepIn();e.next();){e.stepIn();for(var r=null,i=1,a=null;e.next();)switch(e.fieldName()){case"name":r=e.stringValue();break;case"version":i=e.numberValue();break;case"max_id":a=e.numberValue()}if((null===i||i<1)&&(i=1),r&&"$ion"!==r){var s=t.getVersion(r,i);if(!s){if(void 0===a)throw new Error("No exact match found when trying to import symbol table ".concat(r," version ").concat(i));s=t.getTable(r)}s=s||new _.SubstituteSymbolTable(a),n=new f.Import(n,s,a)}e.stepOut()}return e.stepOut(),n}(t,e)}s=!0;break;case"symbols":if(a)throw new Error("Multiple symbol fields found.");o?i.push.apply(i,(0,h.default)(b(t))):i=b(t),a=!0}return t.stepOut(),new p.LocalSymbolTable(r,i)}},{"./Ion":5,"./IonImport":12,"./IonLocalSymbolTable":13,"./IonSubstituteSymbolTable":20,"./IonSystemSymbolTable":23,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/toConsumableArray":79}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getSystemSymbolTableImport=n.getSystemSymbolTable=void 0;var r=e("./IonImport"),i=new(e("./IonSharedSymbolTable").SharedSymbolTable)("$ion",1,["$ion","$ion_1_0","$ion_symbol_table","name","version","imports","symbols","max_id","$ion_shared_symbol_table"]);function a(){return i}n.getSystemSymbolTable=a,n.getSystemSymbolTableImport=function(){return new r.Import(null,i)}},{"./IonImport":12,"./IonSharedSymbolTable":18}],24:[function(e,t,n){"use strict";var e=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/extends")),r=(Object.defineProperty(n,"__esModule",{value:!0}),n.escape=n.isDigit=n.isOperator=n.isIdentifier=n.SymbolEscapes=n.StringEscapes=n.ClobEscapes=n.CharCodes=n.toBase64=n.fromBase64=n.is_hex_digit=n.is_base64_char=n.is_whitespace=n.is_operator_char=n.is_letter_or_digit=n.isNumericTerminator=n.is_letter=n.toHex=n.escapeSequence=n.escapeString=n.needsEscape=n.nextEscape=n.asAscii=n.is_keyword=n.is_digit=n.ESCAPED_NEWLINE=n.WHITESPACE_COMMENT2=n.WHITESPACE_COMMENT1=void 0,n.WHITESPACE_COMMENT1=-2,n.WHITESPACE_COMMENT2=-3,n.ESCAPED_NEWLINE=-4,34),i=39,a=92,s={0:"\\0",8:"\\b",9:"\\t",10:"\\n",13:"\\r",DOUBLE_QUOTE:'\\"',SINGLE_QUOTE:"\\'",SLASH:"\\\\"};function o(e){var t=e.length,n=[];for(n[128]=!1;0<t;)n[e.charCodeAt(--t)]=!0;return n}var l=o("+/0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),u=o("0123456789abcdefABCDEF"),c=o("_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),h=o("_$0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),f=o("{}[](),\"' \t\n\r\v\f"),p=o("!#%&*+-./;<=>?@^`|~"),_=o(" \t\r\n\v\f"),d=o("_$0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function y(e){return!(e<48||57<e)}function b(e,t){for(;0<t--&&!m(e.charCodeAt(t)););return t}function m(e){return e<32||126<e||e===r||e===i||e===a}function v(e,t){for(var n,r,i=[];0<=t&&m(n=e.charCodeAt(t));)i.push([t,n]),t=b(e,t);if(0<i.length){for(s="",r=i.length,t=e.length;r--;){var a=i[r],s=0<t-a[0]-1?T(a[1])+e.substring(a[0]+1,t)+s:e.substring(a[0]+1,t)+s;t=a[0]-1}e=s=0<=t?e.substring(0,t)+s:s}return e}function T(e){var t=s[e];return t=void 0===t?e<256?"\\x"+g(e,2):e<=65535?"\\u"+g(e,4):"\\U"+g(e,8):t}function g(e,t){for(var n="";0<e;)n+="0123456789ABCDEF".charAt(e&&15),e/=16;return n=n.length<t?(n="000000000"+n).substring(n.length-t,n.length):n}n.is_digit=y,n.is_keyword=function(e){return"null"===e||"true"===e||"false"===e||"nan"===e||"+inf"===e||"-inf"===e},n.asAscii=function(e){var t;return void 0===e?e="undefined::null":"number"==typeof e?e=""+e:"string"!=typeof e&&0<=(t=b(e,e.length))&&(e=v(e,t)),e},n.nextEscape=b,n.needsEscape=m,n.escapeString=v,n.escapeSequence=T,n.toHex=g,n.is_letter=function(e){return c[e]},n.isNumericTerminator=function(e){return-1==e||f[e]},n.is_letter_or_digit=function(e){return h[e]},n.is_operator_char=function(e){return p[e]},n.is_whitespace=function(e){return!(32<e)&&(e==n.WHITESPACE_COMMENT1||e==n.WHITESPACE_COMMENT2||e==n.ESCAPED_NEWLINE||_[e])},n.is_base64_char=function(e){return l[e]},n.is_hex_digit=function(e){return u[e]};var w,I=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],C={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};function S(e){return[w.BACKSLASH,e.charCodeAt(0)]}n.fromBase64=function(e){for(var t=0,n=e.length-1;"="==e.charAt(n);n--)t++;for(var r=new Uint8Array(3*e.length/4-t),i=0;i<e.length-t;i+=4){var a=C[e.charAt(i)],s=C[e.charAt(i+1)],o=C[e.charAt(i+2)],l=C[e.charAt(i+3)];r[3*i/4]=a<<2&255|s>>>4,i+2<e.length-t&&(r[3*i/4+1]=s<<4&255|o>>>2,i+3<e.length-t)&&(r[3*i/4+2]=o<<6&255|l)}return r},n.toBase64=function(e){for(var t=new Array(Math.ceil(4*e.length/3)),n=0;n<e.length;n+=3){var r=e[n],i=e[n+1],a=e[n+2];e[n+3];if(t[4*n/3]=I[r>>>2],t[4*n/3+1]=I[r<<4&63|(i||0)>>>4],!(n+1<e.length))return t.join("")+"==";if(t[4*n/3+2]=I[i<<2&63|(a||0)>>>6],!(n+2<e.length))return t.join("")+"=";t[4*n/3+3]=I[63&a]}return t.join("")},(A=w=n.CharCodes||(n.CharCodes={}))[A.NULL=0]="NULL",A[A.BELL=7]="BELL",A[A.BACKSPACE=8]="BACKSPACE",A[A.HORIZONTAL_TAB=9]="HORIZONTAL_TAB",A[A.LINE_FEED=10]="LINE_FEED",A[A.VERTICAL_TAB=11]="VERTICAL_TAB",A[A.FORM_FEED=12]="FORM_FEED",A[A.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",A[A.DOUBLE_QUOTE=34]="DOUBLE_QUOTE",A[A.SINGLE_QUOTE=39]="SINGLE_QUOTE",A[A.FORWARD_SLASH=47]="FORWARD_SLASH",A[A.QUESTION_MARK=63]="QUESTION_MARK",A[A.BACKSLASH=92]="BACKSLASH",A[A.LEFT_PARENTHESIS=40]="LEFT_PARENTHESIS",A[A.RIGHT_PARENTHESIS=41]="RIGHT_PARENTHESIS",A[A.LEFT_BRACE=123]="LEFT_BRACE",A[A.RIGHT_BRACE=125]="RIGHT_BRACE",A[A.LEFT_BRACKET=91]="LEFT_BRACKET",A[A.RIGHT_BRACKET=93]="RIGHT_BRACKET",A[A.COMMA=44]="COMMA",A[A.SPACE=32]="SPACE",A[A.LOWERCASE_X=120]="LOWERCASE_X",A[A.COLON=58]="COLON";var E=[w.BACKSLASH,w.LOWERCASE_X];function k(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return E.concat(function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(t))}function O(e,t,n){if(void 0===n)e[t]=k(t);else for(var r=t;r<n;r++)e[r]=k(r)}var A={};A[w.NULL]=S("0"),O(A,1,7),A[w.BELL]=S("a"),A[w.BACKSPACE]=S("b"),A[w.HORIZONTAL_TAB]=S("t"),A[w.LINE_FEED]=S("n"),A[w.VERTICAL_TAB]=S("v"),A[w.FORM_FEED]=S("f"),A[w.CARRIAGE_RETURN]=S("r"),O(A,14,32),A[w.BACKSLASH]=S("\\"),O(A,127,160),n.ClobEscapes=(0,e.default)({},A),n.ClobEscapes[w.DOUBLE_QUOTE]=S('"'),n.ClobEscapes[w.SINGLE_QUOTE]=S("'"),n.ClobEscapes[w.FORWARD_SLASH]=S("/"),n.ClobEscapes[w.QUESTION_MARK]=S("?"),n.StringEscapes=(0,e.default)({},A),n.StringEscapes[w.DOUBLE_QUOTE]=S('"'),n.SymbolEscapes=(0,e.default)({},A),n.SymbolEscapes[w.SINGLE_QUOTE]=S("'"),n.isIdentifier=function(e){if(y(e.charCodeAt(0)))return!1;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(!d[n])return!1}return!0},n.isOperator=function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(!p[n])return!1}return!0},n.isDigit=function(e){return e<58&&47<e},n.escape=function(e,t){for(var n,r="",i="",a=0,s=0;s<e.length;s++)if(void 0!==(n=t[e.charCodeAt(s)])){for(var o=0;o<n.length;o++)i+=String.fromCharCode(n[o]);r+=e.slice(a,s)+i,a=s+1,i=""}return r+e.slice(a,e.length)}},{"@babel/runtime/helpers/extends":64,"@babel/runtime/helpers/interopRequireDefault":68}],25:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),r=function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(n,"__esModule",{value:!0}),n.TextReader=void 0,r(e("./IntSize"))),o=e("./IonCatalog"),l=e("./IonDecimal"),u=e("./IonLocalSymbolTable"),c=e("./IonParserTextRaw"),h=e("./IonSymbols"),f=e("./IonText"),p=e("./IonTimestamp"),_=e("./IonTypes"),d=e("./util"),r=function(){function n(e,t){if((0,i.default)(this,n),!e)throw new Error("a source Span is required to make a reader");this._parser=new c.ParserTextRaw(e),this._depth=0,this._cat=t||new o.Catalog,this._symtab=u.defaultLocalSymbolTable(),this._type=null,this._raw_type=void 0,this._raw=void 0}return(0,a.default)(n,[{key:"load_raw",value:function(){var e=this;void 0===e._raw&&(14===e._raw_type||15===e._raw_type?e._raw=e._parser.get_value_as_uint8array(e._raw_type):e._raw=e._parser.get_value_as_string(e._raw_type))}},{key:"skip_past_container",value:function(){var e,t=this.depth();for(this.stepIn();this.depth()>t;)null===(e=this.next())?this.stepOut():e.isContainer&&!this.isNull()&&this.stepIn()}},{key:"isIVM",value:function(e,t,n){if(0<t)return!1;t="$ion_1_0";if(e.length<t.length||0<n.length)return!1;for(var r=0;r<"$ion_".length;){if("$ion_".charAt(r)!==e.charAt(r))return!1;r++}for(;r<e.length&&"_"!=e.charAt(r);){var i=e.charAt(r);if(i<"0"||"9"<i)return!1;r++}for(r++;r<e.length;){var a=e.charAt(r);if(a<"0"||"9"<a)return!1;r++}if(e!==t)throw new Error("Only Ion version 1.0 is supported.");return!0}},{key:"isLikeIVM",value:function(){return!1}},{key:"position",value:function(){return this._parser.source().position()}},{key:"next",value:function(){if(this._raw=void 0,-1===this._raw_type)return null;-2!==this._raw_type&&!this.isNull()&&this._type&&this._type.isContainer&&this.skip_past_container();for(var e=this._parser;;){if(this._raw_type=e.next(),9===this._raw_type){if(0<this._depth)break;if(this.load_raw(),!this.isIVM(this._raw,this.depth(),this.annotations()))break;this._symtab=u.defaultLocalSymbolTable()}else if(11===this._raw_type){if(0<this._depth)break;if(this.load_raw(),"$ion_1_0"!==this._raw)break}else{if(19!==this._raw_type)break;if(1!==e.annotations().length)break;if(e.annotations()[0].getText()!=h.ion_symbol_table)break;this._type=c.get_ion_type(this._raw_type),this._symtab=h.makeSymbolTable(this._cat,this,this._symtab)}this._raw=void 0,this._raw_type=void 0}return this._type=c.get_ion_type(this._raw_type),this._type}},{key:"stepIn",value:function(){if(!this._type.isContainer)throw new Error("can't step in to a scalar value");if(this.isNull())throw new Error("Can't step into a null container");this._parser.clearFieldName(),this._type=null,this._raw_type=-2,this._depth++}},{key:"stepOut",value:function(){for(this._parser.clearFieldName();-1!=this._raw_type;)this.next();if(this._raw_type=void 0,this._depth<=0)throw new Error("Cannot stepOut any further, already at top level");this._depth--}},{key:"type",value:function(){return this._type}},{key:"depth",value:function(){return this._depth}},{key:"fieldName",value:function(){var e=this._parser.fieldName();if(null!==e&&(9===this._parser.fieldNameType()&&1<e.length&&"$"===e[0])){var t=e.substr(1,e.length);if(+t==+t){t=this._symtab.getSymbolText(Number(t));if(void 0===t)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return t}}return e}},{key:"annotations",value:function(){var n=this;return this._parser.annotations().map(function(e){var t=e.getText();if(null!==t)return t;t=n._symtab.getSymbolText(e.getSid());if(null==t)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return t})}},{key:"isNull",value:function(){return this._type===_.IonTypes.NULL||this._parser.isNull()}},{key:"_stringRepresentation",value:function(){return this.load_raw(),this.isNull()?this._type===_.IonTypes.NULL?"null":"null."+this._type.name:this._raw}},{key:"booleanValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.BOOL:return this._parser.booleanValue()}throw new Error("Current value is not a Boolean.")}},{key:"uInt8ArrayValue",value:function(){switch(this.load_raw(),this._type){case _.IonTypes.NULL:return null;case _.IonTypes.BLOB:return this.isNull()?null:f.fromBase64(this._raw);case _.IonTypes.CLOB:return this.isNull()?null:this._raw}throw new Error("Current value is not a blob or clob.")}},{key:"decimalValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.DECIMAL:return l.Decimal.parse(this._stringRepresentation())}throw new Error("Current value is not a decimal.")}},{key:"bigIntValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.INT:return this._parser.bigIntValue()}throw new Error("bigIntValue() was called when the current value was a(n) "+this._type.name)}},{key:"intSize",value:function(){return d.isSafeInteger(this.bigIntValue())?s.default.Number:s.default.BigInt}},{key:"numberValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.FLOAT:case _.IonTypes.INT:return this._parser.numberValue()}throw new Error("Current value is not a float or int.")}},{key:"stringValue",value:function(){switch(this.load_raw(),this._type){case _.IonTypes.NULL:return null;case _.IonTypes.STRING:return this._parser.isNull()?null:this._raw;case _.IonTypes.SYMBOL:if(this._parser.isNull())return null;if(9===this._raw_type&&1<this._raw.length&&this._raw.charAt(0)==="$".charAt(0)){var e=this._raw.substr(1,this._raw.length);if(+e==+e){e=Number(e),e=this._symtab.getSymbolText(e);if(void 0===e)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return e}}return this._raw}throw new Error("Current value is not a string or symbol.")}},{key:"timestampValue",value:function(){switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.TIMESTAMP:return p.Timestamp.parse(this._stringRepresentation())}throw new Error("Current value is not a timestamp.")}},{key:"value",value:function(){if(this._type&&this._type.isContainer){if(this.isNull())return null;throw new Error("Unable to provide a value for "+this._type.name+" containers.")}switch(this._type){case _.IonTypes.NULL:return null;case _.IonTypes.BLOB:case _.IonTypes.CLOB:return this.uInt8ArrayValue();case _.IonTypes.BOOL:return this.booleanValue();case _.IonTypes.DECIMAL:return this.decimalValue();case _.IonTypes.INT:return this.bigIntValue();case _.IonTypes.FLOAT:return this.numberValue();case _.IonTypes.STRING:case _.IonTypes.SYMBOL:return this.stringValue();case _.IonTypes.TIMESTAMP:return this.timestampValue();default:throw new Error("There is no current value.")}}}]),n}();n.TextReader=r},{"./IntSize":4,"./IonCatalog":9,"./IonDecimal":11,"./IonLocalSymbolTable":13,"./IonParserTextRaw":16,"./IonSymbols":22,"./IonText":24,"./IonTimestamp":27,"./IonTypes":29,"./util":55,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],26:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/assertThisInitialized")),a=r(e("@babel/runtime/helpers/inherits")),s=r(e("@babel/runtime/helpers/possibleConstructorReturn")),o=r(e("@babel/runtime/helpers/getPrototypeOf")),l=r(e("@babel/runtime/helpers/createClass")),u=r(e("@babel/runtime/helpers/classCallCheck"));function c(e,t){var n,r,i,a,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return r=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==s.return||s.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?h(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,o.default)(n);return e=r?(e=(0,o.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,s.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.TextWriter=n.Context=n.State=void 0;var p,r=e("./AbstractWriter"),_=e("./IonText"),d=e("./IonTypes"),y=e("./IonUnicode"),b=e("./util"),m=((e=p=n.State||(n.State={}))[e.VALUE=0]="VALUE",e[e.STRUCT_FIELD=1]="STRUCT_FIELD",(0,l.default)(function e(t){(0,u.default)(this,e),this.state=t===d.IonTypes.STRUCT?p.STRUCT_FIELD:p.VALUE,this.clean=!0,this.containerType=t})),e=(n.Context=m,function(e){(0,a.default)(r,e);var n=f(r);function r(e){var t;return(0,u.default)(this,r),(t=n.call(this)).writeable=e,t._floatSerializer=function(e){r._serializeFloat((0,i.default)(t),e)},t.containerContext=[new m(null)],t}return(0,l.default)(r,[{key:"isTopLevel",get:function(){return 0===this.depth()}},{key:"currentContainer",get:function(){return this.containerContext[this.depth()]}},{key:"getBytes",value:function(){return this.writeable.getBytes()}},{key:"writeBlob",value:function(e){var t=this;b._assertDefined(e),this._serializeValue(d.IonTypes.BLOB,e,function(e){t.writeable.writeBytes(y.encodeUtf8("{{"+_.toBase64(e)+"}}"))})}},{key:"writeBoolean",value:function(e){var t=this;b._assertDefined(e),this._serializeValue(d.IonTypes.BOOL,e,function(e){t.writeUtf8(e?"true":"false")})}},{key:"writeClob",value:function(e){var o=this;b._assertDefined(e),this._serializeValue(d.IonTypes.CLOB,e,function(e){o.writeUtf8('{{"');for(var t=0;t<e.length;t++){var n=e[t];if(127<n&&n<256)for(var r="\\x"+n.toString(16),i=0;i<r.length;i++)o.writeable.writeByte(r.charCodeAt(i));else{var a=_.ClobEscapes[n];if(void 0===a)if(n<32){r="\\x"+n.toString(16);for(var s=0;s<r.length;s++)o.writeable.writeByte(r.charCodeAt(s))}else o.writeable.writeByte(n);else o.writeable.writeBytes(new Uint8Array(a))}}o.writeUtf8('"}}')})}},{key:"writeDecimal",value:function(e){var o=this;b._assertDefined(e),this._serializeValue(d.IonTypes.DECIMAL,e,function(e){var t,n,r,i="",a=e.getCoefficient(),e=(a<0n&&(a=-a),e.isNegative()&&(i+="-"),e.getExponent()),s=-e;0==e?i+=a.toString()+".":e<0?i=0<=(n=(t=a.toString().length)-1-s)?(r=t-s,(i=i+a.toString().substring(0,r)+".")+a.toString().substring(r,t)):-6<=n?(i=(i+="0.")+"00000".substring(0,s-t))+a.toString():(i=i+a.toString()+"d-")+s.toString():i+=a.toString()+"d"+e,o.writeUtf8(i)})}},{key:"_isInStruct",value:function(){return this.currentContainer.containerType===d.IonTypes.STRUCT}},{key:"writeFieldName",value:function(e){if(b._assertDefined(e),this.currentContainer.containerType!==d.IonTypes.STRUCT)throw new Error("Cannot write field name outside of a struct");if(this.currentContainer.state!==p.STRUCT_FIELD)throw new Error("Expecting a struct value");this.currentContainer.clean||this.writeable.writeByte(_.CharCodes.COMMA),this.writeSymbolToken(e),this.writeable.writeByte(_.CharCodes.COLON),this.currentContainer.state=p.VALUE}},{key:"writeFloat32",value:function(e){b._assertDefined(e),this._writeFloat(e)}},{key:"writeFloat64",value:function(e){b._assertDefined(e),this._writeFloat(e)}},{key:"writeInt",value:function(e){var t=this;b._assertDefined(e),this._serializeValue(d.IonTypes.INT,e,function(e){t.writeUtf8(e.toString(10))})}},{key:"_writeNull",value:function(e){e===d.IonTypes.NULL?this.writeUtf8("null"):this.writeUtf8("null."+e.name)}},{key:"writeNull",value:function(e){null==e&&(e=d.IonTypes.NULL),this.handleSeparator(),this.writeAnnotations(),this._writeNull(e),this.currentContainer.containerType===d.IonTypes.STRUCT&&(this.currentContainer.state=p.STRUCT_FIELD)}},{key:"writeString",value:function(e){var t=this;b._assertDefined(e),this._serializeValue(d.IonTypes.STRING,e,function(e){t.writeable.writeBytes(y.encodeUtf8('"'+_.escape(e,_.StringEscapes)+'"'))})}},{key:"writeSymbol",value:function(e){var t=this;b._assertDefined(e),this._serializeValue(d.IonTypes.SYMBOL,e,function(e){t.writeSymbolToken(e)})}},{key:"writeTimestamp",value:function(e){var t=this;b._assertDefined(e),this._serializeValue(d.IonTypes.TIMESTAMP,e,function(e){t.writeUtf8(e.toString())})}},{key:"stepIn",value:function(e){if(this.currentContainer.state===p.STRUCT_FIELD)throw new Error("Started writing a ".concat(this.currentContainer.containerType.name,' inside a struct"\n                + " without writing the field name first. Call writeFieldName(string) with the desired name"\n                + " before calling stepIn(').concat(this.currentContainer.containerType.name,")."));switch(e){case d.IonTypes.LIST:this.writeContainer(e,_.CharCodes.LEFT_BRACKET);break;case d.IonTypes.SEXP:this.writeContainer(e,_.CharCodes.LEFT_PARENTHESIS);break;case d.IonTypes.STRUCT:if(void 0!==this._annotations&&"$ion_symbol_table"===this._annotations[0]&&0===this.depth())throw new Error("Unable to alter symbol table context, it allows invalid ion to be written.");this.writeContainer(e,_.CharCodes.LEFT_BRACE);break;default:throw new Error("Unrecognized container type")}}},{key:"stepOut",value:function(){var e=this.containerContext.pop();if(!e||!e.containerType)throw new Error("Can't step out when not in a container");if(e.containerType===d.IonTypes.STRUCT&&e.state===p.VALUE)throw new Error("Expecting a struct value");switch(e.containerType){case d.IonTypes.LIST:this.writeable.writeByte(_.CharCodes.RIGHT_BRACKET);break;case d.IonTypes.SEXP:this.writeable.writeByte(_.CharCodes.RIGHT_PARENTHESIS);break;case d.IonTypes.STRUCT:this.writeable.writeByte(_.CharCodes.RIGHT_BRACE);break;default:throw new Error("Unexpected container TypeCode")}}},{key:"close",value:function(){if(0<this.depth())throw new Error("Writer has one or more open containers; call stepOut() for each container prior to close()")}},{key:"depth",value:function(){return this.containerContext.length-1}},{key:"_serializeValue",value:function(e,t,n){if(this.currentContainer.state===p.STRUCT_FIELD)throw new Error("Expecting a struct field");null===t?this.writeNull(e):(this.handleSeparator(),this.writeAnnotations(),n(t),this.currentContainer.containerType===d.IonTypes.STRUCT&&(this.currentContainer.state=p.STRUCT_FIELD))}},{key:"writeContainer",value:function(e,t){this.currentContainer.containerType===d.IonTypes.STRUCT&&this.currentContainer.state===p.VALUE&&(this.currentContainer.state=p.STRUCT_FIELD),this.handleSeparator(),this.writeAnnotations(),this.writeable.writeByte(t),this._stepIn(e)}},{key:"handleSeparator",value:function(){if(0===this.depth())this.currentContainer.clean?this.currentContainer.clean=!1:this.writeable.writeByte(_.CharCodes.LINE_FEED);else if(this.currentContainer.clean)this.currentContainer.clean=!1;else switch(this.currentContainer.containerType){case d.IonTypes.LIST:this.writeable.writeByte(_.CharCodes.COMMA);break;case d.IonTypes.SEXP:this.writeable.writeByte(_.CharCodes.SPACE)}}},{key:"writeUtf8",value:function(e){this.writeable.writeBytes(y.encodeUtf8(e))}},{key:"writeAnnotations",value:function(){var e,t=c(this._annotations);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.writeSymbolToken(n),this.writeUtf8("::")}}catch(e){t.e(e)}finally{t.f()}this._clearAnnotations()}},{key:"_stepIn",value:function(e){this.containerContext.push(new m(e))}},{key:"writeSymbolToken",value:function(e){0===e.length||_.is_keyword(e)||this.isSid(e)||!_.isIdentifier(e)&&!_.isOperator(e)||_.isOperator(e)&&this.currentContainer.containerType!=d.IonTypes.SEXP?this.writeable.writeBytes(y.encodeUtf8("'"+_.escape(e,_.SymbolEscapes)+"'")):this.writeUtf8(e)}},{key:"_writeFloat",value:function(e){this._serializeValue(d.IonTypes.FLOAT,e,this._floatSerializer)}},{key:"isSid",value:function(e){return 1<e.length&&e.charAt(0)==="$".charAt(0)&&+(e=e.substr(1,e.length))==+e}}],[{key:"_serializeFloat",value:function(e,t){var n;t===Number.POSITIVE_INFINITY?n="+inf":t===Number.NEGATIVE_INFINITY?n="-inf":Object.is(t,Number.NaN)?n="nan":Object.is(t,-0)?n="-0e0":-1<(t=(n=t.toExponential()).lastIndexOf("+"))&&(n=n.slice(0,t)+n.slice(t+1)),e.writeUtf8(n)}}]),r}(r.AbstractWriter));n.TextWriter=e},{"./AbstractWriter":1,"./IonText":24,"./IonTypes":29,"./IonUnicode":30,"./util":55,"@babel/runtime/helpers/assertThisInitialized":59,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],27:[function(e,t,n){"use strict";var c,b,r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("@babel/runtime/helpers/slicedToArray")),h=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),m=(Object.defineProperty(n,"__esModule",{value:!0}),n.Timestamp=n.TimestampPrecision=void 0,e("./IonDecimal")),o=e("./IonText"),l=e("./util"),v=((r=c=n.TimestampPrecision||(n.TimestampPrecision={}))[r.YEAR=1]="YEAR",r[r.MONTH=2]="MONTH",r[r.DAY=3]="DAY",r[r.HOUR_AND_MINUTE=4]="HOUR_AND_MINUTE",r[r.SECONDS=5]="SECONDS",function(){function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null;if((0,h.default)(this,u),e instanceof Date){var o=e,l=0===o.getMilliseconds()?new m.Decimal(o.getSeconds(),0):new m.Decimal(1e3*o.getSeconds()+o.getMilliseconds(),-3);this._localOffset=-1*o.getTimezoneOffset(),this._year=o.getFullYear(),this._month=o.getMonth()+1,this._day=o.getDate(),this._hour=o.getHours(),this._minutes=o.getMinutes(),this._secondsDecimal=l,this._precision=c.YEAR}else{o=e;if(null===o)throw new Error("Timestamp's constructor was called without localOffset");if(null===t)throw new Error("Timestamp's constructor was called without year");if(this._localOffset=o,this._year=t,this._precision=c.YEAR,this._checkRequiredField("Offset",this._localOffset,u._MIN_OFFSET,u._MAX_OFFSET),this._checkRequiredField("Year",this._year,u._MIN_YEAR,u._MAX_YEAR),this._month=this._checkOptionalField("Month",n,u._MIN_MONTH,u._MAX_MONTH,1,c.MONTH),this._day=this._checkOptionalField("Day",r,u._MIN_DAY,u._MAX_DAY,1,c.DAY),this._hour=this._checkOptionalField("Hour",i,u._MIN_HOUR,u._MAX_HOUR,0,c.HOUR_AND_MINUTE),this._minutes=this._checkOptionalField("Minutes",a,u._MIN_MINUTE,u._MAX_MINUTE,0,c.HOUR_AND_MINUTE),"number"==typeof s){if(!Number.isInteger(s))throw new Error("The provided seconds number was not an integer ("+s+")");this._secondsDecimal=new m.Decimal(s,0)}else null!==s&&(this._secondsDecimal=s)}if(null===this._secondsDecimal||void 0===this._secondsDecimal?this._secondsDecimal=m.Decimal.ZERO:(this._checkFieldRange("Seconds",this._secondsDecimal,u._MIN_SECONDS,u._MAX_SECONDS),this._precision=c.SECONDS),this._precision<=c.DAY&&(this._localOffset=-0),this._precision>c.MONTH){l=new Date(this._year,this._month,0);if(l.setUTCFullYear(this._year),this._day>l.getDate())throw new Error("Month ".concat(this._month," has less than ").concat(this._day," days"));if(2===this._month&&29===this._day&&!this._isLeapYear(this._year))throw new Error("Given February 29th but year ".concat(this._year," is not a leap year"))}e=this.getDate().getUTCFullYear();this._checkFieldRange("Year",e,u._MIN_YEAR,u._MAX_YEAR)}return(0,a.default)(u,[{key:"getLocalOffset",value:function(){return this._localOffset}},{key:"getPrecision",value:function(){return this._precision}},{key:"getDate",value:function(){var e=0,e=(this._precision===c.SECONDS&&(e=Math.round(1e3*(this._secondsDecimal.numberValue()-this.getSecondsInt()))),Date.UTC(this._year,this._precision===c.YEAR?0:this._month-1,this._day,this._hour,this._minutes,this.getSecondsInt(),e)),e=u._adjustMsSinceEpochIfNeeded(this._year,e),t=60*this._localOffset*1e3;return new Date(e-t)}},{key:"getSecondsInt",value:function(){return this._secondsDecimal.intValue()}},{key:"getSecondsDecimal",value:function(){return this._secondsDecimal}},{key:"_getFractionalSeconds",value:function(){var e=u._splitSecondsDecimal(this._secondsDecimal),e=(0,s.default)(e,2),e=(e[0],e[1]);return""===e?m.Decimal.ZERO:m.Decimal.parse(e+"d-"+e.length)}},{key:"equals",value:function(e){return this.getPrecision()===e.getPrecision()&&this.getLocalOffset()===e.getLocalOffset()&&l._sign(this.getLocalOffset())===l._sign(e.getLocalOffset())&&0===this.compareTo(e)&&this._secondsDecimal.equals(e._secondsDecimal)}},{key:"compareTo",value:function(e){var t=this.getDate().getTime(),n=e.getDate().getTime();return t===n?this.getSecondsDecimal().compareTo(e.getSecondsDecimal()):t<n?-1:1}},{key:"toString",value:function(){var e="";switch(this._precision){default:throw new Error("unrecognized timestamp precision "+this._precision);case c.SECONDS:var t=u._splitSecondsDecimal(this._secondsDecimal),t=(0,s.default)(t,2),n=t[0],t=t[1],e=this._lpadZeros(n,2);0<t.length&&(e+="."+t);case c.HOUR_AND_MINUTE:e=this._lpadZeros(this._minutes,2)+(e?":"+e:""),e=this._lpadZeros(this._hour,2)+(e?":"+e:"");case c.DAY:e=this._lpadZeros(this._day,2)+(e?"T"+e:"T");case c.MONTH:e=this._lpadZeros(this._month,2)+(e?"-"+e:"");case c.YEAR:e=this._precision===c.YEAR?this._lpadZeros(this._year,4)+"T":this._precision===c.MONTH?this._lpadZeros(this._year,4)+"-"+e+"T":this._lpadZeros(this._year,4)+"-"+e}var r=this._localOffset;return this._precision>c.DAY&&(0===r&&1===l._sign(r)?e+="Z":e+=(-1===l._sign(r)?"-":"+")+this._lpadZeros(Math.floor(Math.abs(r)/60),2)+":"+this._lpadZeros(Math.abs(r)%60,2)),e}},{key:"toJSON",value:function(){return this.getDate().toISOString()}},{key:"_checkRequiredField",value:function(e,t,n,r){if(!l._hasValue(t))throw new Error("".concat(e," cannot be ").concat(t));this._checkFieldRange(e,t,n,r)}},{key:"_checkOptionalField",value:function(e,t,n,r,i,a){return l._hasValue(t)?(this._checkFieldRange(e,t,n,r),this._precision=a,t):i}},{key:"_checkFieldRange",value:function(e,t,n,r){if(t instanceof m.Decimal){if(l._hasValue(t)&&(t.compareTo(n)<0||0<=t.compareTo(r)))throw new Error("".concat(e," ").concat(t," must be between ").concat(n," inclusive, and ").concat(r," exclusive"))}else{if(!Number.isInteger(t))throw new Error("".concat(e," ").concat(t," must be an integer"));if(t<n||r<t)throw new Error("".concat(e," ").concat(t," must be between ").concat(n," and ").concat(r," inclusive"))}}},{key:"_isLeapYear",value:function(e){return e%4==0&&(e%400==0||e%100!=0||e<1600)}},{key:"_lpadZeros",value:function(e,t){e=e.toString();if(e.length<=t)return"0".repeat(t-e.length)+e;throw new Error("Unable to fit '"+e+"' into "+t+" characters")}}],[{key:"parse",value:function(e){return f._parse(e)}},{key:"_adjustMsSinceEpochIfNeeded",value:function(e,t){return 100<=e?t:((t=new Date(t)).setUTCFullYear(e),t.getTime())}},{key:"_splitSecondsDecimal",value:function(e){var t,n=e.getCoefficient().toString(),r=e.getExponent(),i="",a="";return r<0?(t=Math.max(n.length+r,0),i=n.substring(0,t),a=n.substring(t),0<-e.getExponent()-n.length&&(a="0".repeat(-r-n.length)+a)):i=0<r?n+"0".repeat(r):n,[i,a]}},{key:"_valueOf",value:function(e,t,n,r){var i,a=e.getTime()+60*t*1e3;switch(e=new Date(a),i=null!=n?(a=u._splitSecondsDecimal(n),(n=(0,s.default)(a,2))[0],a=n[1],m.Decimal.parse(e.getUTCSeconds()+"."+a)):m.Decimal.parse(e.getUTCSeconds()+"."+e.getUTCMilliseconds()),r){case c.YEAR:return new u(t,e.getUTCFullYear());case c.MONTH:return new u(t,e.getUTCFullYear(),e.getUTCMonth()+1);case c.DAY:return new u(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate());case c.HOUR_AND_MINUTE:return new u(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes());default:c.SECONDS;return new u(t,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),i)}}}]),u}()),r=((n.Timestamp=v)._MIN_SECONDS=m.Decimal.ZERO,v._MAX_SECONDS=m.Decimal.parse("60"),v._MIN_MINUTE=0,v._MAX_MINUTE=59,v._MIN_HOUR=0,v._MAX_HOUR=23,v._MIN_DAY=1,v._MAX_DAY=31,v._MIN_MONTH=1,v._MAX_MONTH=12,v._MIN_YEAR=1,v._MAX_YEAR=9999,v._MIN_OFFSET=-1439,v._MAX_OFFSET=1439,(e=b=b||{})[e.YEAR=0]="YEAR",e[e.MONTH=1]="MONTH",e[e.DAY=2]="DAY",e[e.HOUR=3]="HOUR",e[e.MINUTE=4]="MINUTE",e[e.SECONDS=5]="SECONDS",e[e.FRACTIONAL_SECONDS=6]="FRACTIONAL_SECONDS",e[e.OFFSET_POSITIVE=7]="OFFSET_POSITIVE",e[e.OFFSET_NEGATIVE=8]="OFFSET_NEGATIVE",e[e.OFFSET_MINUTES=9]="OFFSET_MINUTES",e[e.OFFSET_ZULU=10]="OFFSET_ZULU",e[e.OFFSET_UNKNOWN=11]="OFFSET_UNKNOWN",(0,a.default)(function e(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;(0,h.default)(this,e),this.f=t,this.len=n,this.t=r})),f=function(){function y(){(0,h.default)(this,y)}return(0,a.default)(y,null,[{key:"_parse",value:function(e){if(e.length<1)return null;if(110===e.charCodeAt(0)){if("null"===e||"null.timestamp"===e)return null;throw new Error("Illegal timestamp: "+e)}for(var t,n,r,i=null,a=0,s=null,o=null,l=null,u=null,c=null,h="",f=0,p=y._timeParserStates[b.YEAR],_=e.length;f<_;){if(null===p.len){var d=y._readUnknownDigits(e,f);if(0===d.length)throw new Error("No digits found at pos: "+f);n=parseInt(d,10),f+=d.length}else if(0<p.len){if((n=y._readDigits(e,f,p.len))<0)throw new Error("Non-digit value found at pos "+f);f+=p.len}switch(p.f){case b.YEAR:a=n;break;case b.MONTH:s=n;break;case b.DAY:o=n;break;case b.HOUR:l=n;break;case b.MINUTE:u=n;break;case b.SECONDS:c=n;break;case b.FRACTIONAL_SECONDS:h=e.substring(20,f);break;case b.OFFSET_POSITIVE:t=1,i=60*n;break;case b.OFFSET_NEGATIVE:t=-1,i=60*n;break;case b.OFFSET_MINUTES:if(i+=n,60<=n)throw new Error("Minute offset "+String(n)+" above maximum or equal to : 60");break;case b.OFFSET_ZULU:t=1,i=0;break;case b.OFFSET_UNKNOWN:i=-0;break;default:throw new Error("invalid internal state")}if(_<=f)break;if(null!==p.t){d=String.fromCharCode(e.charCodeAt(f));if(void 0===(p=y._timeParserStates[p.t[d]]))throw new Error("State was not set pos:"+f);p.f===b.OFFSET_ZULU&&(t=1,i=0)}f++}if(null===i){if(null!==u)throw new Error('invalid timestamp, missing local offset: "'+e+'"');i=-0}else i*=t;return null==c&&!h||(r=m.Decimal.parse(c+"."+(h||""))),new v(i,a,s,o,l,u,r)}},{key:"_readUnknownDigits",value:function(e,t){for(var n=t;n<e.length&&o.isDigit(e.charCodeAt(n));n++);return e.substring(t,n)}},{key:"_readDigits",value:function(e,t,n){for(var r=0,i=t;i<t+n;i++){var a=e.charCodeAt(i)-48;if(a<0&&9<a)return-1;r=10*r+a}return r}}]),y}();f._timeParserStates=((0,i.default)(n={},b.YEAR,new r(b.YEAR,4,{T:b.OFFSET_UNKNOWN,"-":b.MONTH})),(0,i.default)(n,b.MONTH,new r(b.MONTH,2,{T:b.OFFSET_UNKNOWN,"-":b.DAY})),(0,i.default)(n,b.DAY,new r(b.DAY,2,{T:b.HOUR})),(0,i.default)(n,b.HOUR,new r(b.HOUR,2,{":":b.MINUTE})),(0,i.default)(n,b.MINUTE,new r(b.MINUTE,2,{":":b.SECONDS,"+":b.OFFSET_POSITIVE,"-":b.OFFSET_NEGATIVE,Z:b.OFFSET_ZULU})),(0,i.default)(n,b.SECONDS,new r(b.SECONDS,2,{".":b.FRACTIONAL_SECONDS,"+":b.OFFSET_POSITIVE,"-":b.OFFSET_NEGATIVE,Z:b.OFFSET_ZULU})),(0,i.default)(n,b.FRACTIONAL_SECONDS,new r(b.FRACTIONAL_SECONDS,null,{"+":b.OFFSET_POSITIVE,"-":b.OFFSET_NEGATIVE,Z:b.OFFSET_ZULU})),(0,i.default)(n,b.OFFSET_POSITIVE,new r(b.OFFSET_POSITIVE,2,{":":b.OFFSET_MINUTES})),(0,i.default)(n,b.OFFSET_NEGATIVE,new r(b.OFFSET_NEGATIVE,2,{":":b.OFFSET_MINUTES})),(0,i.default)(n,b.OFFSET_MINUTES,new r(b.OFFSET_MINUTES,2)),(0,i.default)(n,b.OFFSET_ZULU,new r(b.OFFSET_ZULU,0)),(0,i.default)(n,b.OFFSET_UNKNOWN,new r(b.OFFSET_UNKNOWN,0)),n)},{"./IonDecimal":11,"./IonText":24,"./util":55,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/defineProperty":63,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/slicedToArray":77}],28:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/classCallCheck")),r=(Object.defineProperty(n,"__esModule",{value:!0}),(n.IonType=void 0,i.default)(function e(t,n,r,i,a,s){(0,o.default)(this,e),this.binaryTypeId=t,this.name=n,this.isScalar=r,this.isLob=i,this.isNumeric=a,this.isContainer=s}));n.IonType=r},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IonTypes=void 0;e=e("./IonType");n.IonTypes={NULL:new e.IonType(0,"null",!0,!1,!1,!1),BOOL:new e.IonType(1,"bool",!0,!1,!1,!1),INT:new e.IonType(2,"int",!0,!1,!0,!1),FLOAT:new e.IonType(4,"float",!0,!1,!0,!1),DECIMAL:new e.IonType(5,"decimal",!0,!1,!1,!1),TIMESTAMP:new e.IonType(6,"timestamp",!0,!1,!1,!1),SYMBOL:new e.IonType(7,"symbol",!0,!1,!1,!1),STRING:new e.IonType(8,"string",!0,!1,!1,!1),CLOB:new e.IonType(9,"clob",!0,!0,!1,!1),BLOB:new e.IonType(10,"blob",!0,!0,!1,!1),LIST:new e.IonType(11,"list",!1,!1,!1,!0),SEXP:new e.IonType(12,"sexp",!1,!1,!1,!0),STRUCT:new e.IonType(13,"struct",!1,!1,!1,!0)}},{"./IonType":28}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.decodeUtf8=n.encodeUtf8=void 0;var i;i="undefined"!=typeof TextDecoder?new TextDecoder("utf8",{fatal:!0}):null,n.encodeUtf8=function(e){for(var t,n=0,r=new Uint8Array(4*e.length),i=0;i<e.length;i++)if((t=e.charCodeAt(i))<128)r[n++]=t;else{if(t<2048)r[n++]=t>>6|192;else{if(55295<t&&t<56320){if(++i>=e.length)throw new Error("UTF-8 encode: incomplete surrogate pair");var a=e.charCodeAt(i);if(a<56320||57343<a)throw new Error("UTF-8 encode: second surrogate character 0x"+a.toString(16)+" at index "+i+" out of range");r[n++]=(t=65536+((1023&t)<<10)+(1023&a))>>18|240,r[n++]=t>>12&63|128}else r[n++]=t>>12|224;r[n++]=t>>6&63|128}r[n++]=63&t|128}return r.subarray(0,n)},n.decodeUtf8=function(e){if(512<e.length&&null!=i)return i.decode(e);for(var t,n=0,r="";n<e.length;){if(127<(t=e[n++]))if(191<t&&t<224){if(n>=e.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");t=(31&t)<<6|63&e[n++]}else if(223<t&&t<240){if(n+1>=e.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");t=(15&t)<<12|(63&e[n++])<<6|63&e[n++]}else{if(!(239<t&&t<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+t.toString(16)+" at index "+(n-1));if(n+2>=e.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");t=(7&t)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}if(t<=65535)r+=String.fromCharCode(t);else{if(!(t<=1114111))throw new Error("UTF-8 decode: code point 0x"+t.toString(16)+" exceeds UTF-16 reach");t-=65536,r=(r+=String.fromCharCode(t>>10|55296))+String.fromCharCode(1023&t|56320)}}return r}},{}],31:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),r=(Object.defineProperty(n,"__esModule",{value:!0}),n.Writeable=void 0,function(){function t(e){(0,i.default)(this,t),this.bufferSize=e||4096,this.buffers=[new Uint8Array(this.bufferSize)],this.index=0,this.clean=!1}return(0,a.default)(t,[{key:"currentBuffer",get:function(){return this.buffers[this.buffers.length-1]}},{key:"totalSize",get:function(){for(var e=0,t=0;t<this.buffers.length-1;t++)e+=this.buffers[t].length;return e+this.index}},{key:"writeByte",value:function(e){this.clean=!1,this.currentBuffer[this.index]=e,this.index++,this.index===this.bufferSize&&(this.buffers.push(new Uint8Array(this.bufferSize)),this.index=0)}},{key:"writeBytes",value:function(e,t,n){void 0===t&&(t=0);var r=void 0!==n?Math.min(e.length-t,n):e.length-t;r<this.currentBuffer.length-this.index-1?(this.currentBuffer.set(e.subarray(t,t+r),this.index),this.index+=r):(this.buffers[this.buffers.length-1]=this.currentBuffer.slice(0,this.index),this.buffers.push(e.subarray(t,n)),this.buffers.push(new Uint8Array(this.bufferSize)),this.clean=!1,this.index=0)}},{key:"getBytes",value:function(){if(this.clean)return this.buffers[0];for(var e=new Uint8Array(this.totalSize),t=0,n=0;n<this.buffers.length-1;n++)e.set(this.buffers[n],t),t+=this.buffers[n].length;return e.set(this.currentBuffer.subarray(0,this.index),t),this.buffers=[e,new Uint8Array(this.bufferSize)],this.index=0,this.clean=!0,e}}]),t}());n.Writeable=r},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],32:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass"));Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e<0n;(0,i.default)(this,n),this._magnitude=e,this._isNegative=t}return(0,a.default)(n,[{key:"magnitude",get:function(){return this._magnitude}},{key:"isNegative",get:function(){return this._isNegative}},{key:"equals",value:function(e){return this._magnitude===e._magnitude&&this._isNegative===e._isNegative}}],[{key:"fromNumber",value:function(e){var t=e<0||Object.is(e,-0),e=Math.abs(e);return new n(BigInt(e),t)}}]),n}()},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],33:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Blob=void 0;var c=e("../Ion"),r=function(e){(0,s.default)(r,e);var n=u(r);function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,i.default)(this,r),n.call(this,e,t)}return(0,a.default)(r,[{key:"toJSON",value:function(){return c.toBase64(this)}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeBlob(this)}}]),r}(e("./Lob").Lob(c.IonTypes.BLOB));n.Blob=r},{"../Ion":5,"./Lob":42,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],34:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Boolean=void 0;var r=e("../Ion"),c=e("./FromJsConstructor"),h=e("./JsValueConversion"),e=e("./Value"),c=(new c.FromJsConstructorBuilder).withPrimitives(c.Primitives.Boolean).withClassesToUnbox(h._NativeJsBoolean).build(),f=function(e){(0,s.default)(r,e);var n=u(r);function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,i.default)(this,r),(e=n.call(this,e))._setAnnotations(t),e}return(0,a.default)(r,[{key:"booleanValue",value:function(){return this.valueOf()}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeBoolean(this.booleanValue())}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0},n=!1,r=null;return e instanceof f?(n=!0,r=e.booleanValue()):t.onlyCompareIon||("boolean"==typeof e||e instanceof h._NativeJsBoolean)&&(n=!0,r=e.valueOf()),!!n&&this.booleanValue()===r}}]),r}(e.Value(h._NativeJsBoolean,r.IonTypes.BOOL,c));n.Boolean=f},{"../Ion":5,"./FromJsConstructor":38,"./JsValueConversion":40,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],35:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(e,t){var n,r,i,a,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return r=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==s.return||s.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?c(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Clob=void 0;r=e("../Ion"),e=function(e){(0,s.default)(r,e);var n=h(r);function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,i.default)(this,r),n.call(this,e,t)}return(0,a.default)(r,[{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeClob(this)}},{key:"toJSON",value:function(){var e,t="",n=u(this);try{for(n.s();!(e=n.n()).done;){var r,i=e.value;32<=i&&i<=126?t+=String.fromCharCode(i):1==(r=i.toString(16)).length?t+="\\u000"+r:t+="\\u00"+r}}catch(e){n.e(e)}finally{n.f()}return t}}]),r}(e("./Lob").Lob(r.IonTypes.CLOB));n.Clob=e},{"../Ion":5,"./Lob":42,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],36:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/inherits")),u=r(e("@babel/runtime/helpers/possibleConstructorReturn")),i=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,i.default)(n);return e=r?(e=(0,i.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var a=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},h=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return h(t,e),t},f=(Object.defineProperty(n,"__esModule",{value:!0}),n.Decimal=void 0,r(e("../Ion"))),r=e("../Ion"),p=e("./FromJsConstructor"),_=e("./Value"),d=e("./Float"),e=(new p.FromJsConstructorBuilder).withClasses(f.Decimal).build(),p=function(e){(0,l.default)(a,e);var i=c(a);function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if((0,s.default)(this,a),"string"==typeof e){var n,r=Number(e);(n=i.call(this,r))._decimalValue=new f.Decimal(e),n._numberValue=r}else if(e instanceof f.Decimal)(n=i.call(this,e.numberValue()))._decimalValue=e,n._numberValue=e.numberValue();else{if("number"!=typeof e)throw new Error("Decimal value can only be created from number, ion.Decimal or string");(n=i.call(this,e))._decimalValue=new f.Decimal(""+e),n._numberValue=e}return n._setAnnotations(t),(0,u.default)(n)}return(0,o.default)(a,[{key:"numberValue",value:function(){return this._numberValue}},{key:"decimalValue",value:function(){return this._decimalValue}},{key:"toString",value:function(){return this._decimalValue.toString()}},{key:"valueOf",value:function(){return this._numberValue}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeDecimal(this.decimalValue())}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0,coerceNumericType:!1},n=!1,r=null;return e instanceof a?(n=!0,r=e.decimalValue()):!0===t.coerceNumericType&&e instanceof d.Float?(n=!0,r=new f.Decimal(e.toString())):t.onlyCompareIon||(e instanceof f.Decimal?(n=!0,r=e):(e instanceof Number||"number"==typeof e)&&(n=!0,r=new f.Decimal(e.toString()))),!!n&&this.decimalValue().equals(r)}}]),a}(_.Value(Number,r.IonTypes.DECIMAL,e));n.Decimal=p},{"../Ion":5,"./Float":37,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],37:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var c=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},h=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&c(t,e,n);return h(t,e),t},f=(Object.defineProperty(n,"__esModule",{value:!0}),n.Float=void 0,e("../Ion")),p=e("./FromJsConstructor"),_=e("./Value"),d=e("./Decimal"),y=r(e("../Ion")),r=(new p.FromJsConstructorBuilder).withPrimitives(p.Primitives.Number).withClassesToUnbox(Number).build(),e=function(e){(0,o.default)(i,e);var n=u(i);function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,a.default)(this,i),(e=n.call(this,e))._setAnnotations(t),e}return(0,s.default)(i,[{key:"numberValue",value:function(){return+this.valueOf()}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeFloat64(this.numberValue())}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0,coerceNumericType:!1},n=!1,r=null;if(e instanceof i)n=!0,r=e.numberValue();else{if(!0===t.coerceNumericType&&e instanceof d.Decimal)return new y.Decimal(e.toString()).equals(e.decimalValue());t.onlyCompareIon||(e instanceof Number||"number"==typeof e)&&(n=!0,r=e.valueOf())}return!!n&&(e=Object.is(this.numberValue(),r),!(null==t.epsilon||!(e||Math.abs(this.numberValue()-r)<=t.epsilon))||e)}}]),i}(_.Value(Number,f.IonTypes.FLOAT,r));n.Float=e},{"../Ion":5,"./Decimal":36,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],38:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/typeof")),a=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.Primitives=n.FromJsConstructor=n.FromJsConstructorBuilder=void 0,e("../Ion")),l=e("../util");function u(e){return l._hasValue(e)?new Set(e):new Set}var r=function(){function e(){(0,a.default)(this,e),this._primitives=u(),this._classesToUnbox=u(),this._classes=u()}return(0,s.default)(e,[{key:"withPrimitives",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._primitives=u(t),this}},{key:"withClasses",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._classes=u(t),this}},{key:"withClassesToUnbox",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._classesToUnbox=u(t),this}},{key:"build",value:function(){return new c(this._primitives,this._classesToUnbox,this._classes)}}]),e}(),c=(n.FromJsConstructorBuilder=r,function(){function r(e,t,n){(0,a.default)(this,r),this._primitives=e,this._classesToUnbox=t,this._classes=n}return(0,s.default)(r,[{key:"construct",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(null===t)return new o.dom.Null(o.IonTypes.NULL,n);var r=(0,i.default)(t);if("object"===r){if(this._classesToUnbox.has(t.constructor))return new e(t.valueOf(),n);if(this._classes.has(t.constructor))return new e(t,n);throw new Error("Unable to construct a(n) ".concat(e.name," from a ").concat(t.constructor.name,"."))}if(this._primitives.has(r))return new e(t,n);throw new Error("Unable to construct a(n) ".concat(e.name," from a ").concat(r,"."))}}]),r}());n.FromJsConstructor=c,(c=n.FromJsConstructor||(n.FromJsConstructor={})).NONE=(new r).build(),n.Primitives={Boolean:"boolean",Number:"number",String:"string",BigInt:"bigint"}},{"../Ion":5,"../util":55,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/typeof":82}],39:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/inherits")),u=r(e("@babel/runtime/helpers/possibleConstructorReturn")),i=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,i.default)(n);return e=r?(e=(0,i.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Integer=void 0;var r=e("../Ion"),a=e("./FromJsConstructor"),e=e("./Value"),h=BigInt,a=(new a.FromJsConstructorBuilder).withPrimitives(a.Primitives.Number,a.Primitives.BigInt).withClassesToUnbox(Number).withClasses(h).build(),h=function(e){(0,l.default)(a,e);var i=c(a);function a(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,s.default)(this,a),"number"==typeof e?((n=i.call(this,e))._numberValue=e,n._bigIntValue=null):(t=Number(e),(n=i.call(this,t))._bigIntValue=e,n._numberValue=t),n._setAnnotations(r),(0,u.default)(n)}return(0,o.default)(a,[{key:"bigIntValue",value:function(){return null===this._bigIntValue&&(this._bigIntValue=BigInt(this.numberValue())),this._bigIntValue}},{key:"numberValue",value:function(){return this._numberValue}},{key:"toString",value:function(){return(null===this._bigIntValue?this._numberValue:this._bigIntValue).toString()}},{key:"valueOf",value:function(){return this.numberValue()}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),null===this._bigIntValue?e.writeInt(this.numberValue()):e.writeInt(this._bigIntValue)}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0},n=!1,r=null;return e instanceof a?(n=!0,r=null==this._bigIntValue&&null==e._bigIntValue?e.numberValue():e.bigIntValue()):t.onlyCompareIon||(e instanceof Number||"number"==typeof e?(n=!0,r=null==this.bigIntValue?e.valueOf():BigInt(e.valueOf())):"bigint"==typeof e&&(n=!0,r=e)),!!n&&("bigint"==typeof r?this.bigIntValue()===r:this.numberValue()==r)}}]),a}(e.Value(Number,r.IonTypes.INT,a));n.Integer=h},{"../Ion":5,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],40:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/typeof")),i=(Object.defineProperty(n,"__esModule",{value:!0}),n._ionValueFromJsValue=n._domConstructorFor=n._NativeJsString=n._NativeJsBoolean=void 0,e("../Ion")),a=e("../IonTypes"),s=e("../util"),o=(n._NativeJsBoolean=Boolean,n._NativeJsString=String,null);function l(e){var t=(o=null===o?new Map([[a.IonTypes.NULL,i.dom.Null],[a.IonTypes.BOOL,i.dom.Boolean],[a.IonTypes.INT,i.dom.Integer],[a.IonTypes.FLOAT,i.dom.Float],[a.IonTypes.DECIMAL,i.dom.Decimal],[a.IonTypes.TIMESTAMP,i.dom.Timestamp],[a.IonTypes.STRING,i.dom.String],[a.IonTypes.BLOB,i.dom.Blob],[a.IonTypes.LIST,i.dom.List],[a.IonTypes.STRUCT,i.dom.Struct]]):o).get(e);if(s._hasValue(t))return t;throw new Error("No dom type constructor was found for Ion type ".concat(e.name))}n._domConstructorFor=l,n._ionValueFromJsValue=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return l(function(e){if(void 0===e)throw new Error("Cannot create an Ion value from `undefined`.");if(null===e)return a.IonTypes.NULL;var t=(0,r.default)(e);switch(t){case"string":return a.IonTypes.STRING;case"number":return Number.isInteger(e)?a.IonTypes.INT:a.IonTypes.FLOAT;case"boolean":return a.IonTypes.BOOL;case"object":break;case"bigint":return a.IonTypes.INT;default:throw new Error("Value.from() does not support the JS primitive type ".concat(t,"."))}return e instanceof BigInt?a.IonTypes.INT:e instanceof Number?Number.isInteger(e.valueOf())?a.IonTypes.INT:a.IonTypes.FLOAT:e instanceof Boolean?a.IonTypes.BOOL:e instanceof String?a.IonTypes.STRING:e instanceof i.Decimal?a.IonTypes.DECIMAL:e instanceof Date||e instanceof i.Timestamp?a.IonTypes.TIMESTAMP:e instanceof Uint8Array?a.IonTypes.BLOB:e instanceof Array?a.IonTypes.LIST:a.IonTypes.STRUCT}(e))._fromJsValue(e,t)}},{"../Ion":5,"../IonTypes":29,"../util":55,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/typeof":82}],41:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.List=void 0;r=e("../Ion"),e=function(e){(0,s.default)(r,e);var n=u(r);function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,a.default)(this,r),n.call(this,e,t)}return(0,i.default)(r)}(e("./Sequence").Sequence(r.IonTypes.LIST));n.List=e},{"../Ion":5,"./Sequence":45,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],42:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Lob=void 0;var c=e("../Ion"),r=e("./FromJsConstructor"),h=e("./Value"),f=(new r.FromJsConstructorBuilder).withClasses(Uint8Array).build();n.Lob=function(e){return function(e){(0,s.default)(r,e);var n=u(r);function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,i.default)(this,r),(e=n.call(this,e))._setAnnotations(t),e}return(0,a.default)(r,[{key:"uInt8ArrayValue",value:function(){return this}},{key:"_valueEquals",value:function(e){var t=!1,n=null;if((1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0}).onlyCompareIon?e.getType()!==c.IonTypes.CLOB&&e.getType()!==c.IonTypes.BLOB||(t=!0,n=e.uInt8ArrayValue()):e instanceof Uint8Array&&(t=!0,n=e.valueOf()),!t)return!1;var r=this.uInt8ArrayValue(),i=n;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(r[a]!==i[a])return!1;return!0}}]),r}(h.Value(Uint8Array,e,f))}},{"../Ion":5,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],43:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Null=void 0;var c=e("../Ion"),r=e("./FromJsConstructor"),e=function(e){(0,o.default)(i,e);var r=u(i);function i(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.IonTypes.NULL,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,a.default)(this,i),(e=r.call(this))._ionType=t,e._setAnnotations(n),e}return(0,s.default)(i,[{key:"isNull",value:function(){return!0}},{key:"_convertToJsNull",value:function(e){if(i._operationIsSupported(this.getType(),e))return null;throw new Error("".concat(e,"() is not supported by Ion type ").concat(this.getType().name))}},{key:"_unsupportedOperationOrNullDereference",value:function(e){if(i._operationIsSupported(this.getType(),e))throw new Error("".concat(e,"() called on a null ").concat(this.getType().name,"."));throw new Error("".concat(e,"() is not supported by Ion type ").concat(this.getType().name))}},{key:"booleanValue",value:function(){return this._convertToJsNull("booleanValue")}},{key:"numberValue",value:function(){return this._convertToJsNull("numberValue")}},{key:"bigIntValue",value:function(){return this._convertToJsNull("bigIntValue")}},{key:"decimalValue",value:function(){return this._convertToJsNull("decimalValue")}},{key:"stringValue",value:function(){return this._convertToJsNull("stringValue")}},{key:"dateValue",value:function(){return this._convertToJsNull("dateValue")}},{key:"uInt8ArrayValue",value:function(){return this._convertToJsNull("uInt8ArrayValue")}},{key:"fieldNames",value:function(){this._unsupportedOperationOrNullDereference("fieldNames")}},{key:"fields",value:function(){this._unsupportedOperationOrNullDereference("fields")}},{key:"elements",value:function(){this._unsupportedOperationOrNullDereference("elements")}},{key:"get",value:function(){return null}},{key:"toString",value:function(){return this.getType()==c.IonTypes.NULL?"null":"null."+this._ionType.name}},{key:"toJSON",value:function(){return null}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeNull(this.getType())}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0},n=!1,r=null;if(e instanceof i)n=!0,r=e;else if(!t.onlyCompareIon&&null===e&&"null"===this._ionType.name)return!0;return!!n&&this._ionType.name===r._ionType.name}}],[{key:"_operationIsSupported",value:function(e,t){return i._supportedIonTypesByOperation.get(t).has(e)}}]),i}(e("./Value").Value(Object,c.IonTypes.NULL,r.FromJsConstructor.NONE));(n.Null=e)._supportedIonTypesByOperation=new Map([["booleanValue",new Set([c.IonTypes.BOOL])],["numberValue",new Set([c.IonTypes.INT,c.IonTypes.FLOAT,c.IonTypes.DECIMAL])],["bigIntValue",new Set([c.IonTypes.INT])],["decimalValue",new Set([c.IonTypes.DECIMAL])],["stringValue",new Set([c.IonTypes.STRING,c.IonTypes.SYMBOL])],["dateValue",new Set([c.IonTypes.TIMESTAMP])],["timestampValue",new Set([c.IonTypes.TIMESTAMP])],["uInt8ArrayValue",new Set([c.IonTypes.BLOB,c.IonTypes.CLOB])],["fields",new Set([c.IonTypes.STRUCT])],["fieldNames",new Set([c.IonTypes.STRUCT])],["elements",new Set([c.IonTypes.LIST,c.IonTypes.SEXP,c.IonTypes.STRUCT])]])},{"../Ion":5,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],44:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.SExpression=void 0;r=e("../Ion"),e=function(e){(0,s.default)(r,e);var n=u(r);function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,i.default)(this,r),n.call(this,e,t)}return(0,a.default)(r,[{key:"toString",value:function(){return"("+this.join(" ")+")"}}]),r}(e("./Sequence").Sequence(r.IonTypes.SEXP));n.SExpression=e},{"../Ion":5,"./Sequence":45,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],45:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=r(e("@babel/runtime/helpers/toConsumableArray")),l=r(e("@babel/runtime/helpers/typeof")),u=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),c=r(e("@babel/runtime/helpers/assertThisInitialized")),h=r(e("@babel/runtime/helpers/inherits")),f=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf"));function p(e,t){var n,r,i,a,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return r=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==s.return||s.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,s.default)(n);return e=r?(e=(0,s.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,f.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Sequence=void 0;var d=e("../Ion"),y=e("./FromJsConstructor"),b=e("./Value");n.Sequence=function(r){return function(e){(0,h.default)(o,e);var s=_(o);function o(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=((0,u.default)(this,o),t=s.call(this),p(e));try{for(i.s();!(n=i.n()).done;){var a=n.value;t.push(a)}}catch(e){i.e(e)}finally{i.f()}return t._setAnnotations(r),(0,f.default)(t,new Proxy((0,c.default)(t),{set:function(e,t,n){return n instanceof b.Value||(n=b.Value.from(n)),e[t]=n,!0}}))}return(0,i.default)(o,[{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Value#get requires at least one parameter.");var r=t[0],i=t.slice(1);if("number"!=typeof r)throw new Error("Cannot index into a ".concat(this.getType().name," with a ").concat((0,l.default)(r),"."));r=this[r],r=void 0===r?null:r;return 0===i.length||null===r?r:r.get.apply(r,(0,a.default)(i))}},{key:"elements",value:function(){return Object.values(this)}},{key:"toString",value:function(){return"["+this.join(", ")+"]"}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.stepIn(r);var t,n=p(this);try{for(n.s();!(t=n.n()).done;)t.value.writeTo(e)}catch(e){n.e(e)}finally{n.f()}e.stepOut()}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0},n=!1,r=null;if(t.onlyCompareIon?e.getType()!==d.IonTypes.LIST&&e.getType()!==d.IonTypes.SEXP||(n=!0,r=e.elements()):e instanceof Array&&(n=!0,r=e),!n)return!1;var i=this.elements(),a=r;if(i.length!==a.length)return!1;for(var s=0;s<i.length;s++)if(t.onlyCompareIon){if(!i[s].ionEquals(a[s],t))return!1}else if(!i[s].equals(a[s]))return!1;return!0}}],[{key:"_fromJsValue",value:function(e,t){if(e instanceof Array)return new this(e.map(function(e){return b.Value.from(e)}),t);throw new Error("Cannot create a ".concat(this.name," from: ").concat(e.toString()))}}]),o}(b.Value(Array,r,y.FromJsConstructor.NONE))}},{"../Ion":5,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/assertThisInitialized":59,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75,"@babel/runtime/helpers/toConsumableArray":79,"@babel/runtime/helpers/typeof":82}],46:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.String=void 0;var r=e("../Ion"),c=e("./FromJsConstructor"),h=e("./JsValueConversion"),e=e("./Value"),c=(new c.FromJsConstructorBuilder).withPrimitives(c.Primitives.String).withClassesToUnbox(h._NativeJsString).build(),e=function(e){(0,o.default)(i,e);var n=u(i);function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,a.default)(this,i),(e=n.call(this,e))._setAnnotations(t),e}return(0,s.default)(i,[{key:"stringValue",value:function(){return this.toString()}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeString(this.stringValue())}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0},n=!1,r=null;return e instanceof i?(n=!0,r=e.stringValue()):t.onlyCompareIon||("string"==typeof e||e instanceof h._NativeJsString)&&(n=!0,r=e.valueOf()),!!n&&0===this.compareValue(r)}},{key:"compareValue",value:function(e){return this.stringValue().localeCompare(e)}}]),i}(e.Value(h._NativeJsString,r.IonTypes.STRING,c));n.String=e},{"../Ion":5,"./FromJsConstructor":38,"./JsValueConversion":40,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],47:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=r(e("@babel/runtime/helpers/toConsumableArray")),f=r(e("@babel/runtime/helpers/typeof")),u=r(e("@babel/runtime/helpers/slicedToArray")),c=r(e("@babel/runtime/helpers/classCallCheck")),i=r(e("@babel/runtime/helpers/createClass")),p=r(e("@babel/runtime/helpers/assertThisInitialized")),a=r(e("@babel/runtime/helpers/inherits")),_=r(e("@babel/runtime/helpers/possibleConstructorReturn")),o=r(e("@babel/runtime/helpers/getPrototypeOf"));function d(e,t){var n,r,i,a,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return r=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==s.return||s.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?l(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,o.default)(n);return e=r?(e=(0,o.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,_.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Struct=void 0;var b=e("../Ion"),r=e("./FromJsConstructor"),m=e("./Value"),e=function(e,t){(0,a.default)(h,e);var l=y(h);function h(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=((0,c.default)(this,h),(t=l.call(this))._fields=Object.create(null),d(e));try{for(i.s();!(n=i.n()).done;){var a=(0,u.default)(n.value,2),s=a[0],o=a[1];t._fields[s]=o instanceof m.Value?[o]:o}}catch(e){i.e(e)}finally{i.f()}return t._setAnnotations(r),(0,_.default)(t,new Proxy((0,p.default)(t),{set:function(e,t,n){return n instanceof m.Value||(n=m.Value.from(n)),e._fields[t]=[n],!0},get:function(e,t){var n;return t in e?e[t]:-1===(n=void 0!==e._fields[t]?e._fields[t].length:-1)?e._fields[t]:e._fields[t][n-1]},deleteProperty:function(e,t){return t in e._fields&&delete e._fields[t],!0}}))}return(0,i.default)(h,[{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Value#get requires at least one parameter.");var r=t[0],i=t.slice(1);if("string"!=typeof r)throw new Error("Cannot index into a struct with a ".concat((0,f.default)(r),"."));var r=this._fields[r];return void 0===r?null:0===i.length?r[r.length-1]:(r=r[r.length-1]).get.apply(r,(0,s.default)(i))}},{key:"getAll",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Value#get requires at least one parameter.");var r=t[0],i=t.slice(1);if("string"!=typeof r)throw new Error("Cannot index into a struct with a ".concat((0,f.default)(r),"."));var a,r=this._fields[r];return void 0===r?null:0===i.length?r:(a=[],r.forEach(function(e){return a.push.apply(a,(0,s.default)(e.getAll.apply(e,(0,s.default)(i))))}),a)}},{key:"fieldNames",value:function(){return Object.keys(this._fields)}},{key:"allFields",value:function(){return Object.entries(this._fields)}},{key:"fields",value:function(){var e,t=Object.create(null),n=d(this.allFields());try{for(n.s();!(e=n.n()).done;){var r=(0,u.default)(e.value,2),i=r[0],a=r[1];t[i]=a[a.length-1]}}catch(e){n.e(e)}finally{n.f()}return Object.entries(t)}},{key:"elements",value:function(){return Object.values(this._fields).flat()}},{key:t,value:function(){return this.fields()[Symbol.iterator]()}},{key:"toString",value:function(){return"{"+(0,s.default)(this.allFields()).map(function(e){e=(0,u.default)(e,2);return e[0]+": "+e[1]}).join(", ")+"}"}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.stepIn(b.IonTypes.STRUCT);var t,n=d(this.allFields());try{for(n.s();!(t=n.n()).done;){var r,i=(0,u.default)(t.value,2),a=i[0],s=d(i[1]);try{for(s.s();!(r=s.n()).done;){var o=r.value;e.writeFieldName(a),o.writeTo(e)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){n.e(e)}finally{n.f()}e.stepOut()}},{key:"deleteField",value:function(e){return e in this._fields&&(delete this._fields[e],!0)}},{key:"toJSON",value:function(){var e,t=Object.create(h.prototype),n=d(this.fields());try{for(n.s();!(e=n.n()).done;){var r=(0,u.default)(e.value,2),i=r[0],a=r[1];t[i]=a}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0},n=!1,r=null;if(e instanceof h?(n=!0,r=e.allFields()):t.onlyCompareIon||("object"===(0,f.default)(e)||e instanceof Object)&&(n=!0,r=m.Value.from(e).allFields()),!n)return!1;if(this.allFields().length!==r.length)return!1;for(var i=!0,a=new Array(r.length),s=0;i&&s<this.allFields().length;s++){i=!1;for(var o,l,u=0;!i&&u<r.length;u++)!a[u]&&(o=this.allFields()[s],l=r[u],i=o[0]===l[0]&&this._ionValueEquals(o[1].sort(),l[1].sort(),t))&&(a[u]=!0)}for(var c=0;c<a.length;c++)if(!a[c]){i=!1;break}return i}},{key:"_ionValueEquals",value:function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n.onlyCompareIon){if(!e[r].ionEquals(t[r],n))return!1}else if(!e[r].equals(t[r]))return!1;return!0}}],[{key:"_fromJsValue",value:function(e,t){if(e instanceof Object)return new this(Object.entries(e).map(function(e){var e=(0,u.default)(e,2),t=e[0],e=e[1];return[t,[m.Value.from(e)]]}),t);throw new Error("Cannot create a dom.Struct from: ".concat(e.toString()))}}]),h}(m.Value(Object,b.IonTypes.STRUCT,r.FromJsConstructor.NONE),Symbol.iterator);n.Struct=e},{"../Ion":5,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/assertThisInitialized":59,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75,"@babel/runtime/helpers/slicedToArray":77,"@babel/runtime/helpers/toConsumableArray":79,"@babel/runtime/helpers/typeof":82}],48:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.Symbol=void 0;var r=e("../Ion"),c=e("./FromJsConstructor"),e=e("./Value"),c=(new c.FromJsConstructorBuilder).withPrimitives(c.Primitives.String).withClassesToUnbox(String).build(),e=function(e){(0,o.default)(i,e);var n=u(i);function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,a.default)(this,i),(e=n.call(this,e))._setAnnotations(t),e}return(0,s.default)(i,[{key:"stringValue",value:function(){return this.toString()}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeSymbol(this.stringValue())}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0},n=!1,r=null;return e instanceof i?(n=!0,r=e.stringValue()):t.onlyCompareIon||("string"==typeof e||e instanceof String)&&(n=!0,r=e.valueOf()),!!n&&0===this.compareValue(r)}},{key:"compareValue",value:function(e){return this.stringValue().localeCompare(e)}}]),i}(e.Value(String,r.IonTypes.SYMBOL,c));n.Symbol=e},{"../Ion":5,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],49:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),a=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(n);return e=r?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var c=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},h=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&c(t,e,n);return h(t,e),t},f=(Object.defineProperty(n,"__esModule",{value:!0}),n.Timestamp=void 0,r(e("../Ion"))),p=e("../Ion"),r=e("./FromJsConstructor"),e=e("./Value"),r=(new r.FromJsConstructorBuilder).withClasses(Date,f.Timestamp).build(),e=function(e){(0,l.default)(a,e);var i=u(a);function a(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return(0,s.default)(this,a),e instanceof Date?n=a._timestampFromDate(t=e):t=(n=e).getDate(),(e=i.call(this,t))._date=t,e._timestamp=n,e._setAnnotations(r),e}return(0,o.default)(a,[{key:"timestampValue",value:function(){return this._timestamp}},{key:"dateValue",value:function(){return this._date}},{key:"writeTo",value:function(e){e.setAnnotations(this.getAnnotations()),e.writeTimestamp(this.timestampValue())}},{key:"_valueEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1,onlyCompareIon:!0},n=!1,r=null;if(e instanceof a)n=!0,r=e.timestampValue();else if(!t.onlyCompareIon)if(e instanceof f.Timestamp)n=!0,r=e;else if(e instanceof Date)return this.dateValue().getTime()===e.getTime();return!!n&&(t.ignoreTimestampPrecision?0===this.timestampValue().compareTo(r):this.timestampValue().equals(r))}}],[{key:"_timestampFromDate",value:function(e){var t=1e3*e.getUTCSeconds()+e.getUTCMilliseconds(),t=new p.Decimal(t,-3);return new f.Timestamp(0,e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),t)}}]),a}(e.Value(Date,p.IonTypes.TIMESTAMP,r));n.Timestamp=e},{"../Ion":5,"./FromJsConstructor":38,"./Value":50,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],50:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=r(e("@babel/runtime/helpers/classCallCheck")),l=r(e("@babel/runtime/helpers/createClass")),u=r(e("@babel/runtime/helpers/assertThisInitialized")),c=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),a=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(n);return e=r?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var s,f=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},p=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&f(t,e,n);return p(t,e),t},_=(Object.defineProperty(n,"__esModule",{value:!0}),n.Value=void 0,e("../util")),d=r(e("./JsValueConversion")),y=Symbol("ion.dom.Value");function b(e,s,n){var t=function(){(0,c.default)(a,e);var i=h(a);function a(){var e;(0,o.default)(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n)))._ionType=s,e._ionAnnotations=[],Object.defineProperty((0,u.default)(e),"_ionType",{enumerable:!1}),Object.defineProperty((0,u.default)(e),"_ionAnnotations",{enumerable:!1}),e}return(0,l.default)(a,[{key:"_unsupportedOperation",value:function(e){throw new Error("Value#".concat(e,"() is not supported by Ion type ").concat(this.getType().name))}},{key:"getType",value:function(){return this._ionType}},{key:"_setAnnotations",value:function(e){this._ionAnnotations=e}},{key:"getAnnotations",value:function(){return null===this._ionAnnotations?[]:this._ionAnnotations}},{key:"isNull",value:function(){return!1}},{key:"booleanValue",value:function(){this._unsupportedOperation("booleanValue")}},{key:"numberValue",value:function(){this._unsupportedOperation("numberValue")}},{key:"bigIntValue",value:function(){this._unsupportedOperation("bigIntValue")}},{key:"decimalValue",value:function(){this._unsupportedOperation("decimalValue")}},{key:"stringValue",value:function(){this._unsupportedOperation("stringValue")}},{key:"dateValue",value:function(){this._unsupportedOperation("dateValue")}},{key:"timestampValue",value:function(){this._unsupportedOperation("timestampValue")}},{key:"uInt8ArrayValue",value:function(){this._unsupportedOperation("uInt8ArrayValue")}},{key:"fieldNames",value:function(){this._unsupportedOperation("fieldNames")}},{key:"fields",value:function(){this._unsupportedOperation("fields")}},{key:"allFields",value:function(){this._unsupportedOperation("allFields")}},{key:"elements",value:function(){this._unsupportedOperation("elements")}},{key:"get",value:function(){this._unsupportedOperation("get")}},{key:"getAll",value:function(){this._unsupportedOperation("getAll")}},{key:"as",value:function(e){if(this instanceof e)return this;throw new Error("".concat(this.constructor.name," is not an instance of ").concat(e.name))}},{key:"writeTo",value:function(e){this._unsupportedOperation("writeTo")}},{key:"deleteField",value:function(e){this._unsupportedOperation("deleteField")}},{key:"_valueEquals",value:function(e){this._unsupportedOperation("_valueEquals")}},{key:"equals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null},n=!1;return e instanceof b&&(n=!0),this._valueEquals(e,{onlyCompareIon:n,ignoreTimestampPrecision:!0,ignoreAnnotations:!0,epsilon:t.epsilon,coerceNumericType:!0})}},{key:"ionEquals",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{epsilon:null,ignoreAnnotations:!1,ignoreTimestampPrecision:!1};if(!t.ignoreAnnotations){if(!(e instanceof b))return!1;var n=this.getAnnotations(),r=e.getAnnotations();if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(0!==n[i].localeCompare(r[i]))return!1}t={onlyCompareIon:!0,ignoreTimestampPrecision:t.ignoreTimestampPrecision,epsilon:t.epsilon,coerceNumericType:!1};return this._valueEquals(e,t)}}],[{key:"_getIonType",value:function(){return s}},{key:"_fromJsValue",value:function(e,t){return n.construct(this,e,t)}}]),a}();return Object.defineProperty(t,y,{writable:!1,enumerable:!1,value:y}),t}n.Value=b,(s=b=n.Value||(n.Value={})).from=function(e,t){if(e instanceof s){if(_._hasValue(t))throw new Error("Value.from() does not support overriding the annotations on a dom.Value passed as an argument.");return e}return d._ionValueFromJsValue(e,t)},Object.defineProperty(b,Symbol.hasInstance,{get:function(){return function(e){return _._hasValue(e)&&_._hasValue(e.constructor)&&y in e.constructor&&e.constructor[y]===y}}})},{"../util":55,"./JsValueConversion":40,"@babel/runtime/helpers/assertThisInitialized":59,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],51:[function(e,x,t){"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},l=(Object.defineProperty(t,"__esModule",{value:!0}),t.load=t.loadAll=void 0,n(e("../Ion"))),u=e("../Ion"),a=e("../IonBinaryReader"),s=e("../IonTextReader"),c=e("./Blob"),h=e("./Clob"),f=e("./Decimal"),p=e("./Float"),_=e("./Integer"),d=e("./List"),y=e("./Null"),b=e("./SExpression"),m=e("./Struct"),v=e("./Symbol"),T=e("./Timestamp");function o(e){return e instanceof s.TextReader||e instanceof a.BinaryReader?e:u.makeReader(e)}function g(e){var t=e.type();if(null===t)throw new Error("loadValue() called when no further values were available to read.");var n,r,i=e.annotations();if(e.isNull())return new y.Null(e.type(),i);switch(t){case u.IonTypes.NULL:return new y.Null(u.IonTypes.NULL,i);case u.IonTypes.BOOL:return new l.dom.Boolean(e.booleanValue(),i);case u.IonTypes.INT:return e.intSize()==u.IntSize.Number?new _.Integer(e.numberValue(),i):new _.Integer(e.bigIntValue(),i);case u.IonTypes.FLOAT:return new p.Float(e.numberValue(),i);case u.IonTypes.DECIMAL:return new f.Decimal(e.decimalValue(),i);case u.IonTypes.TIMESTAMP:return new T.Timestamp(e.timestampValue(),i);case u.IonTypes.SYMBOL:return new v.Symbol(e.stringValue(),i);case u.IonTypes.STRING:return new l.dom.String(e.stringValue(),i);case u.IonTypes.CLOB:return new h.Clob(e.uInt8ArrayValue(),i);case u.IonTypes.BLOB:return new c.Blob(e.uInt8ArrayValue(),i);case u.IonTypes.LIST:return r=(n=e).annotations(),new d.List(w(n),r);case u.IonTypes.SEXP:return r=(n=e).annotations(),new b.SExpression(w(n),r);case u.IonTypes.STRUCT:var a=e,s=new Map,o=a.annotations();for(a.stepIn();a.next();)s.has(a.fieldName())?s.get(a.fieldName()).push(g(a)):s.set(a.fieldName(),[g(a)]);return a.stepOut(),new m.Struct(s.entries(),o);default:throw new Error("Unrecognized IonType '".concat(t,"' found."))}}function w(e){var t=[];for(e.stepIn();e.next();)t.push(g(e));return e.stepOut(),t}t.loadAll=function(e){for(var t=o(e),n=[];t.next();)n.push(g(t));return n},t.load=function(e){return null===(e=o(e)).type()&&e.next(),null===e.type()?null:g(e)};var I=e("./Value"),C=(Object.defineProperty(t,"Value",{enumerable:!0,get:function(){return I.Value}}),e("./Null")),S=(Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return C.Null}}),e("./Boolean")),E=(Object.defineProperty(t,"Boolean",{enumerable:!0,get:function(){return S.Boolean}}),e("./Integer")),k=(Object.defineProperty(t,"Integer",{enumerable:!0,get:function(){return E.Integer}}),e("./Float")),O=(Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return k.Float}}),e("./Decimal")),A=(Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return O.Decimal}}),e("./Timestamp")),N=(Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return A.Timestamp}}),e("./String")),R=(Object.defineProperty(t,"String",{enumerable:!0,get:function(){return N.String}}),e("./Symbol")),L=(Object.defineProperty(t,"Symbol",{enumerable:!0,get:function(){return R.Symbol}}),e("./Blob")),B=(Object.defineProperty(t,"Blob",{enumerable:!0,get:function(){return L.Blob}}),e("./Clob")),V=(Object.defineProperty(t,"Clob",{enumerable:!0,get:function(){return B.Clob}}),e("./Struct")),U=(Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return V.Struct}}),e("./List")),M=(Object.defineProperty(t,"List",{enumerable:!0,get:function(){return U.List}}),e("./SExpression"));Object.defineProperty(t,"SExpression",{enumerable:!0,get:function(){return M.SExpression}})},{"../Ion":5,"../IonBinaryReader":7,"../IonTextReader":25,"./Blob":33,"./Boolean":34,"./Clob":35,"./Decimal":36,"./Float":37,"./Integer":39,"./List":41,"./Null":43,"./SExpression":44,"./String":46,"./Struct":47,"./Symbol":48,"./Timestamp":49,"./Value":50}],52:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/classCallCheck")),l=r(e("@babel/runtime/helpers/inherits")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf")),r=r(e("@babel/runtime/helpers/wrapNativeSuper"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,s.default)(n);return e=r?(e=(0,s.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0});e=function(e){(0,l.default)(s,e);var a=u(s);function s(e,t,n,r){var i;return(0,o.default)(this,s),(i=a.call(this)).type=e,i.index=n,i.message=t,i.eventstream=r,i}return(0,i.default)(s)}((n.EventStreamError=void 0,r.default)(Error));n.EventStreamError=e},{"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75,"@babel/runtime/helpers/wrapNativeSuper":84}],53:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),l=r(e("@babel/runtime/helpers/inherits")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),i=r(e("@babel/runtime/helpers/getPrototypeOf")),u=r(e("@babel/runtime/helpers/classCallCheck")),c=r(e("@babel/runtime/helpers/createClass"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,i.default)(n);return e=r?(e=(0,i.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.IonEventFactory=n.IonEventType=void 0;var f,p=e("../ComparisonResult"),o=e("../IonBinaryWriter"),_=e("../IonLocalSymbolTable"),d=e("../IonTextWriter"),y=e("../IonTypes"),b=e("../IonUnicode"),m=e("../IonWriteable"),v=((r=f=n.IonEventType||(n.IonEventType={}))[r.SCALAR=0]="SCALAR",r[r.CONTAINER_START=1]="CONTAINER_START",r[r.CONTAINER_END=2]="CONTAINER_END",r[r.SYMBOL_TABLE=3]="SYMBOL_TABLE",r[r.STREAM_END=4]="STREAM_END",function(){function s(e,t,n,r,i,a){(0,u.default)(this,s),this.eventType=e,this.ionType=t,this.fieldName=n,this.annotations=r,this.depth=i,this.ionValue=a}return(0,c.default)(s,[{key:"write",value:function(e){e.stepIn(y.IonTypes.STRUCT),e.writeFieldName("event_type"),e.writeSymbol(f[this.eventType]),null!==this.ionType&&(e.writeFieldName("ion_type"),e.writeSymbol(this.ionType.name.toUpperCase())),null!==this.fieldName&&void 0!==this.fieldName&&(e.writeFieldName("field_name"),e.stepIn(y.IonTypes.STRUCT),e.writeFieldName("text"),e.writeString(this.fieldName),e.stepOut()),null!==this.annotations&&(e.writeFieldName("annotations"),this.writeAnnotations(e)),this.eventType===f.SCALAR&&this.writeValues(e),e.writeFieldName("depth"),e.writeInt(this.depth),e.stepOut()}},{key:"writeAnnotations",value:function(e){if(void 0===this.annotations)e.writeNull(y.IonTypes.LIST);else{e.stepIn(y.IonTypes.LIST);for(var t=0;t<this.annotations.length;t++)e.stepIn(y.IonTypes.STRUCT),e.writeFieldName("text"),e.writeString(this.annotations[t]),e.stepOut();e.stepOut()}}},{key:"writeSymbolToken",value:function(e,t){e.writeSymbol(t)}},{key:"writeImportDescriptor",value:function(e){e.writeNull(y.IonTypes.STRUCT)}},{key:"writeValues",value:function(e){this.eventType===f.SCALAR&&(e.writeFieldName("value_text"),this.writeTextValue(e),e.writeFieldName("value_binary"),this.writeBinaryValue(e))}},{key:"writeTextValue",value:function(e){var t=new d.TextWriter(new m.Writeable);this.writeIonValue(t),t.close(),e.writeString(b.decodeUtf8(t.getBytes()))}},{key:"writeBinaryValue",value:function(e){var t=new o.BinaryWriter(_.defaultLocalSymbolTable(),new m.Writeable),n=(this.writeIonValue(t),t.close(),t.getBytes());e.stepIn(y.IonTypes.LIST);for(var r=0;r<n.length;r++)e.writeInt(n[r]);e.stepOut()}},{key:"equals",value:function(e){return this.compare(e).result==p.ComparisonResultType.EQUAL}},{key:"compare",value:function(e){var t;return this.eventType!==e.eventType?new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Event types don't match"):this.ionType!==e.ionType?new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Ion types don't match "+(null==(t=this.ionType)?void 0:t.name)+" vs. "+(null==(t=e.ionType)?void 0:t.name)):this.fieldName!==e.fieldName?new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Field names don't match "+this.fieldName+" vs. "+e.fieldName):this.depth!==e.depth?new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Event depths don't match "+this.depth+" vs. "+e.depth):(t=this.annotationCompare(e.annotations)).result===p.ComparisonResultType.NOT_EQUAL?t:(t=this.valueCompare(e)).result===p.ComparisonResultType.NOT_EQUAL?t:new p.ComparisonResult(p.ComparisonResultType.EQUAL)}},{key:"annotationCompare",value:function(e){if(this.annotations!==e){if(this.annotations.length!==e.length)return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"annotations length don't match"+this.annotations.length+" vs. "+e.length);for(var t=0;t<this.annotations.length;t++)if(this.annotations[t]!==e[t])return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"annotation value doesn't match"+this.annotations[t]+" vs. "+e[t])}return new p.ComparisonResult(p.ComparisonResultType.EQUAL)}}]),s}()),e=function(){function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"makeEvent",value:function(e,t,n,r,i,a,s){if(a)return new T(e,t,n,i,r);switch(e){case f.SCALAR:case f.CONTAINER_START:switch(t){case y.IonTypes.BOOL:return new w(e,t,n,i,r,s);case y.IonTypes.INT:return new g(e,t,n,i,r,s);case y.IonTypes.FLOAT:return new I(e,t,n,i,r,s);case y.IonTypes.DECIMAL:return new C(e,t,n,i,r,s);case y.IonTypes.SYMBOL:return new S(e,t,n,i,r,s);case y.IonTypes.STRING:return new E(e,t,n,i,r,s);case y.IonTypes.TIMESTAMP:return new k(e,t,n,i,r,s);case y.IonTypes.BLOB:return new O(e,t,n,i,r,s);case y.IonTypes.CLOB:return new A(e,t,n,i,r,s);case y.IonTypes.LIST:return new L(e,t,n,i,r);case y.IonTypes.SEXP:return new B(e,t,n,i,r);case y.IonTypes.STRUCT:return new R(e,t,n,i,r);default:throw new Error("IonType "+t.name+" unexpected.")}case f.SYMBOL_TABLE:throw new Error("symbol tables unsupported.");case f.CONTAINER_END:case f.STREAM_END:return new V(e,r,t)}}}]),e}(),T=(n.IonEventFactory=e,function(){(0,l.default)(s,v);var a=h(s);function s(e,t,n,r,i){return(0,u.default)(this,s),a.call(this,e,t,n,r,i,null)}return(0,c.default)(s,[{key:"valueCompare",value:function(e){return e instanceof s&&this.ionValue===e.ionValue?new p.ComparisonResult(p.ComparisonResultType.EQUAL):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}},{key:"writeIonValue",value:function(e){e.writeNull(null!==this.ionType?this.ionType:y.IonTypes.NULL)}}]),s}()),g=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){if(e instanceof o&&("bigint"==typeof this.ionValue?this.ionValue:BigInt(this.ionValue))===("bigint"==typeof e.ionValue?e.ionValue:BigInt(e.ionValue)))return new p.ComparisonResult(p.ComparisonResultType.EQUAL);return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"".concat(this.ionValue," vs. ").concat(e.ionValue))}},{key:"writeIonValue",value:function(e){e.writeInt(this.ionValue)}}]),o}(),w=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){return e instanceof o&&this.ionValue===e.ionValue?new p.ComparisonResult(p.ComparisonResultType.EQUAL):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}},{key:"writeIonValue",value:function(e){e.writeBoolean(this.ionValue)}}]),o}(),I=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){return e instanceof o&&Object.is(this.ionValue,e.ionValue)?new p.ComparisonResult(p.ComparisonResultType.EQUAL):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}},{key:"writeIonValue",value:function(e){e.writeFloat64(this.ionValue)}}]),o}(),C=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){return e instanceof o&&this.ionValue.equals(e.ionValue)?new p.ComparisonResult(p.ComparisonResultType.EQUAL):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}},{key:"writeIonValue",value:function(e){e.writeDecimal(this.ionValue)}}]),o}(),S=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){return e instanceof o&&this.ionValue===e.ionValue?new p.ComparisonResult(p.ComparisonResultType.EQUAL):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}},{key:"writeIonValue",value:function(e){e.writeSymbol(this.ionValue)}}]),o}(),E=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){return e instanceof o&&this.ionValue===e.ionValue?new p.ComparisonResult(p.ComparisonResultType.EQUAL):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}},{key:"writeIonValue",value:function(e){e.writeString(this.ionValue)}}]),o}(),k=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){return e instanceof o&&this.ionValue.equals(e.ionValue)?new p.ComparisonResult(p.ComparisonResultType.EQUAL):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}},{key:"writeIonValue",value:function(e){e.writeTimestamp(this.ionValue)}}]),o}(),O=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){if(!(e instanceof o))return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL);if(this.ionValue.length!==e.ionValue.length)return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Blob length don't match");for(var t=0;t<this.ionValue.length;t++)if(this.ionValue[t]!==e.ionValue[t])return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue[t]+" vs. "+e.ionValue[t]);return new p.ComparisonResult(p.ComparisonResultType.EQUAL)}},{key:"writeIonValue",value:function(e){e.writeBlob(this.ionValue)}}]),o}(),A=function(){(0,l.default)(o,v);var s=h(o);function o(e,t,n,r,i,a){return(0,u.default)(this,o),s.call(this,e,t,n,r,i,a)}return(0,c.default)(o,[{key:"valueCompare",value:function(e){if(!(e instanceof o))return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL);if(this.ionValue.length!==e.ionValue.length)return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue);for(var t=0;t<this.ionValue.length;t++)if(this.ionValue[t]!==e.ionValue[t])return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue[t]+" vs. "+e.ionValue[t]);return new p.ComparisonResult(p.ComparisonResultType.EQUAL)}},{key:"writeIonValue",value:function(e){e.writeClob(this.ionValue)}}]),o}(),N=function(){(0,l.default)(s,v);var a=h(s);function s(e,t,n,r,i){return(0,u.default)(this,s),a.call(this,e,t,n,r,i,null)}return(0,c.default)(s,[{key:"writeIonValue",value:function(e){}}]),s}(),R=function(){(0,l.default)(s,N);var a=h(s);function s(e,t,n,r,i){return(0,u.default)(this,s),a.call(this,e,t,n,r,i)}return(0,c.default)(s,[{key:"valueCompare",value:function(e){var t;return e instanceof s?(t=null==this.ionValue?[]:this.ionValue,e=null==e.ionValue?[]:e.ionValue,t.length!==e.length?new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Struct length don't match"):this.structsCompare(t,e)):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Event types don't match")}},{key:"structsCompare",value:function(e,t){for(var n=new p.ComparisonResult(p.ComparisonResultType.EQUAL),r=new Array(t.length),i=0;n&&i<e.length;i++){n.result=p.ComparisonResultType.NOT_EQUAL;for(var a=0;n.result==p.ComparisonResultType.NOT_EQUAL&&a<t.length;a++)if(!r[a]){var s=e[i],o=t[a];if((n=s.compare(o)).result==p.ComparisonResultType.EQUAL&&(r[a]=!0),n.result==p.ComparisonResultType.EQUAL&&s.eventType===f.CONTAINER_START){for(var l=0;l<o.ionValue.length;l++)r[l+a+1]=!0;i+=s.ionValue.length}}}for(var u=0;u<r.length;u++)if(!r[u]){n=new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Didn't find matching field for "+t[u].fieldName);break}return n}}]),s}(),L=function(){(0,l.default)(s,N);var a=h(s);function s(e,t,n,r,i){return(0,u.default)(this,s),a.call(this,e,t,n,r,i)}return(0,c.default)(s,[{key:"valueCompare",value:function(e){if(!(e instanceof s))return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Event types don't match");var t=null==this.ionValue?[]:this.ionValue,n=null==e.ionValue?[]:e.ionValue;if(t.length!==n.length)return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"List length don't match");for(var r=0;r<t.length;r++){var i=t[r];if(i.compare(n[r]).result==p.ComparisonResultType.NOT_EQUAL)return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"".concat(i.ionValue," vs. ").concat(n[r].ionValue),r+1,r+1);i.eventType===f.CONTAINER_START&&(r+=i.ionValue.length)}return new p.ComparisonResult(p.ComparisonResultType.EQUAL)}}]),s}(),B=function(){(0,l.default)(s,N);var a=h(s);function s(e,t,n,r,i){return(0,u.default)(this,s),a.call(this,e,t,n,r,i)}return(0,c.default)(s,[{key:"valueCompare",value:function(e){if(!(e instanceof s))return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"Event types don't match");var t=null==this.ionValue?[]:this.ionValue,n=null==e.ionValue?[]:e.ionValue;if(t.length!==n.length)return new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,"S-expression length don't match");for(var r=0;r<t.length;r++){var i=t[r],a=i.compare(n[r]);if(a.result==p.ComparisonResultType.NOT_EQUAL)return a;i.eventType===f.CONTAINER_START&&(r+=i.ionValue.length)}return new p.ComparisonResult(p.ComparisonResultType.EQUAL)}}]),s}(),V=function(){(0,l.default)(i,v);var r=h(i);function i(e,t,n){return(0,u.default)(this,i),e=e===f.STREAM_END?r.call(this,e,null,null,[],t,void 0):r.call(this,e,n,null,[],t,void 0),(0,a.default)(e)}return(0,c.default)(i,[{key:"valueCompare",value:function(e){return e instanceof i&&this.ionValue===e.ionValue?new p.ComparisonResult(p.ComparisonResultType.EQUAL):new p.ComparisonResult(p.ComparisonResultType.NOT_EQUAL,this.ionValue+" vs. "+e.ionValue)}},{key:"writeIonValue",value:function(e){}}]),i}()},{"../ComparisonResult":3,"../IonBinaryWriter":8,"../IonLocalSymbolTable":13,"../IonTextWriter":26,"../IonTypes":29,"../IonUnicode":30,"../IonWriteable":31,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/getPrototypeOf":66,"@babel/runtime/helpers/inherits":67,"@babel/runtime/helpers/interopRequireDefault":68,"@babel/runtime/helpers/possibleConstructorReturn":75}],54:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.IonEventStream=void 0,e("../ComparisonResult")),o=e("../ComparisonResult"),l=e("../Ion"),u=e("../IonBinaryReader"),c=e("../IonSpan"),h=e("../IonTypes"),f=e("./EventStreamError"),p=e("./IonEvent"),r=function(){function t(e){(0,i.default)(this,t),this.events=[],this.reader=e,this.eventFactory=new p.IonEventFactory,this.isEventStream=!1,this.generateStream()}return(0,a.default)(t,[{key:"writeEventStream",value:function(e){e.writeSymbol("$ion_event_stream");for(var t=0;t<this.events.length;t++)this.events[t].write(e)}},{key:"writeIon",value:function(e){try{for(var t,n=!1,r=0;r<this.events.length;r++)switch(null!==(t=this.events[r]).fieldName&&e.writeFieldName(t.fieldName),t.ionType!=h.IonTypes.SEXP&&t.ionType!=h.IonTypes.LIST||!this.isEmbedded(t)||(n=!0),e.setAnnotations(t.annotations),t.eventType){case p.IonEventType.SCALAR:if(null==t.ionValue)return void e.writeNull(t.ionType);if(n)e.writeString(t.ionValue.toString());else switch(t.ionType){case h.IonTypes.BOOL:e.writeBoolean(t.ionValue);break;case h.IonTypes.STRING:e.writeString(t.ionValue);break;case h.IonTypes.SYMBOL:e.writeSymbol(t.ionValue);break;case h.IonTypes.INT:e.writeInt(t.ionValue);break;case h.IonTypes.DECIMAL:e.writeDecimal(t.ionValue);break;case h.IonTypes.FLOAT:e.writeFloat64(t.ionValue);break;case h.IonTypes.NULL:e.writeNull(t.ionType);break;case h.IonTypes.TIMESTAMP:e.writeTimestamp(t.ionValue);break;case h.IonTypes.CLOB:e.writeClob(t.ionValue);break;case h.IonTypes.BLOB:e.writeBlob(t.ionValue);break;default:throw new Error("unexpected type: "+t.ionType.name)}break;case p.IonEventType.CONTAINER_START:e.stepIn(t.ionType);break;case p.IonEventType.CONTAINER_END:n=n&&!1,e.stepOut();break;case p.IonEventType.STREAM_END:break;case p.IonEventType.SYMBOL_TABLE:throw new Error("Symboltables unsupported.");default:throw new Error("Unexpected event type: "+t.eventType)}e.close()}catch(e){throw new f.EventStreamError("WRITE",e.message,this.events.length,this.events)}}},{key:"getEvents",value:function(){return this.events}},{key:"equals",value:function(e){return this.compare(e).result==o.ComparisonResultType.EQUAL}},{key:"compare",value:function(e){var t=0,n=0;if(this.events.length!=e.events.length)return new s.ComparisonResult(o.ComparisonResultType.NOT_EQUAL,"The event streams have different lengths");for(;t<this.events.length&&n<e.events.length;){var r=this.events[t],i=e.events[n];if(r.eventType===p.IonEventType.SYMBOL_TABLE&&t++,i.eventType===p.IonEventType.SYMBOL_TABLE&&n++,r.eventType!==p.IonEventType.SYMBOL_TABLE&&i.eventType!==p.IonEventType.SYMBOL_TABLE){switch(r.eventType){case p.IonEventType.SCALAR:var a=r.compare(i);if(a.result==o.ComparisonResultType.NOT_EQUAL)return a.actualIndex=t,a.expectedIndex=n,a;break;case p.IonEventType.CONTAINER_START:a=r.compare(i);if(a.result==o.ComparisonResultType.NOT_EQUAL)return t+=a.actualIndex,n+=a.expectedIndex,a.actualIndex=t,a.expectedIndex=n,a;null!==r.ionValue&&null!==i.ionValue&&(t+=r.ionValue.length,n+=i.ionValue.length);break;case p.IonEventType.CONTAINER_END:case p.IonEventType.STREAM_END:break;default:throw new Error("Unexpected event type: "+r.eventType)}t++,n++}}return new s.ComparisonResult(o.ComparisonResultType.EQUAL)}},{key:"isEmbedded",value:function(e){return"embedded_documents"===e.annotations[0]}},{key:"generateStream",value:function(){try{var e=this.reader.next();if(e===h.IonTypes.SYMBOL&&"$ion_event_stream"===this.reader.stringValue())this.marshalStream(),this.isEventStream=!0;else for(var t=[],n=[];;){if(this.reader.isNull())this.events.push(this.eventFactory.makeEvent(p.IonEventType.SCALAR,e,this.reader.fieldName(),this.reader.depth(),this.reader.annotations(),!0,this.reader.value()));else switch(e){case h.IonTypes.LIST:case h.IonTypes.SEXP:case h.IonTypes.STRUCT:var r=this.eventFactory.makeEvent(p.IonEventType.CONTAINER_START,e,this.reader.fieldName(),this.reader.depth(),this.reader.annotations(),!1,null);this.events.push(r),t.push(r),n.push(this.events.length),this.reader.stepIn();break;case null:if(0===this.reader.depth())return void this.events.push(this.eventFactory.makeEvent(p.IonEventType.STREAM_END,h.IonTypes.NULL,null,this.reader.depth(),[],!1,void 0));this.reader.stepOut(),this.endContainer(t.pop(),n.pop());break;default:this.events.push(this.eventFactory.makeEvent(p.IonEventType.SCALAR,e,this.reader.fieldName(),this.reader.depth(),this.reader.annotations(),!1,this.reader.value()))}e=this.reader.next()}}catch(e){throw new f.EventStreamError("READ",e.message,this.events.length,this.events)}}},{key:"endContainer",value:function(e,t){this.events.push(this.eventFactory.makeEvent(p.IonEventType.CONTAINER_END,e.ionType,null,e.depth,[],!1,null)),e.ionValue=this.events.slice(t,this.events.length)}},{key:"marshalStream",value:function(){this.events=[];for(var e=[],t=[],n=this.reader.next();n===h.IonTypes.STRUCT;n=this.reader.next()){this.reader.stepIn();var r=this.marshalEvent();if(r.eventType===p.IonEventType.CONTAINER_START)e.push(r),this.events.push(r),t.push(this.events.length);else if(r.eventType===p.IonEventType.CONTAINER_END)this.endContainer(e.pop(),t.pop());else{if(r.eventType!==p.IonEventType.SCALAR&&r.eventType!==p.IonEventType.STREAM_END)throw new Error("Unexpected eventType: "+r.eventType);this.events.push(r)}this.reader.stepOut()}}},{key:"marshalEvent",value:function(){for(var e,t={};this.reader.next();){var n=this.reader.fieldName();if(n&&void 0!==t[n])throw new Error("Repeated event field: "+n);switch(n){case"event_type":t[n]=this.reader.stringValue();break;case"ion_type":t[n]=this.parseIonType();break;case"field_name":t[n]=this.resolveFieldNameFromSerializedSymbolToken();break;case"annotations":t[n]=this.parseAnnotations();break;case"value_text":var r=this.reader.stringValue(),r=("$ion_"===r.substr(0,5)&&(r="$ion_user_value::"+r),l.makeReader(r)),i=(r.next(),r.value());t.isNull=r.isNull(),t[n]=i;break;case"value_binary":t[n]=this.parseBinaryValue();break;case"imports":t[n]=this.parseImports();break;case"depth":t[n]=this.reader.numberValue();break;default:throw new Error("Unexpected event field: "+n)}}switch(t.event_type){case"CONTAINER_START":e=p.IonEventType.CONTAINER_START;break;case"STREAM_END":e=p.IonEventType.STREAM_END;break;case"CONTAINER_END":e=p.IonEventType.CONTAINER_END;break;case"SCALAR":e=p.IonEventType.SCALAR;break;case"SYMBOL_TABLE":throw new Error("Symbol tables unsupported")}var a=void 0!==t.field_name?t.field_name:null,s=(t.annotations||(t.annotations=[]),this.eventFactory.makeEvent(e,t.ion_type,a,t.depth,t.annotations,t.isNull,t.value_text));if(e===p.IonEventType.SCALAR){a=this.eventFactory.makeEvent(e,t.ion_type,a,t.depth,t.annotations,t.isNull,t.value_binary);if(!s.equals(a))throw new Error("Text event ".concat(t.value_text," does not equal binary event ").concat(t.value_binary))}return s}},{key:"parseIonType",value:function(){var e=this.reader.stringValue().toLowerCase();switch(e){case"null":return h.IonTypes.NULL;case"bool":return h.IonTypes.BOOL;case"int":return h.IonTypes.INT;case"float":return h.IonTypes.FLOAT;case"decimal":return h.IonTypes.DECIMAL;case"timestamp":return h.IonTypes.TIMESTAMP;case"symbol":return h.IonTypes.SYMBOL;case"string":return h.IonTypes.STRING;case"clob":return h.IonTypes.CLOB;case"blob":return h.IonTypes.BLOB;case"list":return h.IonTypes.LIST;case"sexp":return h.IonTypes.SEXP;case"struct":return h.IonTypes.STRUCT;default:throw new Error("i: "+e)}}},{key:"parseAnnotations",value:function(){var e=[];if(!this.reader.isNull()){this.reader.stepIn();for(;t=this.reader.next();)if(t==h.IonTypes.STRUCT){this.reader.stepIn();var t=this.reader.next();if("text"==this.reader.fieldName()&&t==h.IonTypes.STRING){var n=this.reader.stringValue();null!==n&&e.push(n)}else if("importLocation"==this.reader.fieldName()&&t==h.IonTypes.INT){n=l.defaultLocalSymbolTable().getSymbolText(this.reader.numberValue());if(null==n)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");e.push(n)}this.reader.stepOut()}this.reader.stepOut()}return e}},{key:"parseBinaryValue",value:function(){if(this.reader.isNull())return null;for(var e=[],t=(this.reader.stepIn(),this.reader.next());t;)e.push(this.reader.numberValue()),t=this.reader.next();this.reader.stepOut();var n=new Uint8Array(e),n=new u.BinaryReader(new c.BinarySpan(n));return n.next(),n.value()}},{key:"parseImports",value:function(){return this.reader.value()}},{key:"resolveFieldNameFromSerializedSymbolToken",value:function(){if(!this.reader.isNull()){this.reader.stepIn();var e=this.reader.next();if("text"==this.reader.fieldName()&&e==h.IonTypes.STRING){var t=this.reader.stringValue();if(null!==t)return this.reader.stepOut(),t}else if("importLocation"==this.reader.fieldName()&&e==h.IonTypes.INT){t=l.defaultLocalSymbolTable().getSymbolText(this.reader.numberValue());if(null==t)throw new Error("Unresolvable symbol ID, symboltokens unsupported.");return this.reader.stepOut(),t}}return null}}]),t}();n.IonEventStream=r},{"../ComparisonResult":3,"../Ion":5,"../IonBinaryReader":7,"../IonSpan":19,"../IonTypes":29,"./EventStreamError":52,"./IonEvent":53,"@babel/runtime/helpers/classCallCheck":60,"@babel/runtime/helpers/createClass":62,"@babel/runtime/helpers/interopRequireDefault":68}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSafeInteger=n._assertDefined=n._hasValue=n._sign=void 0,n._sign=function(e){return e<0||0===e&&1/e==-1/0?-1:1},n._hasValue=function(e){return null!=e},n._assertDefined=function(e){if(void 0===e)throw new Error("Expected value to be defined")},n.isSafeInteger=function(e){return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER}},{}],56:[function(e,t,n){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},{}],57:[function(e,t,n){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],58:[function(e,t,n){var r=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return r(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":56}],59:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],60:[function(e,t,n){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],61:[function(e,r,t){var i=e("./setPrototypeOf.js"),a=e("./isNativeReflectConstruct.js");function s(e,t,n){return a()?r.exports=s=Reflect.construct.bind():r.exports=s=function(e,t,n){var r=[null];r.push.apply(r,t);t=new(Function.bind.apply(e,r));return n&&i(t,n.prototype),t},r.exports.__esModule=!0,r.exports.default=r.exports,s.apply(null,arguments)}r.exports=s,r.exports.__esModule=!0,r.exports.default=r.exports},{"./isNativeReflectConstruct.js":70,"./setPrototypeOf.js":76}],62:[function(e,t,n){var i=e("./toPropertyKey.js");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}t.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":81}],63:[function(e,t,n){var r=e("./toPropertyKey.js");t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":81}],64:[function(e,t,n){function r(){return t.exports=r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.exports.__esModule=!0,t.exports.default=t.exports,r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],65:[function(e,t,n){var i=e("./superPropBase.js");function r(){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get.bind():t.exports=r=function(e,t,n){var r=i(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value},t.exports.__esModule=!0,t.exports.default=t.exports,r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{"./superPropBase.js":78}],66:[function(e,t,n){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],67:[function(e,t,n){var r=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":76}],68:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],69:[function(e,t,n){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],70:[function(e,t,n){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],71:[function(e,t,n){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{}],72:[function(e,t,n){t.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],73:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],74:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],75:[function(e,t,n){var r=e("./typeof.js").default,i=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":59,"./typeof.js":82}],76:[function(e,n,t){function r(e,t){return n.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n.exports.__esModule=!0,n.exports.default=n.exports,r(e,t)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports},{}],77:[function(e,t,n){var r=e("./arrayWithHoles.js"),i=e("./iterableToArrayLimit.js"),a=e("./unsupportedIterableToArray.js"),s=e("./nonIterableRest.js");t.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithHoles.js":57,"./iterableToArrayLimit.js":72,"./nonIterableRest.js":73,"./unsupportedIterableToArray.js":83}],78:[function(e,t,n){var r=e("./getPrototypeOf.js");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./getPrototypeOf.js":66}],79:[function(e,t,n){var r=e("./arrayWithoutHoles.js"),i=e("./iterableToArray.js"),a=e("./unsupportedIterableToArray.js"),s=e("./nonIterableSpread.js");t.exports=function(e){return r(e)||i(e)||a(e)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithoutHoles.js":58,"./iterableToArray.js":71,"./nonIterableSpread.js":74,"./unsupportedIterableToArray.js":83}],80:[function(e,t,n){var r=e("./typeof.js").default;t.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if(n=n.call(e,t||"default"),"object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":82}],81:[function(e,t,n){var r=e("./typeof.js").default,i=e("./toPrimitive.js");t.exports=function(e){return e=i(e,"string"),"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":80,"./typeof.js":82}],82:[function(e,t,n){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],83:[function(e,t,n){var r=e("./arrayLikeToArray.js");t.exports=function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":56}],84:[function(e,t,n){var r=e("./getPrototypeOf.js"),i=e("./setPrototypeOf.js"),a=e("./isNativeFunction.js"),s=e("./construct.js");function o(e){var n="function"==typeof Map?new Map:void 0;return t.exports=o=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return s(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports,o(e)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},{"./construct.js":61,"./getPrototypeOf.js":66,"./isNativeFunction.js":69,"./setPrototypeOf.js":76}]},{},[5])(5)});